<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PMD Beyond the Sea - Holiday Hills Dungeon Grader</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/msikma/pokesprite-spritesheet@master/assets/pokesprite-pokemon-gen8.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/msikma/pokesprite-spritesheet@master/assets/pokesprite-inventory.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/msikma/pokesprite-spritesheet@master/assets/pokesprite-misc.css">

    <style>
        @import url("https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap");
        @import url("https://fonts.googleapis.com/css2?family=VT323&display=swap");
        @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css");
        @import url("https://fonts.googleapis.com/css2?family=Open+Sans&family=Rakkas&family=Mochiy+Pop+One&family=Silkscreen&display=swap");

        html {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
        }

        /* ==== GLOBAL VARIABLES ============================= */
        body {
            background-color: transparent;
            margin: 0;
            padding: 0;
            --dropshadow-color: rgb(45, 43, 96);
            --textshadow-color: rgb(45, 43, 96, 0.5);
            --debug-dropshadow-color: rgb(253, 70, 70);
            --debug-textshadow-color: rgba(253, 70, 70, 0.5);
            --slot1-border-shadow: #4999d1;
            --slot1-bg-color: #b2e2f8;
        }

        /* =================================================== */

        .text-pre {
            white-space: break-spaces;
        }

        @media only screen and (min-width: 0px) {
            .team-container-1 {
                order: 1;
            }

            .party-member-1 {
                order: 2;
            }

            .team-container-2 {
                order: 3;
            }

            .party-member-2 {
                order: 4;
            }

            .team-container-3 {
                order: 5;
            }

            .party-member-3 {
                order: 6;
            }

            .team-container-4 {
                order: 7;
            }

            .party-member-4 {
                order: 8;
            }
        }

        @media only screen and (min-width: 768px) {
            .team-container-1 {
                order: 3;
            }

            .party-member-1 {
                order: 1;
            }

            .team-container-2 {
                order: 4;
            }

            .party-member-2 {
                order: 2;
            }

            .team-container-3 {
                order: 7;
            }

            .party-member-3 {
                order: 5;
            }

            .team-container-4 {
                order: 8;
            }

            .party-member-4 {
                order: 6;
            }
        }

        @media only screen and (min-width: 992px) {
            .team-container-1 {
                order: 1;
            }

            .party-member-1 {
                order: 2;
            }

            .team-container-2 {
                order: 4;
            }

            .party-member-2 {
                order: 3;
            }

            .team-container-3 {
                order: 5;
            }

            .party-member-3 {
                order: 6;
            }

            .team-container-4 {
                order: 8;
            }

            .party-member-4 {
                order: 7;
            }
        }

        @media only screen and (min-width: 1400px) {
            .copy-prev {
                height: 40px !important;
                top: 90px !important;
                left: initial !important;
                z-index: 6 !important;
            }

            .team-box.first .clear-box,
            .team-box.second .clear-box,
            .team-box.third .clear-box,
            .team-box.fourth .clear-box {
                top: 45px !important;
            }

            .team-box.first .copy-prev,
            .team-box.third .copy-prev,
            .team-box.first .copy-prev.clear-box,
            .team-box.third .copy-prev.clear-box {
                right: -50px !important;
                border-radius: 0 var(--bs-border-radius) var(--bs-border-radius) 0 !important;
                border-width: 0.2em 0.2em 0.2em 0 !important;
            }

            .team-box.second .copy-prev,
            .team-box.fourth .copy-prev {
                left: -50px !important;
                border-radius: var(--bs-border-radius) 0 0 var(--bs-border-radius) !important;
                border-width: 0.2em 0 0.2em 0.2em !important;
            }

            .team-box.first .copy-prev:hover,
            .team-box.first .copy-prev.clear-box:hover,
            .team-box.third .copy-prev:hover,
            .team-box.third .copy-prev.clear-box:hover {
                width: 50px !important;
                right: -55px !important;
                padding-top: initial;
                padding-right: initial;
                padding-left: 10px !important;
                padding-bottom: initial !important;
            }

            .team-box.second .copy-prev:hover,
            .team-box.fourth .copy-prev:hover {
                width: 50px !important;
                left: -55px !important;
                padding-top: initial;
                padding-left: initial;
                padding-right: 10px !important;
                padding-bottom: initial !important;
            }
        }

        .team-box .copy-prev {
            background: #23bc82;
            color: #084a3a;
            position: absolute;
            width: 45px;
            height: 40px;
            top: -45px;
            left: 60px;
            border-radius: var(--bs-border-radius) var(--bs-border-radius) 0 0;
            border-width: 0.2em 0.2em 0 0.2em;
            border-color: #c4ffe9;
            border-style: solid;
            transition: ease 0.3s;
        }

        .team-box .copy-prev:hover {
            height: 45px;
            top: -50px;
            padding-top: initial;
            padding-left: initial;
            padding-right: initial;
            padding-bottom: 5px;
            transition: ease 0.3s;
            color: #29c68a;
            background: #0b673a;
            border-color: white;
        }

        .team-box .clear-box {
            background: #dd4045;
            color: #720404;
            border-color: #fed8e2;
            border-style: solid;
            transition: ease 0.3s;
            left: initial;
        }

        .team-box .clear-box:hover {
            color: #ed575c;
            background: #770a0a;
            border-color: white;
        }

        .map-information.fadeInAnim {
            opacity: 1;
            animation: fadeIn 0.5s;
            animation-fill-mode: forwards;
        }

        .map-information.fadeOutAnim {
            opacity: 0;
            animation: fadeOut 0.5s;
            animation-fill-mode: forwards;
        }

        .fadeInAnim {
            opacity: 1;
            animation: fadeIn 1s;
            animation-fill-mode: forwards;
        }

        .fadeOutAnim {
            opacity: 0;
            animation: fadeOut 1s;
            animation-fill-mode: forwards;
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        .tip-box {
            text-align: center;
            background: linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.8) 10%, rgba(0, 0, 0, 0.8) 90%, rgba(0, 0, 0, 0) 100%);
            margin: auto;
            color: white;
            margin: 1.5em auto;
            padding: 1em 10%;
            font-size: 0.95em;
            letter-spacing: 0.01em;
            word-spacing: 0.05em;
        }

        .example-header {
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            font-size: 1.2em;
            text-decoration: underline dashed 1px rgb(255, 255, 255, 0.8);
            color: #d6d7ff;
            text-shadow: 2px 2px 0 #454384, -2px -2px 0 #454384, 2px -2px 0 #454384, -2px 2px 0 #454384,
                2px 0 0 #454384, -2px 0 0 #454384, 0 -2px 0 #454384, 0 2px 0 #454384,
                1px 1px 0 #454384, -1px -1px 0 #454384, 1px -1px 0 #454384, -1px 1px 0 #454384,
                1px 0 0 #454384, -1px 0 0 #454384, 0 -1px 0 #454384, 0 1px 0 #454384;
            margin-bottom: 0.5em;
        }

        .tip-icon.exclaim {
            margin-left: 0.2em;
            rotate: 8deg;
            font-size: 1.2em;
            color: #c62b2b;
            text-shadow: 2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white,
                2px 0 0 white, -2px 0 0 white, 0 -2px 0 white, 0 2px 0 white,
                1px 1px 0 white, -1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white,
                1px 0 0 white, -1px 0 0 white, 0 -1px 0 white, 0 1px 0 white;
        }

        .tip-box p b {
            color: #f4bc73;
        }

        .tip-box p a {
            color: #ea444f;
            text-shadow: 0 0 0.3em rgb(255, 255, 255, 0.2);
            font-weight: bold;
            text-decoration: underline dotted 2px;
        }

        .tip-box p a:hover {
            color: #ea444f;
            text-shadow: 0 0 0.3em rgb(255, 255, 255, 0.2);
            font-weight: bold;
            text-decoration: underline dotted 2px;
            letter-spacing: 0.05em;
            animation: hoverLink 0.1s;
        }

        @keyframes hoverLink {
            0% {
                letter-spacing: 0em;
            }

            100% {
                letter-spacing: 0.05em;
            }
        }

        .start-screen.section-header {
            z-index: 5;
            font-size: 2.5em;
            margin: 0.1em auto 1em auto;
            text-align: center;
            position: relative;
        }

        .section-header {
            letter-spacing: 0.15em;
            color: white;
            font-family: "Mochiy Pop One";
            filter: drop-shadow(1px 1px 0 var(--dropshadow-color)) drop-shadow(-1px -1px 0 var(--dropshadow-color)) drop-shadow(-1px 1px 0 var(--dropshadow-color)) drop-shadow(1px -1px 0 var(--dropshadow-color)) drop-shadow(2px 2px 0 white) drop-shadow(-2px -2px 0 white) drop-shadow(-2px 2px 0 white) drop-shadow(2px -2px 0 white);
            text-shadow: 0.07em 0.07em 0 var(--textshadow-color),
                -0.07em -0.07em 0 var(--textshadow-color),
                0.07em -0.07em 0 var(--textshadow-color), -0.07em 0.07em 0 var(--textshadow-color),
                0.05em 0.05em 0 var(--textshadow-color), -0.05em -0.05em 0 var(--textshadow-color),
                0.05em -0.05em 0 var(--textshadow-color), -0.05em 0.05em 0 var(--textshadow-color),
                0.06em 0.06em 0 var(--textshadow-color), -0.06em -0.06em 0 var(--textshadow-color),
                0.06em -0.06em 0 var(--textshadow-color), -0.06em 0.06em 0 var(--textshadow-color);
        }

        #debug-header {
            letter-spacing: 0.15em;
            color: white;
            font-family: "Mochiy Pop One";
            filter: drop-shadow(1px 1px 0 var(--debug-dropshadow-color)) drop-shadow(-1px -1px 0 var(--debug-dropshadow-color)) drop-shadow(-1px 1px 0 var(--debug-dropshadow-color)) drop-shadow(1px -1px 0 var(--debug-dropshadow-color)) drop-shadow(2px 2px 0 white) drop-shadow(-2px -2px 0 white) drop-shadow(-2px 2px 0 white) drop-shadow(2px -2px 0 white);
            text-shadow: 0.07em 0.07em 0 var(--debug-textshadow-color),
                -0.07em -0.07em 0 var(--debug-textshadow-color),
                0.07em -0.07em 0 var(--debug-textshadow-color), -0.07em 0.07em 0 var(--debug-textshadow-color),
                0.05em 0.05em 0 var(--debug-textshadow-color), -0.05em -0.05em 0 var(--debug-textshadow-color),
                0.05em -0.05em 0 var(--debug-textshadow-color), -0.05em 0.05em 0 var(--debug-textshadow-color),
                0.06em 0.06em 0 var(--debug-textshadow-color), -0.06em -0.06em 0 var(--debug-textshadow-color),
                0.06em -0.06em 0 var(--debug-textshadow-color), -0.06em 0.06em 0 var(--debug-textshadow-color);
        }

        .loading-screen {
            background-image: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Screens/request.png");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background-attachment: fixed;
            z-index: 10;
            position: fixed;
        }

        .loading-screen .loading-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            text-align: center;
            width: fit-content;
            height: fit-content;
        }

        .loading {
            margin: 1em;
        }

        .loading.locked:before {
            font-family: "FontAwesome";
            content: "\f023";
            font-size: 2.5em;
            color: white;
            filter: drop-shadow(1px 1px 0 rgb(28, 21, 1, 0.3))
            drop-shadow(-1px -1px 0 rgb(28, 21, 1, 0.3))
            drop-shadow(1px -1px 0 rgb(28, 21, 1, 0.3))
            drop-shadow(-1px 1px 0 rgb(28, 21, 1, 0.3))
            drop-shadow(3px 3px 0 rgb(28, 21, 1, 0.7))
            drop-shadow(-3px -3px 0 rgb(28, 21, 1, 0.7))
            drop-shadow(3px -3px 0 rgb(28, 21, 1, 0.7))
            drop-shadow(-3px 3px 0 rgb(28, 21, 1, 0.7));
        }

        .loading.access:before {
            font-family: "FontAwesome";
            content: "\f251";
            font-size: 2.5em;
            animation: loading-hourglass 3s;
            animation-iteration-count: infinite;
            color: white;
            filter: drop-shadow(1px 1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(-1px -1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(1px -1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(-1px 1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(3px 3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(-3px -3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(3px -3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(-3px 3px 0 rgb(28, 21, 1, 0.7));
        }

        .loading-text {
            font-size: 3em;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            letter-spacing: 0.01em;
            color: white;
            margin: 1em auto auto auto;
            filter: drop-shadow(1px 1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(-1px -1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(1px -1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(-1px 1px 0 rgb(28, 21, 1, 0.3)) drop-shadow(3px 3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(-3px -3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(3px -3px 0 rgb(28, 21, 1, 0.7)) drop-shadow(-3px 3px 0 rgb(28, 21, 1, 0.7));
            letter-spacing: 0.15em;
        }

        .loading-text.access {
            animation: bounce 0.5s ease infinite alternate;
        }

        @keyframes bounce {
            100% {
                transform: translateY(-15px);
            }
        }

        @keyframes loading-hourglass {
            0% {
                content: "\f251";
            }

            33% {
                content: "\f252";
            }

            66% {
                content: "\f253";
            }
        }

        .loading-screen.hide {
            opacity: 0;
            animation: hide-loading 1s;
        }

        @keyframes hide-loading {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        .main-container {
            position: relative;
            height: fit-content;
            width: 100%;
            height: 100vh;
            padding: 1.5em 0.5em;
            background: transparent;
        }

        .button-bar {
            display: flex;
            flex-wrap: wrap;
            margin: 0 auto;
            width: fit-content;
        }

        .big-button {
            border: none;
            filter: drop-shadow(0 0 0.6em black) drop-shadow(0.2em 0.2em 0 rgb(45, 43, 96, 0.4));
            text-shadow: 0.1em 0.1em 0 var(--dropshadow-color), -0.1em -0.1em 0 var(--dropshadow-color),
                -0.1em 0.1em 0 var(--dropshadow-color), 0.1em -0.1em 0 var(--dropshadow-color),
                0 0.1em 0 var(--dropshadow-color), 0em -0.1em 0 var(--dropshadow-color),
                -0.1em 0em 0 var(--dropshadow-color), 0 -0.1em 0 var(--dropshadow-color);
            width: 6.5em;
            height: 5.5em;
            font-size: 1.3em;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            letter-spacing: 0.01em;
            color: white;
            margin: 0 0.5em;
        }

        .big-button:hover {
            animation: animateButton 0.4s;
            cursor: pointer;
            scale: 1.1;
        }

        .big-button.credits-link-big {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/gear.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
        }

        .big-button.external-link {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/question-mark.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
        }

        .big-button.map-link {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/pelipper-sign.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
            width: fit-content;
        }

        .big-button.island-link {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/dungeon-stairs.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
            width: fit-content;
        }

        .big-button.dungeon-link {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/dungeon-cave.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
            width: fit-content;
        }

        .big-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .big-button.submit-link {
            background: url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/pelipper-mail.png");
            background-size: contain;
            background-repeat: no-repeat;
            background-position: top;
            width: fit-content;
        }

        .expand-results-btn {
            background: none;
            border: none;
            font-weight: 600;
            text-shadow: 0 0 0.3em rgb(255, 255, 255, 0.6);
            color: #442507;
        }

        .expand-results-icon {
            position: absolute;
            top: 15px;
            right: 8px;
        }

        .big-button.party-link.inventory {
            position: absolute;
            margin: auto;
            top: 2%;
            left: 0;
            right: 0;
        }

        .collapsing {
            -webkit-transition-duration: .6s;
            transition-duration: .6s;
            transition-delay: 0s;
        }

        @keyframes animateButton {
            0% {
                rotate: 0deg;
                scale: 1;
            }

            25% {
                rotate: 8deg;
            }

            50% {
                rotate: -8deg;
            }

            75% {
                rotate: 4deg;
            }

            100% {
                rotate: 0deg;
                scale: 1.1;
            }
        }

        .team-container {
            z-index: 5;
            height: fit-content;
        }

        select {
            appearance: none;
            font-size: 1em;
            padding: 0.2em 0.5em;
            background-color: #fff;
            border: 1px solid #000;
            box-shadow: 0.2em 0.2em 0 grey;
            border-radius: 0.25rem;
            color: #000;
            cursor: pointer;
            text-align: center;
            font-family: "DM Sans", sans-serif;
            margin: 0.25em 0 0 0;
            color: #000;
            font-weight: 600;
            width: 100%;

            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23131313%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 0.7rem top 50%;
            background-size: 0.65rem auto;
            background-repeat: no-repeat;
        }

        .team-box .team-member {
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .team-box .team-member.active {
            display: flex;
        }

        #select-user-1 option[value="none"],
        #select-user-1:has([value="none"]:checked),
        #select-team-1 option[value="none"],
        #select-team-1:has([value="none"]:checked),
        #select-char-1 option[value="none"],
        #select-char-1:has([value="none"]:checked),
        .guide-select option[value="none"],
        .guide-select:has([value="none"]:checked) {
            color: rgba(7, 55, 99, 0.6);
            font-style: italic;
        }

        #select-user-2 option[value="none"],
        #select-user-2:has([value="none"]:checked),
        #select-team-2 option[value="none"],
        #select-team-2:has([value="none"]:checked),
        #select-char-2 option[value="none"],
        #select-char-2:has([value="none"]:checked) {
            color: rgba(104, 46, 12, 0.6);
            font-style: italic;
        }

        #select-user-3 option[value="none"],
        #select-user-3:has([value="none"]:checked),
        #select-team-3 option[value="none"],
        #select-team-3:has([value="none"]:checked),
        #select-char-3 option[value="none"],
        #select-char-3:has([value="none"]:checked) {
            color: rgba(32, 51, 16, 0.6);
            font-style: italic;
        }

        #select-user-4 option[value="none"],
        #select-user-4:has([value="none"]:checked),
        #select-team-4 option[value="none"],
        #select-team-4:has([value="none"]:checked),
        #select-char-4 option[value="none"],
        #select-char-4:has([value="none"]:checked) {
            color: rgba(52, 34, 91, 0.6);
            font-style: italic;
        }

        #select-user-1,
        #select-team-1,
        #select-char-1,
        #dungeon-select,
        #dungeon-select-small,
        .guide-select {
            background-color: #b2e2f8;
            border: 1px solid #4999d1;
            box-shadow: 0.2em 0.2em 0 #4999d1;
        }

        #select-user-2,
        #select-team-2,
        #select-char-2 {
            background-color: #ffe8c4;
            border: 1px solid #af763a;
            box-shadow: 0.2em 0.2em 0 #af763a;
        }

        #select-user-3,
        #select-team-3,
        #select-char-3 {
            background-color: #c7ddb3;
            border: 1px solid #33662d;
            box-shadow: 0.2em 0.2em 0 #33662d;
        }

        #select-user-4,
        #select-team-4,
        #select-char-4 {
            background-color: #ded8ff;
            border: 1px solid #8760c9;
            box-shadow: 0.2em 0.2em 0 #8760c9;
        }

        #username-select-1,
        #team-select-1,
        #char-select-1,
        #select-user-1,
        #select-team-1,
        #select-char-1,
        #dungeon-select,
        #dungeon-select-small,
        .guide-select {
            color: #073763;
        }

        #username-select-2,
        #team-select-2,
        #char-select-2,
        #select-user-2,
        #select-team-2,
        #select-char-2 {
            color: #682e0c;
        }

        #username-select-3,
        #team-select-3,
        #char-select-3,
        #select-user-3,
        #select-team-3,
        #select-char-3 {
            color: #203310;
        }

        #username-select-4,
        #team-select-4,
        #char-select-4,
        #select-user-4,
        #select-team-4,
        #select-char-4 {
            color: #34225b;
        }

        .party-dropdown {
            margin-bottom: 0.75em;
        }

        .team-box {
            font-family: "DM Sans", sans-serif;
            font-weight: 600;
            border: 0.3em white solid;
            border-radius: 0.5em;
            padding: 0.5em 0.65em;
            position: relative;
            margin: 1em 0;
            height: fit-content;
            text-align: center;
        }

        .team-box.first,
        .item-team-name.first {
            background: #66b5d2;
            color: #073763;
        }

        .team-box.second,
        .item-team-name.second {
            background: #d2a466;
            color: #682e0c;
        }

        .team-box.third,
        .item-team-name.third {
            background: #729951;
            color: #203310;
        }

        .team-box.fourth,
        .item-team-name.fourth {
            background: #9f85db;
            color: #34225b;
        }

        .team-box.active {
            display: block;
        }

        .team-box .number {
            position: absolute;
            color: white;
            right: -3%;
            top: -1%;
            font-size: 1.5em;
            scale: 1.3;
            rotate: 8deg;
        }

        .team-box .number.first {
            text-shadow: 2px 2px 0 #1a6689, -2px -2px 0 #1a6689, -2px 2px 0 #1a6689,
                2px -2px 0 #1a6689, -2px 0 0 #1a6689, 0 -2px 0 #1a6689, 2px 0 0 #1a6689,
                0 2px 0 #1a6689;
        }

        .team-box .number.second {
            text-shadow: 2px 2px 0 #9b5e30, -2px -2px 0 #9b5e30, -2px 2px 0 #9b5e30,
                2px -2px 0 #9b5e30, -2px 0 0 #9b5e30, 0 -2px 0 #9b5e30, 2px 0 0 #9b5e30,
                0 2px 0 #9b5e30;
        }

        .team-box .number.third {
            text-shadow: 2px 2px 0 #2f591e, -2px -2px 0 #2f591e, -2px 2px 0 #2f591e,
                2px -2px 0 #2f591e, -2px 0 0 #2f591e, 0 -2px 0 #2f591e, 2px 0 0 #2f591e,
                0 2px 0 #2f591e;
        }

        .team-box .number.fourth {
            text-shadow: 2px 2px 0 #65439e, -2px -2px 0 #65439e, -2px 2px 0 #65439e,
                2px -2px 0 #65439e, -2px 0 0 #65439e, 0 -2px 0 #65439e, 2px 0 0 #65439e,
                0 2px 0 #65439e;
        }

        .party-list-control {
            display: flex;
            flex: flex-wrap;
            justify-content: center;
            margin: 0.75em auto 1.75em auto;
            z-index: 5;
            width: fit-content;
            position: relative;
        }

        .party-display {
            margin: auto 0;
            padding-bottom: 1em;
            z-index: 5;
            height: fit-content;
        }

        .party-display .party-member-image,
        .party-member-image {
            width: 120px;
            height: 112px;
            position: relative;
            margin: auto;
        }

        .party-display .party-member-image img,
        party-member-image img {
            filter: drop-shadow(2px 2px 0 white) drop-shadow(-2px -2px 0 white) drop-shadow(2px -2px 0 white) drop-shadow(-2px 2px 0 white) drop-shadow(1px 1px 0 black) drop-shadow(-1px -1px 0 black) drop-shadow(1px -1px 0 black) drop-shadow(-1px 1px 0 black);
        }

        .party-display .party-member-info,
        .party-member-info {
            font-family: "VT323", monospace;
            color: white;
            font-size: 1.75em;
            filter: drop-shadow(2px 2px 0 black) drop-shadow(-2px -2px 0 black) drop-shadow(2px -2px 0 black) drop-shadow(-2px 2px 0 black);
            text-align: center;
            letter-spacing: 0.05em;
            margin-top: 0.75em;
        }

        .party-view-member-info {
            font-family: "DM Sans", sans-serif;
            font-size: 1.1em;
            font-weight: 700;
            text-align: center;
            letter-spacing: 0.05em;
            margin-top: 0.75em;
        }

        .stage-spot {
            height: 22px;
            width: 80px;
            background-color: rgba(0, 0, 0, 0.75);
            filter: blur(0.15em);
            border-radius: 50%;
            position: absolute;
            bottom: -17px;
            left: 20px;
            z-index: -1;
            background-blend-mode: multiply;
        }

        .stage-spot.active {
            background-color: rgba(255, 255, 255, 0.7);
            filter: blur(0.03em);
        }

        .green-button {
            background: #23bc82;
            border: 0.2em #159657 outset;
            border-radius: 0.3em;
            text-align: center;
            font-size: 1.05em;
            font-family: "DM Sans", sans-serif;
            font-weight: 500;
            letter-spacing: 0.01em;
            height: fit-content;
        }

        .green-button:hover {
            background: #159657;
            border: 0.2em #23bc82 inset;
            cursor: pointer;
        }

        .purple-button {
            background: #7f77ef;
            border: 0.2em #5a52c9 outset;
            border-radius: 0.3em;
            color: #f4edff;
            text-align: center;
            font-size: 1.05em;
            font-family: "DM Sans", sans-serif;
            font-weight: 500;
            letter-spacing: 0.01em;
            height: fit-content;
        }

        .purple-button:hover {
            background: #5a52c9;
            border: 0.2em #7f77ef inset;
            cursor: pointer;
        }

        .green-button:disabled,
        .red-button:disabled,
        .purple-button:disabled {
            opacity: 0.6;
            pointer-events: none;
            cursor: not-allowed;
        }

        .red-button {
            background: #dd4045;
            border: 0.2em #840303 outset;
            color: #ffd3df;
            border-radius: 0.3em;
            text-align: center;
            font-size: 1.05em;
            font-family: "DM Sans", sans-serif;
            font-weight: 500;
            letter-spacing: 0.01em;
            height: fit-content;
        }

        .red-button:hover {
            background: #840303;
            border: 0.2em #dd4045 inset;
            cursor: pointer;
        }

        .button-outline {
            box-shadow: 3px 3px 0 white, -3px -3px 0 white, -3px 3px 0 white,
                3px -3px 0 white;
        }

        /* ------------------------------------------- */

        /* ------------------------------------------------ */
        .world-map {
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 2.5em;
            width: 100vw;
            height: 100vh;
            margin: auto;
            z-index: 11;
            position: absolute;
            text-align: center;
        }

        .world-map.fadeIn {
            animation: fadeIn 1s forward;
        }

        .world-map-image {
            position: relative;
            margin: auto;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .world-map-small {
            background-image: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/World-Map-No-Text.png');
            background-size: cover;
            background-position: center;
        }

        .flying-islands-map {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            background-blend-mode: multiply;
            background-attachment: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            margin: auto;
            z-index: 12;
            position: absolute;
        }

        .flying-islands-map-blur {
            backdrop-filter: blur(0.15em);
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            margin: auto;
            position: fixed;
        }

        .flying-islands-btns-container {
            scrollbar-color: transparent transparent;
            scrollbar-width: thin;
            mask-image: linear-gradient(0deg, rgba(255, 255, 255, 0) 0%, rgba(0, 0, 0, 0.8) 10%, rgba(0, 0, 0, 1) 90%, rgba(255, 255, 255, 0) 100%);
            z-index: 1;
        }

        .back-to-sea-btn,
        .to-flying-btn {
            position: absolute;
            width: fit-content;
            z-index: 3;
        }

        #to-flying-btn {
            top: 0;
            right: 0;
            background: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Weather/Sunny.png');
            color: #fff;
            cursor: pointer;
            border: none;
            width: 256px;
            height: 128px;
        }

        .to-flying-btn .label,
        .back-to-sea-btn .label {
            font-size: 0.8em;
            text-align: center;
            width: 150px;
            position: absolute;
            top: 15px;
            right: 10px;
            font-family: "Mochiy Pop One";
            filter: drop-shadow(1px 1px 0 var(--dropshadow-color)) drop-shadow(-1px -1px 0 var(--dropshadow-color)) drop-shadow(-1px 1px 0 var(--dropshadow-color)) drop-shadow(1px -1px 0 var(--dropshadow-color));
            text-shadow: 0.07em 0.07em 0 var(--textshadow-color),
                -0.07em -0.07em 0 var(--textshadow-color),
                0.07em -0.07em 0 var(--textshadow-color), -0.07em 0.07em 0 var(--textshadow-color),
                0.05em 0.05em 0 var(--textshadow-color), -0.05em -0.05em 0 var(--textshadow-color),
                0.05em -0.05em 0 var(--textshadow-color), -0.05em 0.05em 0 var(--textshadow-color),
                0.06em 0.06em 0 var(--textshadow-color), -0.06em -0.06em 0 var(--textshadow-color),
                0.06em -0.06em 0 var(--textshadow-color), -0.06em 0.06em 0 var(--textshadow-color);
        }

        .to-flying-btn .label:hover,
        .back-to-sea-btn .label:hover {
            animation: hoverIslandBtn 0.3s;
            animation-fill-mode: forwards;
        }

        .to-flying-btn .arrow,
        .back-to-sea-btn .arrow {
            font-family: 'FontAwesome';
            rotate: 50deg;
        }

        #back-to-sea-btn {
            top: 0;
            right: 0;
            background: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Weather/Turbulence.png');
            color: #fff;
            cursor: pointer;
            border: none;
            width: 256px;
            height: 128px;
        }

        .go-to-island {
            background: transparent;
            position: absolute;
            border: none;
            font-size: 1vw;
            letter-spacing: 0.15em;
            text-align: center;
            color: white;
            font-family: "Mochiy Pop One";
            filter: drop-shadow(1px 1px 0 var(--dropshadow-color)) drop-shadow(-1px -1px 0 var(--dropshadow-color)) drop-shadow(-1px 1px 0 var(--dropshadow-color)) drop-shadow(1px -1px 0 var(--dropshadow-color));
            text-shadow: 0.07em 0.07em 0 var(--textshadow-color),
                -0.07em -0.07em 0 var(--textshadow-color),
                0.07em -0.07em 0 var(--textshadow-color), -0.07em 0.07em 0 var(--textshadow-color),
                0.05em 0.05em 0 var(--textshadow-color), -0.05em -0.05em 0 var(--textshadow-color),
                0.05em -0.05em 0 var(--textshadow-color), -0.05em 0.05em 0 var(--textshadow-color),
                0.06em 0.06em 0 var(--textshadow-color), -0.06em -0.06em 0 var(--textshadow-color),
                0.06em -0.06em 0 var(--textshadow-color), -0.06em 0.06em 0 var(--textshadow-color);
        }

        .go-to-island:hover {
            animation: hoverIslandBtn 0.3s;
            animation-fill-mode: forwards;
        }

        @keyframes hoverIslandBtn {
            100% {
                filter: drop-shadow(1px 1px 0 rgb(135, 111, 242)) drop-shadow(-1px -1px 0 rgb(135, 111, 242)) drop-shadow(-1px 1px 0 rgb(135, 111, 242)) drop-shadow(1px -1px 0 rgb(135, 111, 242));
                text-shadow: 0.07em 0.07em 0 rgb(135, 111, 242, 0.5),
                    -0.07em -0.07em 0 rgb(135, 111, 242, 0.5),
                    0.07em -0.07em 0 rgb(135, 111, 242, 0.5), -0.07em 0.07em 0 rgb(135, 111, 242, 0.5),
                    0.05em 0.05em 0 rgb(135, 111, 242, 0.5), -0.05em -0.05em 0 rgb(135, 111, 242, 0.5),
                    0.05em -0.05em 0 rgb(135, 111, 242, 0.5), -0.05em 0.05em 0 rgb(135, 111, 242, 0.5),
                    0.06em 0.06em 0 rgb(135, 111, 242, 0.5), -0.06em -0.06em 0 rgb(135, 111, 242, 0.5),
                    0.06em -0.06em 0 rgb(135, 111, 242, 0.5), -0.06em 0.06em 0 rgb(135, 111, 242, 0.5);
                letter-spacing: 0.2em;
            }
        }

        .go-to-island[data-island="Kala Island"] {
            width: 9.5%;
            height: 20%;
            bottom: 15%;
            left: 2.3%;
            border-radius: 50% 50% 40% 45%;
        }

        .go-to-island[data-island="Pele Island"] {
            width: 6%;
            height: 11%;
            bottom: 3%;
            left: 3.5%;
            border-radius: 30% 60% 30% 40%;
        }

        .go-to-island[data-island="Kumu Island"] {
            width: 8%;
            height: 20%;
            bottom: 39%;
            left: 3.2%;
            border-radius: 40% 60% 40% 50%;
        }

        .go-to-island[data-island="Slumbering Mountains"] {
            width: 11%;
            height: 14%;
            bottom: 2.5%;
            left: 19.5%;
            border-radius: 35% 60% 30% 20%;
        }

        .go-to-island[data-island="Ash Islands"] {
            width: 8%;
            height: 12%;
            bottom: 29%;
            left: 14%;
            border-radius: 50% 20% 30% 15%;
        }

        .go-to-island[data-island="Fairy Ring Isle"] {
            width: 8.5%;
            height: 10%;
            bottom: -1.5%;
            left: 34.8%;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="Isle of Steam"] {
            width: 8%;
            height: 15.5%;
            bottom: 20.5%;
            left: 29.5%;
            border-radius: 30% 20% 40% 30%;
        }

        .go-to-island[data-island="Draconian Peaks"] {
            width: 11%;
            height: 21%;
            bottom: 15%;
            left: 42.2%;
            border-radius: 20% 50% 20% 20%;
        }

        .go-to-island[data-island="Serene Island"] {
            width: 11%;
            height: 8%;
            bottom: 38.7%;
            left: 32.3%;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="The Decayed Isles"] {
            padding: 0;
            width: 8%;
            height: 13.5%;
            bottom: -2%;
            left: 45%;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 40% 40% 30% 30%;
        }

        .go-to-island[data-island="Sea of Beginning"] {
            width: 10%;
            height: 12%;
            bottom: 9%;
            left: 10%;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="Spiral Archipelago"] {
            width: 18%;
            height: 23%;
            top: 28%;
            left: 23.5%;
            border-radius: 50%;
        }

        .go-to-island[data-island="Skull Island"] {
            width: 6%;
            height: 11%;
            top: 46%;
            left: 18%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="Desert Region"] {
            width: 17%;
            height: 6%;
            top: 15.5%;
            left: 8.5%;
            border-radius: 60% 40%;
        }

        .go-to-island[data-island="Lanier Islands"] {
            width: 5%;
            height: 14.5%;
            top: 22.5%;
            left: 3%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 40%;
        }

        .go-to-island[data-island="Disadattato Island"] {
            width: 7%;
            height: 12%;
            top: 4.5%;
            left: 2.5%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="Islands of the Colossus"] {
            width: 6%;
            height: 20%;
            top: 25%;
            left: 12.5%;
            font-size: 0.9vw;
            border-radius: 50%;
        }

        .go-to-island[data-island="Parella Island"] {
            width: 4.5%;
            height: 11%;
            top: 12.5%;
            left: 36%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 50% 60% 30% 30%;
        }

        .go-to-island[data-island="The Hissing Isle"] {
            width: 5%;
            height: 10.5%;
            top: 2.5%;
            left: 21%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
            border-radius: 50% 50% 30% 30%;
        }

        .go-to-island[data-island="Autumnal Heights"] {
            width: 13.5%;
            height: 11%;
            top: 2%;
            left: 29.5%;
            border-radius: 60% 30% 30% 30%;
        }

        .go-to-island[data-island="Sweetful Isle"] {
            width: 7%;
            height: 8%;
            bottom: 34%;
            right: 18%;
            border-radius: 50% 40% 30% 30%;
            padding: 0;
            display: flex;
            align-items: end;
            font-size: 0.9vw;
        }

        .go-to-island[data-island="The Ancient Tundra"] {
            width: 7.5%;
            height: 12%;
            bottom: 3%;
            right: 14.5%;
            border-radius: 50% 40% 30% 30%;
        }

        .go-to-island[data-island="Frozen Isle"] {
            padding: 0;
            width: 8%;
            height: 14%;
            bottom: 4%;
            right: 36.5%;
            display: flex;
            align-items: end;
            font-size: 0.8em;
            border-radius: 40% 70% 50% 40%;
        }

        .go-to-island[data-island="Snow Continent"] {
            width: 38%;
            height: 13%;
            bottom: 21%;
            right: 5.5%;
            rotate: 2deg;
            border-radius: 15% 30% 50% 50%;
        }

        .go-to-island[data-island="Snow Continent"] .island-button {
            rotate: -2deg;
        }

        .go-to-island[data-island="Frozen Wasteland"] {
            padding: 0;
            width: 7.5%;
            height: 13%;
            bottom: 5.5%;
            right: 26%;
            display: flex;
            align-items: end;
            font-size: 0.8em;
            border-radius: 30% 40% 40% 50%;
        }

        .go-to-island[data-island="Othrys"] {
            width: 6%;
            height: 11%;
            bottom: 8.5%;
            right: 4%;
            border-radius: 15% 35% 30% 30%;
        }

        .go-to-island[data-island="Grass Continent"] {
            width: 20%;
            height: 27%;
            top: 35.5%;
            right: 1.5%;
            border-radius: 20% 20% 50% 50%;
        }

        .go-to-island[data-island="Air Continent"] {
            width: 18%;
            height: 29%;
            top: 4%;
            right: 2%;
            border-radius: 30% 20% 40% 40%;
        }

        .go-to-island[data-island="Mist Continent"] {
            width: 16%;
            height: 34%;
            top: 4%;
            right: 36%;
            border-radius: 30% 20% 20% 40%;
        }

        .go-to-island[data-island="Water Continent"] {
            width: 16%;
            height: 20%;
            top: 15%;
            right: 20%;
            border-radius: 40% 60% 40% 50%;
        }

        .go-to-island[data-island="Sand Continent"] {
            width: 9%;
            height: 15%;
            bottom: 39.5%;
            left: 47.8%;
            border-radius: 40% 50% 20% 20%;
        }

        .go-to-island[data-island="Sea of Wonders"] {
            width: 8%;
            height: 11%;
            bottom: 36%;
            left: 56.5%;
            border-radius: 100%;
            font-size: 0.9vw;
        }

        .map-overview-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            animation-fill-mode: forwards;
            z-index: 12;
        }

        .map-info-blur {
            background: rgba(0, 0, 0, 0.4);
            width: 100%;
            height: 100%;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            backdrop-filter: blur(0.4em);
        }

        .map-zoomed-in {
            background: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Backgrounds/World-Map-No-Text.png'), #499AD2;
            background-repeat: no-repeat;
            background-size: 400%;
            background-position: center;
            aspect-ratio: 1/1;
            margin: auto 2em;
            border: 1em white solid;
            position: relative;
            border-radius: 30%;
            max-width: 400px;
            max-height: 400px;
            min-width: 200px;
            min-height: 200px;
        }

        .map-zoomed-in[data-island="Kala Island"],
        .map-zoomed-in[data-island="Pele Island"],
        .map-zoomed-in[data-island="Kumu Island"],
        .map-zoomed-in[data-island="Slumbering Mountains"],
        .map-zoomed-in[data-island="Ash Islands"],
        .map-zoomed-in[data-island="Fairy Ring Isle"],
        .map-zoomed-in[data-island="Isle of Steam"],
        .map-zoomed-in[data-island="Draconian Peaks"],
        .map-zoomed-in[data-island="Serene Island"],
        .map-zoomed-in[data-island="The Decayed Isles"],
        .map-zoomed-in[data-island="Frozen Isle"],
        .map-zoomed-in[data-island="Sea of Beginning"],
        .map-zoomed-in[data-island="Spiral Archipelago"],
        .map-zoomed-in[data-island="Skull Island"],
        .map-zoomed-in[data-island="Desert Region"],
        .map-zoomed-in[data-island="Lanier Islands"],
        .map-zoomed-in[data-island="Disadattato Island"],
        .map-zoomed-in[data-island="Islands of the Colossus"],
        .map-zoomed-in[data-island="Parella Island"],
        .map-zoomed-in[data-island="The Hissing Isle"],
        .map-zoomed-in[data-island="Autumnal Heights"],
        .map-zoomed-in[data-island="The Ancient Tundra"],
        .map-zoomed-in[data-island="Sweetful Isle"],
        .map-zoomed-in[data-island="Snow Continent"],
        .map-zoomed-in[data-island="Frozen Wasteland"],
        .map-zoomed-in[data-island="Othrys"],
        .map-zoomed-in[data-island="Grass Continent"],
        .map-zoomed-in[data-island="Air Continent"],
        .map-zoomed-in[data-island="Mist Continent"],
        .map-zoomed-in[data-island="Water Continent"],
        .map-zoomed-in[data-island="Sand Continent"],
        .map-zoomed-in[data-island="Sea of Wonders"] {
            animation: moveMap 1.5s;
            animation-delay: 1s;
            animation-fill-mode: forwards;
            transition: ease-in-out;
        }

        @keyframes moveMap {
            100% {
                background-position: var(--background-position);
                background-size: var(--background-size);
            }
        }

        .map-zoomed-in[data-island="Kala Island"] {
            --background-size: 600%;
            --background-position: -2% 84.5%;
        }

        .map-zoomed-in[data-island="Pele Island"] {
            --background-size: 700%;
            --background-position: -1% 104.5%;
        }

        .map-zoomed-in[data-island="Kumu Island"] {
            --background-size: 600%;
            --background-position: -1.5% 51.5%;
        }

        .map-zoomed-in[data-island="Slumbering Mountains"] {
            --background-size: 650%;
            --background-position: 19.5% 104%;
        }

        .map-zoomed-in[data-island="Ash Islands"] {
            --background-size: 710%;
            --background-position: 12.9% 70%;
        }

        .map-zoomed-in[data-island="Fairy Ring Isle"] {
            --background-size: 800%;
            --background-position: 37% 105.5%;
        }

        .map-zoomed-in[data-island="Isle of Steam"] {
            --background-size: 620%;
            --background-position: 30% 80%;
        }

        .map-zoomed-in[data-island="Draconian Peaks"] {
            --background-size: 550%;
            --background-position: 47% 85%;
        }

        .map-zoomed-in[data-island="Serene Island"] {
            --background-size: 750%;
            --background-position: 35.5% 59.5%;
        }

        .map-zoomed-in[data-island="The Decayed Isles"] {
            --background-size: 800%;
            --background-position: 48.5% 105%;
        }

        .map-zoomed-in[data-island="Frozen Isle"] {
            --background-size: 750%;
            --background-position: 60.5% 99%;
        }

        .map-zoomed-in[data-island="Sea of Beginning"] {
            --background-size: 500%;
            --background-position: 6% 102%;
        }

        .map-zoomed-in[data-island="Spiral Archipelago"] {
            --background-size: 400%;
            --background-position: 26.5% 32.5%;
        }

        .map-zoomed-in[data-island="Skull Island"] {
            --background-size: 710%;
            --background-position: 16% 50%;
        }

        .map-zoomed-in[data-island="Desert Region"] {
            --background-size: 570%;
            --background-position: 10% 6%;
        }

        .map-zoomed-in[data-island="Lanier Islands"] {
            --background-size: 700%;
            --background-position: -2% 21%;
        }

        .map-zoomed-in[data-island="Disadattato Island"] {
            --background-size: 700%;
            --background-position: -1% -4%;
        }

        .map-zoomed-in[data-island="Islands of the Colossus"] {
            --background-size: 640%;
            --background-position: 9% 29%;
        }

        .map-zoomed-in[data-island="Parella Island"] {
            --background-size: 700%;
            --background-position: 36.5% 6.5%;
        }

        .map-zoomed-in[data-island="The Hissing Isle"] {
            --background-size: 800%;
            --background-position: 20% -4%;
        }

        .map-zoomed-in[data-island="Autumnal Heights"] {
            --background-size: 600%;
            --background-position: 34% -3%;
        }

        .map-zoomed-in[data-island="The Ancient Tundra"] {
            --background-size: 700%;
            --background-position: 87% 105%;
        }

        .map-zoomed-in[data-island="Sweetful Isle"] {
            --background-size: 750%;
            --background-position: 82.5% 66%;
        }

        .map-zoomed-in[data-island="Snow Continent"] {
            --background-size: 255%;
            --background-position: 92% 110%;
        }

        .map-zoomed-in[data-island="Frozen Wasteland"] {
            --background-size: 650%;
            --background-position: 74% 100%;
        }

        .map-zoomed-in[data-island="Othrys"] {
            --background-size: 650%;
            --background-position: 100.5% 99.5%;
        }

        .map-zoomed-in[data-island="Grass Continent"] {
            --background-size: 455%;
            --background-position: 98.5% 48%;
        }

        .map-zoomed-in[data-island="Air Continent"] {
            --background-size: 455%;
            --background-position: 96.5% 0%;
        }

        .map-zoomed-in[data-island="Mist Continent"] {
            --background-size: 405%;
            --background-position: 58% 0%;
        }

        .map-zoomed-in[data-island="Water Continent"] {
            --background-size: 580%;
            --background-position: 77.5% 14.5%;
        }

        .map-zoomed-in[data-island="Sand Continent"] {
            --background-size: 550%;
            --background-position: 56% 51%;
        }

        .map-zoomed-in[data-island="Sea of Wonders"] {
            --background-size: 520%;
            --background-position: 63% 56%;
        }

        .map-information {
            max-height: 90%;
            background: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Containers/wood.png');
            background-size: cover;
            background-repeat: no-repeat;
            clip-path: polygon(0 1%, 70% 1.5%, 100% 0, 99% 65%, 100% 100%, 39% 99%, 36% 98%, 34% 100%, 0 100%, 1% 34%, 2% 33.5%, 0.5% 31.5%);
            border: 7px #2b1003 solid;
            color: #422108;
            overflow-y: auto;
            overflow-x: hidden;
            scrollbar-width: thin;
            position: relative;
            opacity: 0;
        }

        .map-information:before {
            content: '';
            background: #a0876b;
            border-radius: 100%;
            width: 16px;
            height: 16px;
            position: absolute;
            left: 10px;
            top: 10px;
            filter: drop-shadow(2px 2px 1px #6d553b);
        }

        .map-information:after {
            content: '';
            background: #a0876b;
            border-radius: 100%;
            width: 16px;
            height: 16px;
            position: absolute;
            right: 14px;
            top: 11px;
            filter: drop-shadow(2px 2px 1px #6d553b);
        }

        .flying-island-btn {
            position: relative;
            background: transparent;
            border: none;
            object-fit: contain;
            margin: 1em auto;
            filter: drop-shadow(0 0 0.2em black) drop-shadow(0 0 0.3em black) drop-shadow(0 0 0.5em rgba(0, 0, 0, 0.5));
        }

        .flying-island-btn:hover {
            animation: animateButton 0.4s forwards;
        }

        .flying-island-label {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            width: fit-content;
            height: fit-content;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            letter-spacing: 0.01em;
            color: white;
            font-size: 1.15em;
            filter: drop-shadow(1px 1px 0 var(--dropshadow-color)) drop-shadow(-1px -1px 0 var(--dropshadow-color)) drop-shadow(-1px 1px 0 var(--dropshadow-color)) drop-shadow(1px -1px 0 var(--dropshadow-color));
            text-shadow: 0.07em 0.07em 0 var(--textshadow-color),
                -0.07em -0.07em 0 var(--textshadow-color),
                0.07em -0.07em 0 var(--textshadow-color), -0.07em 0.07em 0 var(--textshadow-color),
                0.05em 0.05em 0 var(--textshadow-color), -0.05em -0.05em 0 var(--textshadow-color),
                0.05em -0.05em 0 var(--textshadow-color), -0.05em 0.05em 0 var(--textshadow-color),
                0.06em 0.06em 0 var(--textshadow-color), -0.06em -0.06em 0 var(--textshadow-color),
                0.06em -0.06em 0 var(--textshadow-color), -0.06em 0.06em 0 var(--textshadow-color);
        }


        /*#dungeon-description-box,
        #island-description-box {
            padding: 2rem 3.5rem;
        }*/

        .read-more.collapse:not(.show) {
            height: 137px !important;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            /* number of lines to show */
            line-clamp: 4;
            -webkit-box-orient: vertical;
            mask-image: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 1) 20%);
        }

        .read-more.collapse.show {
            mask-image: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 1) 5%);
        }

        .read-more.collapsing {
            min-height: 137px !important;
            transition-duration: .75s;
            transition-timing-function: ease-in-out;
            mask-image: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 1) 20%);
        }

        #dungeon-description-btn,
        #island-description-btn {
            text-decoration: dashed;
            font-size: 1.1em;
            cursor: pointer;
        }


        #dungeon-banner-btns {
            margin-bottom: 3em;
        }

        .dungeon-banner {
            position: relative;
            width: fit-content;
            filter: drop-shadow(0 0 0 white);
            margin: 1em 2em;
        }

        .dungeon-label-banner {
            height: fit-content;
            width: fit-content;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            letter-spacing: 0.01em;
            font-size: 1.15em;
            z-index: 5;
            color: #491a07;
        }

        .dungeon-select-banner {
            width: fit-content;
            padding: 0 0.5em;
            height: 36px;
            position: relative;
            background: #ffedd3;
            filter: drop-shadow(0 0 0.25em #491a07);
            z-index: 4;
            border: none;
        }

        .dungeon-banner:hover {
            animation: animateDungeonBtn 0.4s;
            cursor: pointer;
            filter: drop-shadow(0 0 0.5em #491a07);
        }

        @keyframes animateDungeonBtn {
            0% {
                transform: translate(0);
                filter: drop-shadow(0 0 0 #491a07);
            }

            33% {
                transform: translate(0, -0.2em);
            }

            66% {
                transform: translate(0, 0.2em);
            }

            100% {
                transform: translate(0);
                filter: drop-shadow(0 0 0.5em #491a07);
            }
        }

        .dungeon-select-banner:after {
            content: "";
            position: absolute;
            right: -10px;
            bottom: 0;
            width: 0;
            height: 0;
            border-left: 10px solid #ffedd3;
            border-top: 18px solid transparent;
            border-bottom: 18px solid transparent;
        }

        .dungeon-select-banner:before {
            content: "";
            position: absolute;
            left: -10px;
            bottom: 0;
            width: 0;
            height: 0;
            border-right: 10px solid #ffedd3;
            border-top: 18px solid transparent;
            border-bottom: 18px solid transparent;
        }

        .dungeon-banner-tail-left {
            position: absolute;
            left: -14px;
            top: 0px;
            rotate: 6deg;
            background-color: #ffedd3;
            color: white;
            text-align: center;
            height: 32px;
            width: 30px;
            clip-path: polygon(100% 0%, 50px 50%, 100% 100%, 0% 100%, 10px 50%, 0% 0%);
            z-index: 3;
        }

        .dungeon-banner-tail-right {
            position: absolute;
            right: -14px;
            top: 0px;
            rotate: -186deg;
            background-color: #ffedd3;
            color: white;
            text-align: center;
            height: 32px;
            width: 30px;
            clip-path: polygon(100% 0%, 50px 50%, 100% 100%, 0% 100%, 10px 50%, 0% 0%);
            z-index: 3;
        }

        .dungeon-banner .heroic,
        .dungeon-banner .legendary {
            font-size: 2.1em;
            position: absolute;
            top: -28px;
            right: -22px;
            z-index: 2;
            padding: 8px 0 0 0;
        }

        .dungeon-banner .heroic {
            color: #d68726 !important;
        }

        .dungeon-banner .legendary {
            color: #209958 !important;
        }

        .dungeon-banner .heroic:before,
        .dungeon-banner .legendary:before {
            font-family: "FontAwesome";
            color: white;
            font-size: 0.36em;
            letter-spacing: 0.1em;
            left: 6px;
            top: 17px;
            position: absolute;
        }

        .dungeon-banner .heroic:after,
        .dungeon-banner .legendary:after {
            font-family: "FontAwesome";
            content: "\2b";
            color: white;
            font-size: 0.25em;
            right: 3px;
            top: 21px;
            position: absolute;
        }

        .dungeon-banner .heroic:before {
            content: "\38 \30";
        }

        .dungeon-banner .legendary:before {
            content: "\39 \30";
        }

        .dungeon-recruit-container {
            margin: 0.25em;
        }

        .dungeon-recruit-container img {
            max-width: 68px;
            max-height: 56px;
        }

        .dungeon-recruit-container .recruit-label {
            margin: 0.5em auto;
            font-size: 1em;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
        }

        .dungeon-select {
            position: absolute;
            left: 5px;
            top: 5px;
            z-index: 15;
        }

        .to-dungeon {
            color: #23bc82;
            font-size: 1.5em;
            background: none;
            border: none;
            text-shadow: 2px 2px 0 #dbfff4, -2px -2px 0 #dbfff4, 0px 2px 0 #dbfff4, 2px 0px 0 #dbfff4, -2px 2px 0 #dbfff4, 2px -2px 0 #dbfff4, 0px -2px 0 #dbfff4, -2px 0px 0 #dbfff4;
            transition: all 0.3s;
            margin-left: 0.5em;
        }

        .to-dungeon:hover {
            color: #159657;
            scale: 1.2;
        }

        .to-dungeon:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /*********************************/

        .clouds-transition {
            z-index: 50;
            width: 210vw;
            height: 180vh;
            left: -200%;
            top: -25%;
            position: fixed;
            background: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/clouds.png');
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }

        .clouds-transition.to-sky {
            animation: cloudsToSky 4s forwards;
        }

        @keyframes cloudsToSky {
            0% {
                left: -200%;
            }

            100% {
                left: 200%;
            }
        }

        .water-transition {
            --mask:
                radial-gradient(60px at 50% 82px, #000 99%, #0000 101%) calc(50% - 60px) 0/120px 100%,
                radial-gradient(60px at 50% -52px, #0000 99%, #000 101%) 50% 30px/120px 100% repeat-x;
            -webkit-mask: var(--mask);
            mask: var(--mask);
            z-index: 50;
            width: 100vw;
            height: 0vh;
            position: fixed;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(0deg, rgba(11, 51, 79, 1) 19%, rgba(17, 67, 103, 1) 48%, rgba(26, 103, 159, 1) 100%);
            overflow-y: hidden;
            overflow-x: hidden;
        }

        .water-transition.to-map {
            animation: waterToMap 1s ease-in-out forwards;
        }

        .water-transition.fade-out {
            height: 110vh;
            animation: fadeOut 1s forwards;
        }

        @keyframes waterToMap {
            100% {
                height: 110vh;
            }
        }

        .water-transition .waves {
            --mask:
                radial-gradient(112.68px at 50% calc(100% + 93px), #0000 calc(99% - 4px), #000 calc(101% - 4px) 99%, #0000 101%) calc(50% - 120px) calc(50% - 32px + .5px)/240px 64px,
                radial-gradient(112.68px at 50% -93px, #0000 calc(99% - 4px), #000 calc(101% - 4px) 99%, #0000 101%) 50% calc(50% + 32px)/240px 64px;
            -webkit-mask: var(--mask);
            mask: var(--mask);
            background: rgb(255, 255, 255, 0.3);
            left: 0;
            top: 0;
            right: 0;
            width: 100vw;
            height: 100%;
        }

        /* ---------------------------------------------------- */

        .card.medium,
        .card.extension {
            background: rgb(183, 222, 247, 0.5);
            border: none;
            box-shadow: 0.25em 0.25em 0.3em rgb(0, 0, 0, 0.5);
            margin: 1em 0;
            border-radius: 0.5em;
            border: 3px white solid;
            color: #2d2b60;
        }

        .form-control {
            font-size: 1em;
            padding: 0.2em 0.5em;
            background-color: #B2E2F8;
            border: 1px solid #4999D1;
            box-shadow: 0.2em 0.2em 0 #4999D1;
            border-radius: 0.25rem;
            color: #000;
            text-align: center;
            font-family: "DM Sans", sans-serif;
            margin: 0.25em 0 0.25em 0;
            color: #073763;
            font-weight: 600;
        }

        .form-check-input[type="checkbox"] {
            width: 2.5em;
            height: 1.5em;
            margin-left: -2.25em;
            box-shadow: 2px 2px 0.5em rgb(0, 0, 0, 0.4);
        }

        .form-check-input.extension-check[type="checkbox"],
        .form-check-input.mission-check[type="checkbox"] {
            width: 1.4em;
            height: 1.4em;
            box-shadow: 2px 2px 0.5em rgb(0, 0, 0, 0.4);
        }

        .form-check-input.radio {
            width: 1.2em;
            height: 1.2em;
            filter: drop-shadow(0 0 0.2em black);
        }

        .medium-label,
        .background-label,
        .writing-label {
            font-family: "DM Sans", sans-serif;
            font-size: 1.1em;
            color: #2d2b60;
        }

        .medium-label.on,
        .background-label.on,
        .writing-label.on {
            font-weight: 700;
        }

        .medium-title {
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 0;
            margin-top: 0.5em;
            color: #2d2b60;
        }

        .artwork-settings {
            background: rgb(183, 222, 247, 0.5);
            border: none;
            box-shadow: 0.25em 0.25em 0.3em rgb(0, 0, 0, 0.5);
            margin: 1em 0;
            border-radius: 0.5em;
            border: 3px white solid;
        }

        .poke-calculation,
        .candy-calculation {
            font-size: 1.2em;
            height: fit-content;
            border-radius: 0.5em;
            border: 0.2em #073763 outset;
            background: #115a9b;
            color: white;
            font-family: 'Roboto Mono', monospace;
        }

        .poke-icon img,
        .candy-icon img {
            width: 2em;
            vertical-align: center;
        }

        .modal-content {
            background: #848080 url('https://www.photos-public-domain.com/wp-content/uploads/2012/05/ivory-off-white-paper-texture.jpg');
            background-blend-mode: overlay;
            background-repeat: no-repeat;
            background-size: cover;
            color: #2d2b60;
            box-shadow: 0.4em 0.4em 0.4em rgb(0, 0, 0, 0.15), -0.4em -0.4em 0.4em rgb(0, 0, 0, 0.15), -0.4em 0.4em 0.4em rgb(0, 0, 0, 0.15), 0.4em -0.4em 0.4em rgb(0, 0, 0, 0.15), 0.4em 0 0.4em rgb(0, 0, 0, 0.15), 0 -0.4em 0.4em rgb(0, 0, 0, 0.15), -0.4em 0 0.4em rgb(0, 0, 0, 0.15);
            position: relative;
            padding: 3em 1.5em;
        }

        .modal-inner-border {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            border: 3px #9e9a9a solid;
            border-radius: 0.5em;
            mix-blend-mode: multiply;
            width: 98%;
            height: 98.8%;
            pointer-events: none;
        }

        .modal-title {
            text-align: center;
            letter-spacing: 0.15em;
            color: white;
            font-family: "Mochiy Pop One";
            filter: drop-shadow(1px 1px 0 rgb(77, 74, 189)) drop-shadow(-1px -1px 0 rgb(77, 74, 189)) drop-shadow(-1px 1px 0 rgb(77, 74, 189)) drop-shadow(1px -1px 0 rgb(77, 74, 189));
            text-shadow: 0.07em 0.07em 0 rgb(77, 74, 189, 0.5),
                -0.07em -0.07em 0 rgb(77, 74, 189, 0.5),
                0.07em -0.07em 0 rgb(77, 74, 189, 0.5), -0.07em 0.07em 0 rgb(77, 74, 189, 0.5),
                0.05em 0.05em 0 rgb(77, 74, 189, 0.5), -0.05em -0.05em 0 rgb(77, 74, 189, 0.5),
                0.05em -0.05em 0 rgb(77, 74, 189, 0.5), -0.05em 0.05em 0 rgb(77, 74, 189, 0.5),
                0.06em 0.06em 0 rgb(77, 74, 189, 0.5), -0.06em -0.06em 0 rgb(77, 74, 189, 0.5),
                0.06em -0.06em 0 rgb(77, 74, 189, 0.5), -0.06em 0.06em 0 rgb(77, 74, 189, 0.5);
        }

        .confirm-items {
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
            font-size: 0.9em;
        }

        .confirm-items img {
            width: 50px;
        }

        /*  --------------------------------- */

        .results-container {
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            z-index: 30;
            position: absolute;
        }

        .results-container.fade-in {
            animation: fadeIn 0.7s forwards;
        }

        .results.team-card {
            background-image: url('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Containers/box.png');
            background-repeat: no-repeat;
            background-size: 100% 100%;
            height: fit-content;
            padding: 1.3em;
            font-weight: 600;
            text-shadow: 0 0 0.3em rgb(255, 255, 255, 0.6);
            color: #442507;
            position: relative;
        }

        .results.label {
            font-weight: 700;
        }

        .results.label.item {
            color: #892e1e;
        }

        .results.label.earned {
            color: #4538aa;
        }

        .results.recruit.icon {
            margin: 0.5em auto;
        }

        .results.earnings {
            font-family: "DM Sans", sans-serif;
            font-weight: 800;
            letter-spacing: 0.015em;
            font-size: 1.1em;
        }

        .results.earnings.container {
            font-family: "DM Sans", sans-serif;
            font-weight: 600;
            letter-spacing: 0.01em;
            font-size: 1.5em;
            background: rgb(0, 0, 0, 0.65);
            color: white;
            border-radius: 0.3em;
            text-shadow: none;
        }

        .select-result {
            background-color: #ead1b2;
            border: 1px solid #442507;
            box-shadow: 0.2em 0.2em 0 #442507;
            margin-right: 0.3em;
            margin-left: 0.2em;
            width: fit-content;
        }

        /* -------------------- */
        .end-container {
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            z-index: 30;
            position: absolute;
        }

        .roll-token {
            border: none;
            background: none;
        }

        .animate-token:hover img {
            animation: rotateDice 0.8s;
            animation-fill-mode: forwards;
        }

        @keyframes rotateDice {
            0% {
                rotate: 0deg;
                scale: 1;
            }

            50% {
                scale: 1.3;
            }

            100% {
                rotate: 360deg;
                scale: 1;
            }
        }

        .item-confirm {
            border: none;
            background: none;
            color: #2d2b60;
            font-weight: 700;
            position: relative;
        }

        .item-confirm .used-item:before {
            font-family: "FontAwesome";
            content: "\f00c";
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            margin: 0 auto;
            width: fit-content;
            height: fit-content;
            font-size: 2em;
            color: #5ed664;
            pointer-events: none;
            filter: drop-shadow(2px 2px 0 white) drop-shadow(-2px -2px 0 white) drop-shadow(-2px 2px 0 white) drop-shadow(2px -2px 0 white);
        }

        .item-confirm:disabled {
            filter: grayscale(1);
            cursor: not-allowed;
        }

        .credits-link {
            background: none;
            border: none;
            color: white;
            font-weight: 600;
            position: fixed;
            z-index: 50;
            font-family: "DM Sans", sans-serif;
            opacity: 0.6;
            transition: all 0.3s;
            font-size: 0.9em;
            font-variant: small-caps;
            letter-spacing: 1px;
            right: 5px;
            bottom: 2px;
        }

        .credits-link:hover,
        .help-link:hover {
            opacity: 1;
            transition: 0.2s linear;
        }

        .help-link {
            background: none;
            border: none;
            color: white;
            font-weight: 600;
            position: fixed;
            z-index: 50;
            font-family: "DM Sans", sans-serif;
            opacity: 0.6;
            transition: all 0.3s;
            font-size: 0.9em;
            font-variant: small-caps;
            letter-spacing: 1px;
            left: 5px;
            top: 2px;
        }
    </style>

</head>

<body>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js'></script>
    <script type="module">
        import PokeDex from 'https://cdn.jsdelivr.net/npm/pokemon@3.0.0/+esm';

        // Initializes Bootstrap 5.3 tooltips
        const tooltipTriggerList = $('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

        let PokeSpriteDex = async function () {
            let data = await fetch('https://cdn.jsdelivr.net/gh/msikma/pokesprite@master/data/pokemon.json');
            return data.json();
        }

        /* -------------------------------------------------- */
        /* VARIABLE STORAGE --------------------------------- */
        /* -------------------------------------------------- */
        let DEBUGGING; // can be manually changed
        const HOLIDAY_HILLS = true;

        let GraderSettings;
        const month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        let UsersList = [];
        let TeamsByUser = {};
        let CharacterLevelsArr = [];
        let ItemsByTeam = {};
        let ParadoxList = [];
        let IsFlyingIsland = false;

        let FullIslandsList = {};
        let DungeonsList = [];
        let CurrentIsland = "";
        let CurrentDungeon = "";
        let HolidayHillsInfo = {};

        let DungeonsWithTokens = [];
        let TokensByCategory = { Random: [] }
        let MissionsByDungeon = {};
        let TotalPokeEarnings = 500;
        let TotalCandyEarnings = 0;
        let SubmissionInfo = [];
        


        /* -------------------------------------------------- */
        /* UTILITY FUNCTIONS -------------------------------- */
        /* -------------------------------------------------- */
        function RandomNumber(max) {
            return Math.floor(Math.random() * max);
        }

        function Wait(ms) {
            return new Promise((resolve) => setTimeout(resolve, ms));
        }

        function IsValidUrl(string) {
            const isDiscordUrl = /discord\.com\/channels|(cdn|media)\.discordapp\./gm.test(string);
            const isOfficialChannel = new RegExp(`${GraderSettings.ServerId.Official}|${GraderSettings.ServerId.Grading}`, 'gm').test(string);

            // if the URL is a Discord URL and it isn't in one of the official channels, return false
            if (!string || (isDiscordUrl && !isOfficialChannel)) {
                if ($("#invalid-file-alert").children().length < 1) CreateInvalidLinkAlert();
                return false;
            }

            try {
                new URL(string);
                // close the alert if it is currently active
                if ($("#invalid-file-alert").children().length > 0) bootstrap.Alert.getOrCreateInstance('#link-alert').close();
                return true;
            } catch (err) {
                // if link is not valid, return false
                return false;
            }
        }

        function IsValidMedium() {
            if ($("#medium-toggle").attr('data-medium') === 'writing' && $("#word-count").val() < 1) return false;
            if ($("#medium-toggle").attr('data-medium') === 'art' && $("#characters-count").val() < 1) return false;
            return true;
        }

        function IsValidDate(start, end, ext) {
            const month = CurrentDate().getMonth();
            const day = CurrentDate().getDate();

            if ((month <= start.getMonth() && day >= start.getDate()) || (month <= ext.getMonth() && day <= ext.getDate()))
                return true;
            else return false;
        }

        function IsHolidayHills() {
            if (!HOLIDAY_HILLS) return false;
            let currentMonth = CurrentDate().getMonth();
            let currentDay = CurrentDate().getDate();

            let hhMonths = ["January", "April", "July", "October"];
            if (hhMonths.includes(month[currentMonth]) || ValidateExtensions() || DEBUGGING) return true;
            else return false;
        }

        function LockGrader() {
            $(".loading").removeClass("access").addClass("locked");
            if (HOLIDAY_HILLS) {
                $("#loading-text").html("You're a little early!").removeClass('access');
                $("#unavailable-text").html("Holiday Hills is not available at this time.");
            } else {
                $("#loading-text").html("Pardon our dust!").removeClass('access');
                $("#unavailable-text").html("The graders are currently down for maintenance.");
            }
            $("#unavailable-text").removeClass("d-none");
        }

        function CurrentDate() {
            let dt = new Date(); // initialize a new date
            dt.setTime(dt.getTime() + dt.getTimezoneOffset() * 60 * 1000); // set the timezone to EST
            let offset = -300; // timezone offset for EST in minutes
            return new Date(dt.getTime() + offset * 60 * 1000);
        }

        function SetBackground(bg) {
            return $("html").css('background-image', `url("${bg}")`);
        }

        function RandomizeBackground() {
            let index = RandomNumber(56) + 1;
            if (index < 10) {
                return `https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg00${index}.png`;
            } else {
                return `https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg0${index}.png`;
            }
        }

        function SetSeasonBackground() {
            const d = new Date();
            var month = d.getMonth() + 1;

            if (month == 12 || month <= 2) {
                SetBackground('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg009.png');
            } else if (month <= 5) {
                SetBackground('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg054.png');
            } else if (month <= 8) {
                SetBackground('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg051.png');
            } else {
                SetBackground('https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/Bg039.png');
            }
        }


        /* -------------------------------------------------- */
        /* INFO GETTERS ------------------------------------- */
        /* -------------------------------------------------- */

        function GetBaseSubmitInfo() {
            let teamArr = [];
            $('.select-team').each(function () {
                if ($(this).val() !== 'none') teamArr.push($(this).val());
            });
            teamArr = [...new Set(teamArr)];

            teamArr.forEach((team) => {
                let newObj = {Team: team, Users: [], Characters: [], Items: [], Poke: 0, Recruit: ""};
                if (HOLIDAY_HILLS) newObj.Candy = 0;
                SubmissionInfo.push(newObj);
            });

            for (let i = 1; i < 5; i++) {
                let user = $(`#select-user-${i}`).find(":selected").val();
                let team = $(`#select-team-${i}`).find(":selected").val();
                let character = $(`#select-char-${i}`).find(":selected").val();

                let submitObj = SubmissionInfo.filter((t) => t.Team === team);
                if (submitObj.length < 1) continue;
                if (!submitObj[0].Users.includes(user)) submitObj[0].Users.push(user);
                if (!submitObj[0].Characters.includes(character)) submitObj[0].Characters.push(character);
            }
        }

        function GetTeamsArray() {
            let teamArr = [];
            $('.select-team').each(function () {
                if ($(this).val() !== 'none') teamArr.push($(this).val());
            });
            return [...new Set(teamArr)];
        }

        function GetTeamIndex(team) {
            return SubmissionInfo.indexOf(SubmissionInfo.filter((t) => t.Team === team)[0]);
        }


        /* -------------------------------------------------- */
        /* DATA LOADING ------------------------------------- */
        /* -------------------------------------------------- */
        
        let ImportDataFromSheet = async (sheetPage, sheetId) => {

            if (!sheetId) return console.error('Missing sheetID.');
            if (!sheetPage) return console.error('Missing sheetPage.');

            // Fetch the sheet
            const importUrl = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&headers=1&tq=WHERE A IS NOT NULL&sheet=${sheetPage}`;

            // Attempt to get it
            const sheetJSON = await fetch(importUrl).then(i => i.text()).catch(err => {
                return console.error(`${err} sheet. Please make sure that the sheet is public and that you're only using the ID.`);
            });

            // Parse the text
            const sliceJSON = JSON.parse(sheetJSON.substring(47).slice(0, -2));

            // Grab column headers
            const col = [];
            if (sliceJSON.table.cols[0].label) {
                for (let headers of sliceJSON.table.cols) {
                    if (headers.label) col.push(headers.label);
                };
            }

            // Scrubs columns and puts them in a readable object
            const scrubbedData = [];
            for (let info of sliceJSON.table.rows) {
                const row = {};
                const isBoolean = val => 'boolean' === typeof val;
                col.forEach((ele, ind) => {
                    row[ele] = info.c[ind] != null ?
                        info.c[ind].f != null && !isBoolean(info.c[ind].v) ?
                            info.c[ind].f : info.c[ind].v != null ?
                                info.c[ind].v : "" : "";
                });
                scrubbedData.push(row);
            };

            // Filter out everything that says hide
            let publicData = scrubbedData.filter(i => !i['hide']);
            // Return Data
            return publicData;

        };

        // Gets the link to the correct form based on whether it's debugging or not
        let GetGraderSettings = async function () {
            $("#loading-text").html("Loading Settings . . .");

            let formData = await ImportDataFromSheet("GRADER SETTINGS", '1BRDoe88xibJw72NnoXQ0xzVWroRCNNu8Eolxb-dQTv8');
            DEBUGGING = DEBUGGING ? DEBUGGING : formData[0]['Use Local'];

            return GraderSettings = {
                FormUrl: DEBUGGING ? formData[0].Private : formData[0].Public,
                ServerId: { Official: formData[0]['Official Server ID'], Grading: formData[0]['Grading Server ID'] },
                LockGraders: DEBUGGING ? false : formData[0]['Lock Graders'],
                LockHH: DEBUGGING ? false : formData[0]['Lock HH Graders']
            }
        }

        // Gets all the possible results for token recruits
        let GetTokenData = async function () {
            $("#loading-text").html("Loading Tokens . . .");

            let tokenData = await ImportDataFromSheet('Random', '1zX7glFRiZLAkalklYNEx3dYAIDIbdIT68VKrYQKRrE8')
            let AddToCategory = function (key, pokemon) {
                if (!TokensByCategory[key].includes(pokemon))
                    TokensByCategory[key].push(pokemon);
                else return;
            }

            tokenData.forEach(pokemon => {
                let species = pokemon.Species;
                let types = pokemon["Type"].split('/');
                types.forEach(type => {
                    if (!TokensByCategory[type]) TokensByCategory[type] = [species];
                    else return AddToCategory(type, species);
                });

                let genId = `Gen. ${pokemon.Gen}`;
                if (!TokensByCategory[genId]) TokensByCategory[genId] = [pokemon.Species];
                else AddToCategory(genId, species);

                return AddToCategory("Random", species);
            });
            return TokensByCategory;
        }

        // Loads the characters and adds them to a team's array
        let GetCharacterData = async function () {
            try {
                $("#loading-text").html("Loading Members & Teams . . .");

                /*let a_to_d = await ImportDataFromSheet('EXPORT', '17bsqvqhCcU2qYYfq7xrNJdFOZ9_72DUXzh-nXTCeXPk');
                console.log(`   ✔ Loaded ${a_to_d.length} characters for users A-D.`);

                let e = await ImportDataFromSheet('EXPORT', '10fE80r0AVgYlA06UcQgQGUb5WI6USoErmNjd9LK1l7E');
                console.log(`   ✔ Loaded ${e.length} characters for users E.`);

                let f_to_j = await ImportDataFromSheet('EXPORT', '1vhuY7gKjsw69v2Nuk9K-KkfECID7w6wkGq58pGUeJy0');
                console.log(`   ✔ Loaded ${f_to_j.length} characters for users F-I.`);

                let k = await ImportDataFromSheet('EXPORT', '1SmrKiVFzBExcjR983kdyim4LIkYZSF7sBHBjItnJGSY');
                console.log(`   ✔ Loaded ${k.length} characters for users K.`);

                let l_to_m = await ImportDataFromSheet('EXPORT', '1Xwny0dOXwSJlJ2eXQhWaWJYgwoF5D2gAX6nB5ZQdPX8');
                console.log(`   ✔ Loaded ${l_to_m.length} characters for users L-M.`);

                let n_to_q = await ImportDataFromSheet('EXPORT', '1wB0rzvgG7BXqqoLjTODXmC2X2O0hWEiL8800tC_U2ac');
                console.log(`   ✔ Loaded ${n_to_q.length} characters for users N-Q.`);

                let r_to_s = await ImportDataFromSheet('EXPORT', '1OSQdTSvcfEmRT1ymlfeR8qJxQ8J1JzZpXDiJ9-y4How');
                console.log(`   ✔ Loaded ${r_to_s.length} characters for users R-S.`);

                let t_to_w = await ImportDataFromSheet('EXPORT', '1sa6Hz8Ev71nDnlwKNNC5hq_o-DtWdoFvXcqJ2Sidy6s');
                console.log(`   ✔ Loaded ${t_to_w.length} characters for users T-W.`);

                let x_to_z = await ImportDataFromSheet('EXPORT', '1MX2I12kgfQsN-PTztsHyS6cxJHfFIC-j9oqVwDzWlQ0');
                console.log(`   ✔ Loaded ${x_to_z.length} characters for users X-Z.`);

                let data = [...a_to_d, ...e, ...f_to_j, ...k, ...l_to_m, ...n_to_q, ...r_to_s, ...t_to_w, ...x_to_z];*/

                let data = await ImportDataFromSheet('EXPORT', '1RFnds0Afl55MNOe8yvSm8wVVA7L2MVKwD8a-lIthZws');
                console.log(`   ✔ Loaded ${data.length} characters.`);

                data.forEach(processed => {
                    let users = Object.keys(TeamsByUser);
                    let characterObj = { Name: processed.Name, Species: processed.Species, Level: processed.Level };

                    let username = processed.User;
                    if (username.includes(" / ")) {
                        let usernames = username.split(" / ");
                        usernames.forEach(user => {
                            if (!users.includes(user)) {
                                TeamsByUser[user] = {};
                            }

                            if (!Object.keys(TeamsByUser[user]).includes(processed.Team)) {
                                TeamsByUser[user][processed.Team] = [characterObj];
                            }

                            let characters = TeamsByUser[user][processed.Team].map(charObj => charObj.Name);
                            if (!characters.includes(characterObj.Name)) {
                                TeamsByUser[user][processed.Team].push(characterObj);
                            }
                        });
                    } else {
                        if (!users.includes(processed.User)) {
                            TeamsByUser[processed.User] = {};
                        }

                        if (!Object.keys(TeamsByUser[processed.User]).includes(processed.Team)) {
                            TeamsByUser[processed.User][processed.Team] = [characterObj];
                        }

                        let characters = TeamsByUser[processed.User][processed.Team].map(charObj => charObj.Name);
                        if (!characters.includes(characterObj.Name)) {
                            TeamsByUser[processed.User][processed.Team].push(characterObj);
                        }
                    }
                });

                UsersList = Object.keys(TeamsByUser);
                UsersList.sort((a, b) => a.toLowerCase() < b.toLowerCase() ? -1 : 1);
                return TeamsByUser;
            } catch (error) {
                console.log(error);
            }
        }

        // Gets all the monthly item charges for users
        let GetMonthlyData = async function () {
            $("#loading-text").html("Loading Inventories . . .");

            const itemList = ['Golden Mask', 'Lost Loot', 'Wonder Chest', 'Tera Orb', 'Wishing Star'];

            let data = await ImportDataFromSheet('EXPORT', '1E-nP9siZFLuqHT2et6gQqSwSioUr1x_rcicbOpQYGkI');

            data.forEach(item => {
                let teamItems = Object.values(item).filter((i) => i === false);

                if (!item || !teamItems || teamItems.length < 1) return;
                let team = item["Team"].replace("Team ", "");
                ItemsByTeam[team] = [];

                itemList.forEach((itemName) => {
                    if (item[itemName] === false) return ItemsByTeam[team].push(itemName);
                    else return;
                });
            });

            return ItemsByTeam;
        }

        // Gets all the dungeon and islands data
        let GetDungeonsData = async function () {
            $("#loading-text").html("Loading Dungeons . . .");

            let importIslands = async function () {
                let settings = await ImportDataFromSheet('Islands', '1BRDoe88xibJw72NnoXQ0xzVWroRCNNu8Eolxb-dQTv8');
                return settings;
            }

            let importDungeons = async function () {
                let settings = await ImportDataFromSheet('Dungeons', '1BRDoe88xibJw72NnoXQ0xzVWroRCNNu8Eolxb-dQTv8');

                let islandsImport = await importIslands();
                islandsImport.forEach(island => {
                    let dungeonsList = {};
                    let filteredDungeons = settings.filter((i) => i.Island === island.Island);

                    filteredDungeons.forEach((dungeon) => {
                        DungeonsList.push(dungeon.Dungeon)
                        if (dungeon["Recruits"].includes(" Token")) DungeonsWithTokens.push(dungeon.Dungeon);
                        dungeon.Recruits = dungeon['Recruits'].split(', ');

                        return dungeonsList[dungeon.Dungeon] = {
                            Difficulty: dungeon.Difficulty ? dungeon.Difficulty : '',
                            Description: dungeon.Description,
                            Recruits: dungeon.Recruits

                        };
                    });

                    return FullIslandsList[island.Island] = {
                        Description: island.Description,
                        Dungeons: dungeonsList
                    }
                })
            }

            let getDungeons = await importDungeons();
            DungeonsList = DungeonsList.filter((e, i, self) => i === self.indexOf(e));
            DungeonsList.sort((a, b) => a.toLowerCase() < b.toLowerCase() ? -1 : 1);

            return {
                islands: FullIslandsList,
                dungeons: DungeonsList
            }
        }

        let GetHolidayHillDungeonData = async function() {
            let dungeonData = await ImportDataFromSheet('[HH] Dungeon', '1BRDoe88xibJw72NnoXQ0xzVWroRCNNu8Eolxb-dQTv8');

            // get the current date and dates for HH
            let start = new Date(dungeonData[0]['Start Date']);
            let end = new Date(dungeonData[0]['End Date']);
            let ext = new Date(dungeonData[0]['Extension Date']);

            if (IsValidDate(start, end, ext) || DEBUGGING) {
                HolidayHillsInfo = {
                    Dungeon: dungeonData[0].Dungeon,
                    Recruits: dungeonData[0].Recruits.split(', '),
                    Bonus: dungeonData[0]['Bonus Candy']
                }

                CurrentDungeon = dungeonData[0].Dungeon;
                $(`#confirm-dungeon-name`).html(CurrentDungeon);
            }

            return { IsValid: IsValidDate(start, end, ext), Date: `${month[start.getMonth()]} ${end.getFullYear()}` };
        }

        let GetMissionsData = async function () {
            $("#loading-text").html("Loading Missions . . .");
            let missionsData = await ImportDataFromSheet('Missions', '1BRDoe88xibJw72NnoXQ0xzVWroRCNNu8Eolxb-dQTv8');
            let missionsArr = missionsData.filter((mission) => mission['Dungeons'] !== undefined);
            console.log(missionsData)

            // get the current date and dates for the missions
            let start = new Date(missionsArr[0]['Start Date']);
            let end = new Date(missionsArr[0]['End Date']);
            let ext = new Date(missionsArr[0]['Extension Date']);

            if (IsValidDate(start, end, ext)) {
                missionsArr.forEach((mission) => {
                    let branch;
                    if (mission.Branch === "Bounty Hunters") branch = "BH";
                    else branch = mission['Branch'].charAt(0);

                    let missionDungeons = mission.Dungeons.split(", ");
                    missionDungeons.forEach((dungeon) => {
                        if (!MissionsByDungeon[dungeon]) MissionsByDungeon[dungeon] = [];

                        let missionObj = {
                            Name: `${mission.Branch} 0${mission['Mission ID']} | ${mission.Title}`,
                            Label: `${branch}0${mission['Mission ID']} | ${mission.Title}`,
                            NeedsKey: mission['Requires Key'],
                            Dungeon: dungeon
                        }

                        if (Object.keys(mission).includes('Rewards') && mission.Rewards !== '') missionObj['Rewards'] = mission.Rewards;

                        return MissionsByDungeon[dungeon].push(missionObj);
                    });
                });
            }
            return { IsValid: IsValidDate(start, end, ext), Date: `${month[start.getMonth()]} ${end.getFullYear()}` };
        }

        // Loads all the data required to start the grader
        let LoadDataFromSheets = async function () {
            try {
                let loadGraderData = await GetGraderSettings();
                console.log(DEBUGGING ? `🐛 Grader is set to Debug Mode. Submissions made will go to the Debug Form.` :
                    `📢 Grader is set to Public Mode. Submissions made at this time will go to the Official Server Form.`
                );

                if (DEBUGGING) {
                    $(`#debug-header`).removeClass('d-none');
                } else {
                    $(`#debug-header`).remove();
                }

                console.log(`✅ LOADED: All grader settings for validation.`);

                if (HOLIDAY_HILLS) {
                    if (!IsHolidayHills() || GraderSettings.LockHH) {
                        LockGrader();
                        return console.log(`🔒 This grader is set to be used for Holiday Hills but Holiday Hills are not active right now! Access to the grader has been limited.`);
                    }

                    $(`#grader-title`).html('Holiday Hills Dungeon Grader');
                    GetHolidayHillsElements();
                    console.log(`🎊 This grader is set to be used for Holiday Hills! All Holiday Hills sections will be shown and any submissions made will go to the Holiday Hills threads.`);
                }

                if (GraderSettings.LockGraders) {
                    LockGrader();
                    return console.log(`🔒 This grader is set to be locked for maintenance! Access to the grader has been limited.`);
                }

                let loadCharacterData = await GetCharacterData();
                console.log(`✅ LOADED: Character data for ${Object.keys(loadCharacterData).length} users.`);

                if (HOLIDAY_HILLS) {
                    let loadHHData = await GetHolidayHillDungeonData();
                    if (loadHHData.IsValid) console.log(`✅ LOADED: Holiday Hills data for ${loadHHData.Date}.`);
                    else console.log(`⚠ Found Holiday Hills data for ${loadHHData.Date}, but they should not be active at this time.`);
                } else {
                    let loadMonthlyData = await GetMonthlyData();
                    console.log(`✅ LOADED: Monthly items data for ${Object.keys(loadMonthlyData).length} teams.`);

                    let loadDungeonsData = await GetDungeonsData();
                    SetDungeonsToDropdown();
                    console.log(`✅ LOADED: Dungeons data for ${Object.keys(loadDungeonsData.islands).length - 1} islands and ${Object.keys(loadDungeonsData.dungeons).length} dungeons.`);

                    let loadTokenData = await GetTokenData();
                    console.log(`✅ LOADED: Recruit Tokens data for ${Object.keys(loadTokenData).length} total Token categories.`);

                    let loadMissionsData = await GetMissionsData();
                    if (loadMissionsData.IsValid) console.log(`✅ LOADED: Missions data for ${loadMissionsData.Date}.`);
                    else console.log(`⚠ Found Missions data for ${loadMissionsData.Date}, but they should not be active at this time.`);

                    GetParadoxList();
                }

                ValidateExtensions();

                return true;
            } catch (err) {
                return $("#loading-text").html("Loading failed!");
            }
        }

        let GetHolidayHillsElements = function () {
            $(`[data-holidayhills=false]`).each(function () {
                if (HOLIDAY_HILLS) $(this).addClass('d-none');
            });

            $(`[data-holidayhills=true]`).each(function () {
                if (HOLIDAY_HILLS) $(this).removeClass('d-none');
                else $(this).addClass('d-none');
            });
        }

        /* -------------------------------------------------- */
        /* INITIALIZATION------------------------------------ */
        /* -------------------------------------------------- */
        let InitLanding = async function () {
            let dataLoaded = await LoadDataFromSheets();

            if (!dataLoaded) return console.log(`❌ Failed to setup landing page.`);

            $("#loading-text").html("Setting Up . . .");
            for (let i = 1; i < 5; i++) {
                CreateUsernamesSelect(i);
                $(`#select-user-${i}`).on("change", function () {
                    ValidateMapButton();
                });
            }
            ValidateMapButton();

            // Hide the loading screen
            $("#loading-screen").addClass("hide");
            $("#main-container").removeClass("d-none");
            await Wait(1100);
            $("#loading-screen").remove();

            return console.log(`🌟 READY: All data successfully loaded!`);
        }

        $(window).on("load", function () {
            if (HOLIDAY_HILLS) SetSeasonBackground();
            else SetBackground(RandomizeBackground());

            RegisterInputFunctions();
            InitLanding();
        });
        function RegisterInputFunctions() {
            for (let i = 1; i < 5; i++) {
                $(`#clear-info-btn-${i}`).on("click", function() {
                    ClearInfoFromBox(i);
                });

                if (i < 2) continue;
                $(`#copy-info-btn-${i}`).on("click", function() {
                    CopyFromPreviousTeam(i);
                });
            }

            // Gets all the items, user info, and transitions to the map on click (front screen)
            $("#go-to-map-btn").on("click", function () {
                CreateItemsConfirmation();
                GetBaseSubmitInfo();
                TransitionWaterToMap();
            });

            // Sets the toggling text for "Read More" island/dungeon buttons
            ['dungeon', 'island'].forEach(id => {
                $(`#${id}-description-btn`).on('click', function () {
                    if ($(this).html().includes('See Less'))
                        $(this).html('<i class="fa-solid fa-caret-down me-1 fa-lg"></i> Read More');
                    else
                        $(this).html('<i class="fa-solid fa-caret-up me-1 fa-lg"></i> See Less');
                });
            });

            // Allows these buttons to set the island details
            ['go-to-island', 'flying-island-btn'].forEach(id => {
                $(`.${id}`).on("click", function () {
                    SetIslandDetails($(this).attr('data-island'));
                });
            });

            ['to-flying-btn', 'back-to-sea-btn'].forEach(id => {
                $(`#${id}`).on("click", function () {
                    AnimateToFlyingIslands(id.includes('flying'));
                });
            });

            // Back to map
            $("#back-to-map-btn").on("click", function () {
                ToggleIslandDetails(false);
            });

            // Pulls up all dungeon information on click
            $("#enter-dungeon-btn").on("click", function () {
                EnterDungeon();
            });

            // Check if a mission should be displayed
            $("#mission-check").on("change", function () {
                if ($(this).prop('checked')) {
                    $("#mission-check-text").removeClass("d-none");
                    $("#mission-check-confirm").removeClass("d-none");
                    $("#mission-select-container").removeClass("d-none");
                } else {
                    SetDisplayNone([`#mission-check-text`, `#mission-check-confirm`, `#mission-select-container`]);
                }
            });

            // Toggle the medium between writing and art
            $("#medium-toggle").on("change", function () {
                ToggleMedium($(this).is(":checked"));
            });

            // Update labels for medium selection
            ['background', 'writing'].forEach(medium => {
                $(`.${medium}-type`).each(function () {
                    $(this).on("change", function () {
                        $(`.${medium}-label`).each(function () {
                            let label = $(this).attr(`data-${medium}`);
                            let elem = $(`.${medium}-label[data-${medium}="${label}"]`);

                            if (label === $(`[name="${medium}-type"]:checked`).attr(`data-${medium}`))
                                return $(`.${medium}-label[data-${medium}="${label}"]`).addClass("on");
                            else
                                return $(`.${medium}-label[data-${medium}="${label}"]`).removeClass("on");


                        });
                        CalculateTotalEarnings();
                    });
                });
            });

            // Validation for submission + Poke calculations
            ['characters-count', 'word-count', 'submission-link', 'medium-toggle'].forEach(id => {
                if (id.includes("count")) {
                    $(`#${id}`).on("change", function () {
                        CalculateTotalEarnings();
                    });
                }

                if (id.includes("medium")) {
                    $(`#${id}`).on("change", function () {
                        $("#characters-count").val(0);
                        $("#word-count").val(0);
                    });
                }

                return $(`#${id}`).on("change", function () {
                    ValidateFinalSubmit();
                });
            });

            // Gets all the results for the users and visually transitions to the results screen
            $("#go-to-results").on("click", async function () {
                await GoToResults();
                SetDisplayNone(['#map-overview-container', '#flying-islands-map', '#world-map', '#main-container', '#dungeon-select-container']);
                SetBackground("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Screens/results.png");
            });

            // Submits the form from the results screen
            $("#final-submit-btn").on("click", function () {
                ConfirmSubmissions();
            });

            // Go to the end screen after the countdown
            $("#see-end-btn").on("click", function () {
                ShowThanks();
            });
        }

        function SetDungeonsToDropdown() {
            let dropdownIds = ["#dungeon-select", "#dungeon-select-small"];
            dropdownIds.forEach(id => {
                let dropdown = $(id);
                DungeonsList.forEach((dungeon) => {
                    return dropdown.append(`<option value="${dungeon.replaceAll('"', '')}" data-dungeon="${dungeon.replaceAll('"', '')}">${dungeon}</option>`);
                });

                let elemId = `#to-selected-dungeon-${id.includes('small') ? 'small-' : ''}btn`;
                dropdown.on("change", function () {
                    if ($(id).val() === "none") {
                        $(`#to-selected-dungeon-${id.includes('small') ? 'small-' : ''}btn`).prop('disabled', true);
                    } else {
                        $(`#to-selected-dungeon-${id.includes('small') ? 'small-' : ''}btn`).prop('disabled', false);
                    }
                });

                //$(`#to-selected-dungeon-${id.includes('small') ? 'small-' : ''}btn`).prop('disabled', true);
                $(`#to-selected-dungeon-${id.includes('small') ? 'small-' : ''}btn`).on("click", function () {
                    SelectDungeonFromDropdown($(id).val());
                });
            });
        }


        /* -------------------------------------------------- */
        /* ASSET GETTERS ------------------------------------ */
        /* -------------------------------------------------- */
        function GetParadoxList() {
            // #984 is Iron Tusk, the first paradox Pokemon in the dex
            // #996 is Frigibax, comes after Iron Thorns #995
            for (let i = 984; i < 996; i++) {
                ParadoxList.push(PokeDex.getName(i));
            }

            // separated Pokemon to push as there is a gap between the paradox Pokemon in the dex
            ParadoxList.push(PokeDex.getName(1005)); // Roaring Moon
            ParadoxList.push(PokeDex.getName(1006)); // Iron Valiant

            return ParadoxList;
        }

        async function GetParsedPokemon(newPokemon) {
            let paradoxPokemon = ParadoxList.filter((i) => newPokemon.toLowerCase().includes(i.toLowerCase()));
            if (paradoxPokemon.length > 0) return paradoxPokemon[0];

            // list species with "*" as shiny, remove all "!" characters
            let matchedPokemon = newPokemon.replace("!", " ").replace("*", " (Shiny) ");

            let pokemonWithAccents = PokeDex.all().filter(i => i.includes(`é`));
            let pokemonWithGender = PokeDex.all().filter(i => i.includes(`♂`) || i.includes(`♀`));

            if (pokemonWithGender.map((gendered) => gendered.replaceAll(/♂|♀/g, ``)).includes(newPokemon)) {
                if (RandomNumber(2) > 0) matchedPokemon += "♂";
                else matchedPokemon += "♀";
            } else if (pokemonWithAccents.map((accents) => accents.replaceAll(`é`, `e`)).includes(newPokemon)) {
                matchedPokemon = pokemonWithAccents.filter(i => i.replaceAll(`é`, `e`) === newPokemon)[0].replaceAll(`e`, `é`);
            }

            let splitPokemon = matchedPokemon.split(` `);
            for (let i = 0; i < splitPokemon.length; i++) {
                try {
                    let id = PokeDex.getId(splitPokemon[i]);
                    return splitPokemon[i];
                } catch (err) {
                    continue;
                }
            }
        }

        function IsPokemonShiny(newPokemon) {
            if (/[Ss]hiny|\*/gi.test(newPokemon))
                return true;
            else return false;
        }

        function GetPokemonVariant(newPokemon) {
            if (/[Gg]alar|[Gg]alarian|[Gg]\!|[Gg]\./i.test(newPokemon)) {
                return { slug: "-galar", variant: "-galarian" };
            } else if (/[Aa]lola|[Aa]lolan|[Aa]\!|[Aa]\./i.test(newPokemon)) {
                return { slug: "-alola", variant: "-alolan" };;
            } else if (/[Hh]isui|[Hh]isuian|[Hh]\!|[Hh]\./i.test(newPokemon)) {
                return { slug: "-hisui", variant: "-hisuian" };;
            } else if (/[Pp]aldea|[Pp]aldean|[Pp]\!|[Pp]\./i.test(newPokemon)) {
                return { slug: "-paldea", variant: "-paldean" };;
            } else if (/[Mm]ega|[Mm]\!|[Mm]\./i.test(newPokemon)) {
                return { slug: "-mega", variant: "-mega" };;
            } else {
                return { slug: "", variant: "" };
            }
        }

        async function GetDungeonIcon(newPokemon) {
            // if the species is a token, return an icon URL
            if (newPokemon.includes("Token")) {
                return "https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/Random.png";
            }

            // if the species is a Potion or Juice, return an icon URL
            if (newPokemon.includes("Potion") || newPokemon.includes("Juice")) {
                return "https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/" + newPokemon.replaceAll(" ", "-") + ".png";
            }

            // if the species is a Basculin
            if (/Basculin.*Hisui/i.test(newPokemon))
                return "https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/basculin-white-striped.png";

            // if the species is a Burmy
            if (/Burmy.*Trash/i.test(newPokemon))
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/burmy-trash.png`;
            if (/Burmy.*Sand/i.test(newPokemon))
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/burmy-sandy.png`;

            // if the species is an Oricorio
            if (/Oricorio.*Pa\'u/i.test(newPokemon))
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/oricorio-pau.png`;
            if (/Oricorio.*Sensu/i.test(newPokemon))
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/oricorio-sensu.png`;
            if (/Oricorio.*Pom\-Pom/i.test(newPokemon))
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/oricorio-pom-pom.png`;

            if (/[Mm]ime [Jj]r\./i.test(newPokemon)) {
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/mime-jr.png`;
            }

            let parsedSpecies = await GetParsedPokemon(newPokemon);
            let formSlug = GetPokemonVariant(newPokemon).slug;
            let variantString = GetPokemonVariant(newPokemon).variant;
            let form = GetPokemonVariant(newPokemon).slug === '' ? '' : `$${formSlug.substring(1, formSlug.length)}`;

            // if the species is from the Gen 9/Paldean dex and onwards, use a sprite separate from the PokeSprite repo
            if (PokeDex.getId(parsedSpecies) >= 906 || formSlug.includes('paldea')) {
                return `https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Gen9/${parsedSpecies.toLowerCase()
                    .replaceAll(/\.\s|\s/g, "-").replaceAll("'", "")}${formSlug !== '' ? formSlug : ''}.png`;
            }

            // add numbers to the lookup ID to search through PokeSprites properly
            let pokeIndex = PokeDex.getId(parsedSpecies).toString();
            if (pokeIndex.length < 3) {
                if (Number(pokeIndex) < 10)
                    pokeIndex = `00${pokeIndex}`;
                else
                    pokeIndex = `0${pokeIndex}`;
            }

            let pokeSpritesList = await PokeSpriteDex();
            let pokeSprite = pokeSpritesList[pokeIndex];

            // if a sprite DOES exist for the species in Gen 8, return icon URL
            if (pokeSprite["gen-8"]["forms"][form] !== undefined && pokeSprite["gen-8"]["forms"][form]["is_prev_gen_icon"] !== undefined) {
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen7x/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/${pokeSprite["slug"]["eng"]}${formSlug}.png`;
            } else {
                // if sprite does not exist in Gen 8, check Gen 7 and return icon URL
                return `https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/${IsPokemonShiny(newPokemon) ? 'shiny' : 'regular'}/${pokeSprite["slug"]["eng"]}${formSlug}.png`;
            }

            parsedSpecies = parsedSpecies.replaceAll(/\. |\s/g, `-`).replaceAll(`'`, ``).toLowerCase();
            // if a sprite does not exist for the species in the PokeSprites repo, return icon URL
            if (pokeSprite["gen-8"]["forms"][form] === undefined)
                return `https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Gen9/${parsedSpecies}${formSlug}.png`;
        }

        function GetPokemonSpriteURL(newPokemon) {
            return PokeDex
                .getName(PokeDex.getId(newPokemon)).toLowerCase()
                .replaceAll(/\. |\s/g, `-`)
                .replaceAll(`é`, `e`)
                .replaceAll(`♂`, `-m`)
                .replaceAll(`♀`, `-f`)
                .replaceAll(`.`, ``);
        }

        async function GetPartySprite(newPokemon) {
            let parsedPokemon = await GetParsedPokemon(newPokemon);
            let variantString = GetPokemonVariant(newPokemon);

            if (/[Mm]ime|[Rr]ime|[Mm]r\.|[Jj]r\./i.test(newPokemon)) {
                newPokemon = newPokemon.replaceAll(/ [Jj]r\./ig, `-Jr`).replaceAll(/[Mm]r\. /ig, `Mr-`);
            }

            if (!parsedPokemon || !PokeDex.all().includes(parsedPokemon)) {
                return 'https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Icons/Other/substitute.png';
            }

            return `https://img.pokemondb.net/sprites/scarlet-violet/icon/avif/${GetPokemonSpriteURL(parsedPokemon)}${variantString.variant !== '' ? variantString.variant : ''}.avif`;
        }

        function RollRecruitToken(token) {

            if (token === "Random Recruit Token") {
                let randIndex = RandomNumber(TokensByCategory["Random"].length);
                return TokensByCategory["Random"][randIndex];
            } else if (token.includes("Gen.")) {
                let gen = `Gen. ${/Gen. (\d+)/i.exec(token)[1]}`;
                let randIndex = RandomNumber(TokensByCategory[gen].length);
                return TokensByCategory[gen][randIndex];
            } else if (token.includes("Type")) {
                let type = /(\w+)\-Type/i.exec(token)[1];
                let index = RandomNumber(TokensByCategory[type].length);
                return TokensByCategory[type][index];
            }
        }

        function GetTokenType(token) {
            let randomTokenType = [
                "Random Recruit Token",
                "Random Gen. Recruit Token",
                "Random Type Recruit Token"
            ];

            let searchRoll = RandomNumber(100) + 1;

            if (searchRoll <= 5) {
                return "Pokémon of Choice Token";
            } else if (searchRoll <= 25) {
                return "Category of Choice Recruit Token";
            } else {
                let randomTokenRoll = RandomNumber(3);

                if (/Gen./i.test(randomTokenType[randomTokenRoll])) {
                    let totalGens = Object.keys(TokensByCategory).filter(gen => /Gen./ig.test(gen)).length;
                    return `Random Gen. ${RandomNumber(totalGens) + 1} Recruit Token`;
                } else if (randomTokenType[randomTokenRoll].includes("Type")) {
                    let allTypes = Object.keys(TokensByCategory).filter(type => !/Random|Gen./ig.test(type));
                    return `Random ${allTypes[RandomNumber(allTypes.length)]}-Type Recruit Token`;
                } else {
                    return "Random Recruit Token";
                }
            }
        }


        /* -------------------------------------------------- */
        /* CREATE HTML ELEMENTS ----------------------------- */
        /* -------------------------------------------------- */

        function HighlightText(text) {
            return '<span class="results label item">' + text + '</span>';
        }

        function CreateDivider() {
            return $('<hr class="opacity-75">');
        }

        function CreateUsernamesSelect(teamindex) {
            const userSelect = $(`#select-user-${teamindex}`);

            for (let i = 0; i < UsersList.length; i++) {
                let userOption = $("<option>").attr("value", UsersList[i]).html(UsersList[i]);
                userSelect.append(userOption);
            }

            userSelect.on("change", function () {
                CreateTeamsForUser($(this).val(), teamindex);
            });
        }

        // creates the dropdown of teams for a user
        function CreateTeamsForUser(user, teamindex, selectedVal = "") {
            const teamSelect = $(`#select-team-${teamindex}`);
            teamSelect.children().not(':first').remove();

            if (user === "none" || !TeamsByUser[user]) {
                return;
            };

            teamSelect.on("change", function () {
                CreateCharactersForTeam($(this).val(), teamindex);
            });

            let teamsForUser = Object.keys(TeamsByUser[user]);
            teamsForUser.sort((a, b) => a.toLowerCase() < b.toLowerCase() ? -1 : 1);
            let optionsArr = [];
            teamsForUser.forEach((team) => {
                let option = $(`<option value="${team}">${team}</option>`);
                if (team === selectedVal) option.prop('selected', true);
                return optionsArr.push(option);
            });

            if (selectedVal === "") optionsArr[0].prop('selected', true);
            teamSelect.append(optionsArr);

            let selectedTeam = $('#select-team-' + teamindex).find(":selected").val();
            CreateCharactersForTeam(selectedTeam, teamindex);
        }

        function GetSelectedCharacters(teamindex) {
            let selectedArr = [];
            for (let i = 1; i < 5; i++) {
                let user = $(`#select-user-${i}`).find(":selected").val();
                let team = $(`#select-team-${i}`).find(":selected").val();
                let character = $(`#select-char-${i}`).find(":selected").val();

                if (user === 'none' || team === 'none' || team !== $(`#select-team-${teamindex}`).find(":selected").val() || character === 'none' || character === null) continue;
                selectedArr.push(character);
            }
            return selectedArr;
        }

        async function ToggleCharacterOptions(teamindex = -1) {
            if (teamindex < 0) {
                for (let i = 1; i < 5; i++) {
                    let selectedArr = await GetSelectedCharacters(i);
                    $(`#select-char-${i}`).children().each(function () {
                        if (selectedArr.includes($(this).val()))
                            $(this).prop('disabled', true);
                        else
                            $(this).prop('disabled', false);
                    });
                }
                return;
            }

            let selectedArr = await GetSelectedCharacters(teamindex);
            $(`#select-char-${teamindex}`).children().each(function () {
                if (selectedArr.includes($(this).val()))
                    $(this).prop('disabled', true);
                else
                    $(this).prop('disabled', false);
            });
        }


        // creates the dropdown of characters for a team
        async function CreateCharactersForTeam(team, teamindex) {
            const user = $(`#select-user-${teamindex}`).val();
            const charSelect = $("#select-char-" + teamindex);
            charSelect.children().not(':first').remove();

            if (user === "none" || $(`#select-team-${teamindex}`).val() === "none") {
                UpdateCharacterDisplay(teamindex);
                return charSelect.val($(`#select-char-${teamindex} option:first`).val());
            };
            let teamCharacters = TeamsByUser[user][team].map((character) => character.Name);

            charSelect.on("change", function () {
                ToggleCharacterOptions();
                return ApplyCharacterSprites($(this).find(":selected").val(), teamindex);
            });

            let selectedArr = await GetSelectedCharacters(teamindex);
            let selectedIndex = -1;
            let optionsArr = [];

            teamCharacters.forEach(function (value, index) {
                let charOption = $("<option>");
                charOption.attr("value", value).html(value);
                if (selectedArr.includes(value)) charOption.prop('disabled', true);

                if (selectedIndex < 0 && !charOption.prop('disabled') && !selectedArr.includes(value)) {
                    selectedIndex = index;
                    charOption.prop('selected', true);
                }

                return optionsArr.push(charOption);
            });

            /*for (let i = 0; i < teamCharacters.length; i++) {
                let charOption = $("<option>");
                charOption.attr("value", teamCharacters[i]).html(teamCharacters[i]);
                if (selectedArr.includes(teamCharacters[i])) charOption.prop('disabled', true);

                if (selectedIndex < 0 && !charOption.prop('disabled') && !selectedArr.includes(teamCharacters[i])) {
                    selectedIndex = i;
                    charOption.prop('selected', true);
                }

                optionsArr.push(charOption);
            }*/
            charSelect.append(optionsArr);

            let selectedChar = $('#select-char-' + teamindex).find(":selected").val();
            ApplyCharacterSprites(selectedChar, teamindex);
            ToggleCharacterOptions(teamindex);
        }

        function CreateInvalidLinkAlert() {
            const alert = $('<div>');
            alert.attr({
                id: 'link-alert',
                class: 'my-3 alert alert-danger fade show',
                role: 'alert'
            })
            alert.html(`<i class='fa-brands fa-discord me-1'></i> Direct links to files and private messages on Discord are not permitted. If linking from Discord, you may only link to messages in <b>PMD Beyond the Sea Official Server</b> or the <b>BTS Grading Server</b>.<br>(i.e. <code>https://cdn.discordapp.com/attachments/...</code><br><code>https://discord.com/channels/@me/...</code>)`);

            const dismissBtn = $('<button>');
            dismissBtn.attr({
                type: 'button',
                class: 'btn-close ms-3',
                'data-bs-dismiss': 'alert'
            })

            alert.append(dismissBtn);
            $("#invalid-file-alert").append(alert);
        }

        function CreateItemsConfirmation() {
            let teams = GetTeamsArray();

            let newContainers = [];
            for (let i = 0; i < teams.length; i++) {
                let teamItems = ItemsByTeam[teams[i]];
                if (!teamItems || teamItems.length < 1) continue;

                let teamItemsContainer = $('<div>').addClass(
                    'confirm-items mx-1 row justify-content-between align-items-center mb-4'
                ).attr('data-team', teams[i]);

                if (i > 0) {
                    teamItemsContainer.append('<hr class="col-10 mx-auto my-4" style="opacity:0.3;">');
                }

                let teamHeader = $('<div>').addClass('col-12 col-md-3 fs-5')
                teamHeader.html(teams[i]);
                let itemsContainer = $('<div>').addClass('col-12 col-md-9 px-0 row d-flex flex-wrap justify-space-between');

                teamItems.forEach((item) => itemsContainer.append(CreateItemButton(teams[i], item)));

                teamItemsContainer.append(teamHeader, itemsContainer);
                newContainers.push(teamItemsContainer);
            }
            $('#confirm-items-container').append(newContainers);
        }

        function CreateItemButton(team, item) {
            let newItemContainer = $('<button>').addClass('item-confirm col-md-4 col-6 px-2 my-3').attr({
                'data-team': team,
                'data-item': item,
                'data-used': false,
                'id': `${team}-${item}`.toLowerCase().replaceAll(' ', '')
            });

            newItemContainer.append(
                `<div class="mb-3">${item.replace(' ', '<br>')}</div>
                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/${item.replaceAll(" ", "-").toLowerCase()}.png">`
            )

            newItemContainer.on('click', function () {
                SetItemUsed($(this).data('team'), $(this).data('item'));
            });

            return newItemContainer;
        }

        function CreateMissionConfirmation(key, team) {
            let confirmContainer = $('<div>').addClass('mission-team w-100 d-flex flex-wrap justify-content-between mb-3').attr({
                'data-team': team,
                'data-rewards': false
            })

            let teamHeader = $('<div>').addClass('fw-bold').html(team);
            let checkContainer = $('<div>').addClass('form-check justify-content-center');
            let inputContainer = $('<input>').addClass('form-check-input mission-check m-0').attr({
                type: 'checkbox',
                checked: false
            })

            inputContainer.on('change', function () {
                $(`.mission-team[data-team="${team}"]`).attr('data-rewards', $(this).is(":checked"));
            });

            checkContainer.append(inputContainer);
            confirmContainer.append(teamHeader, checkContainer);

            if (key.toLowerCase() === 'false') {
                if (!$("#mission-key-text").hasClass('d-none')) $("#mission-key-text").addClass('d-none');
                return $("#mission-check-confirm").append(confirmContainer);
            }

            $('#mission-key-text').removeClass('d-none');
            let keyContainer = $('<button>').addClass('item-confirm key mx-2 p-0').attr({
                'data-item': 'Key',
                'data-team': team,
                'data-used': false
            }).css('width', '35px');

            keyContainer.append('<img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/key.png" width=35px>');

            keyContainer.on('click', function () {
                SetItemUsed($(this).data('team'), $(this).data('item'));
            });

            confirmContainer.append(keyContainer);
            $("#mission-check-confirm").append(confirmContainer);
        }

        async function CreateResultsCard(teamObj, isEndScreen = false) {
            let teamId = teamObj.Team.toLowerCase().replaceAll(/\W|\s/g, '');
            // Create success message
            let charactersText = HighlightText(teamObj.Characters[0]);
            for (let i = 1; i < teamObj["Characters"].length; i++) {
                if (teamObj["Characters"].length < 2) break;
                if (i < teamObj["Characters"].length - 1) {
                    charactersText += `, ${HighlightText(teamObj.Characters[i])}`;
                } else if (i === teamObj["Characters"].length - 1) {
                    charactersText += `${teamObj["Characters"].length > 2 ? ',' : ''} and ${HighlightText(teamObj.Characters[i])}`;
                }
            }

            const resultsContainer = $(`#${isEndScreen ? 'end-' : ''}results-cards-container`);
            await resultsContainer.append(`
            <div class="results team-card justify-content-center align-items-center text-center my-3 mx-auto col-xl-5 col-10">
                <div class="col-11 mx-auto">
                    <button class="expand-results-btn col-12 m-0 p-0" data-bs-toggle="collapse" data-bs-target="#${isEndScreen ? 'end-' : ''}results-content-${teamId}" id="${isEndScreen ? 'end-' : ''}results-btn-${teamId}">
                        <i class="expand-results-icon fa-solid fa-lg ${$(window).innerWidth() <= 992 ? 'fa-envelope' : 'fa-envelope-open-text'}" id="${isEndScreen ? 'end-' : ''}results-icon-${teamId}"></i>
                        <div class="section-header fs-5">${teamObj.Team}</div>
                        <div class="mt-2">${teamObj.Users}</div>
                    </button>
                </div>

                <div class="collapse fade ${$(window).innerWidth() >= 992 ? 'show' : ''}" id="${isEndScreen ? 'end-' : ''}results-content-${teamId}">
                </div>`);

            let contentContainer = $(`#${isEndScreen ? 'end-' : ''}results-content-${teamId}`);
            contentContainer.append(CreateDivider());
            contentContainer.append(CreateResultsCardText(charactersText + ' successfully explored <span class="results label earned">' + CurrentDungeon + '</span>!', 'Official/rank-normal'));
            contentContainer.append(CreateDivider());

            if (/Lost Loot/i.test(teamObj.Items)) {
                contentContainer.append(CreateResultsCardText('Due to your <span class="results label item">Lost Loot</span>, your team gains an additional <span class="results label earned">+5,000 Poké</span>!', 'Official/lost-loot'));
                contentContainer.append(CreateDivider());
            }

            if (/Wonder Chest/i.test(teamObj.Items)) {
                contentContainer.append(CreateResultsCardText('Due to your <span class="results label item">Wonder Chest</span>, your team gains an additional <span class="results label earned">+5 levels</span>!', 'Official/wonder-chest'));
                contentContainer.append(CreateDivider());
            }

            if (/Tera Orb/i.test(teamObj.Items)) {
                contentContainer.append(CreateResultsCardText('Due to your <span class="results label item">Wonder Chest</span>, your team gains an additional <span class="results label earned">+5 levels</span>!', 'Official/tera-orb'));
                contentContainer.append(CreateDivider());
            }

            if (!HOLIDAY_HILLS && /Heroic/i.test(FullIslandsList[CurrentIsland]["Dungeons"][CurrentDungeon]["Difficulty"])) {
                contentContainer.append(CreateResultsCardText('Your team has uncovered a <span class="results label earned">Treasure Box</span> while exploring the dungeon!', 'Official/treasure-box'));
            }

            if (/Golden Mask/i.test(teamObj.Items)) {
                await contentContainer.append(CreateResultsCardText(`Due to your <span class="results label item">Golden Mask</span>, it seems a(n) ${isEndScreen ? `<span class="results label earned">${teamObj.Recruit}</span>` : `<select class="results label earned select-result" data-team="${teamObj.Team}"></select>`} has developed a kinship with your team!`, 'Official/golden-mask'));
            } else if (/Wishing Star/i.test(teamObj.Items)) {
                await contentContainer.append(CreateResultsCardText(`Due to your <span class="results label item">Wishing Star</span>, it seems your team has discovered a(n) ${isEndScreen ? `<span class="results label earned">${teamObj.Recruit}</span>` : `<select class="results label earned select-result" data-team="${teamObj.Team}"></select>`}!`, 'Official/wishing-star'));
            } else if (/Token/i.test(teamObj.Recruit)) {
                teamObj.Recruit = !/Choice/i.test(teamObj.Recruit) && FullIslandsList[CurrentIsland]["Dungeons"][CurrentDungeon]["Difficulty"].includes("Heroic") ? GetTokenType(teamObj.Recruit) : teamObj.Recruit;
                contentContainer.append(CreateResultsCardText(`During the adventure, it seems your team has discovered a(n) <span class="results label earned"${isEndScreen ? '' : ` id="recruit-name-${teamObj.Team.toLowerCase().replaceAll(/\&|\s|\'/g, "")}"`}>${teamObj.Recruit}</span>!${!/Choice/i.test(teamObj.Recruit) && !isEndScreen ? `<span id="roll-token-${teamObj.Team.toLowerCase().replaceAll(/\&|\s|\'/g, "")}"><br><sub>(click the dice to roll it now)</sub></span>` : ''}`, 'Potions %26 Juices/Random'));
            } else if (/Potion|Juice/i.test(teamObj.Recruit)) {
                contentContainer.append(CreateResultsCardText(`During your adventure, it your team has discovered a(n) <span class="results label earned">${teamObj.Recruit}</span>!`, 'Official/potion'));
            } else {
                contentContainer.append(CreateResultsCardText(`During your adventure, it seems a(n) <span class="results label earned">${teamObj.Recruit}</span> has developed a kinship with your team!`, 'Official/recruit'));
            }

            contentContainer.append(await CreateRecruitResult(teamObj, isEndScreen));
            contentContainer.append(CreateDivider());

            if (/Golden Mask|Wishing Star/i.test(teamObj.Items))
                CreateRecruitSelect(teamObj["Team"]);

            contentContainer.append(`
                <div class="row d-flex flex-wrap" id="results-footer-${isEndScreen ? 'end-' : ''}${teamId}">
                    <div class="col-6">
                        <div class="results earnings">Poké Earned</div>
                        <div class="results earnings container">
                            <div class="d-flex no-wrap align-items-center justify-content-center mx-auto">
                                <div class="fs-5">${teamObj.Poke}</div>
                                <div class="ms-1"><img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/poke.png" width=30px></div>
                            </div>
                        </div>
                    </div>
                </div>`);

            $(`#results-footer-${isEndScreen ? 'end-' : ''}${teamId}`).append(HOLIDAY_HILLS ? 
                `<div class="col-6">
                    <div class="results earnings">Candy Earned</div>
                    <div class="results earnings container">
                        <div class="d-flex no-wrap align-items-center justify-content-center mx-auto">
                            <div class="fs-5">${teamObj.Candy}</div>
                            <div class="ms-1"><img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/candy.png" width=30px></div>
                        </div>
                    </div>
                </div>` :
                `<div class="col-6">
                    <div class="results earnings">Levels Gained</div>
                    <div class="results earnings container">
                        <div class="d-flex no-wrap align-items-center justify-content-center mx-auto">
                            <div class="fs-5">${teamObj.Levels}</div>
                            <div class="ms-1"><i class="fa-solid fa-caret-up" style="color:#5ac976;"></i></div>
                        </div>
                    </div>
                </div>`
            );

            $(`#${isEndScreen ? 'end-' : ''}results-btn-${teamId}`).on('click', function () {
                let icon = $(`#${isEndScreen ? 'end-' : ''}results-icon-${teamId}`);

                if (icon.hasClass("fa-envelope")) icon.removeClass("fa-envelope").addClass("fa-envelope-open-text");
                else icon.removeClass("fa-envelope-open-text").addClass("fa-envelope");
            });
        }

        function CreateResultsCardText(text, itemicon, teamname) {
            let textCard = `
                <div class="d-flex no-wrap justify-content-between align-content-center my-3 mx-auto">
                    <div class="me-2">
                        ${text.includes('successfully explored') ? '<i class="fa-solid fa-star"></i>' : '<i class="fa-solid fa-caret-right"></i>'}
                    </div>
                    <div>${text}</div>
                    <div><img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/${itemicon}.png" width=30px></div>
                </div>
            `
            return textCard;
        }

        async function CreateRecruitResult(teamObj, isEndScreen = false) {
            let recruitContainer = $(`<div class="results recruit icon" data-team="${teamObj.Team}">`);

            if (/Golden Mask|Wishing Star/i.test(teamObj.Items)) {
                recruitContainer.append('<img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/Random.png">');
            } else if (teamObj["Recruit"].includes("Token")) {

                if (!teamObj.Rewards) teamObj.Rewards = [];

                if (teamObj["Recruit"].includes("Choice")) {
                    recruitContainer.append('<img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/Random.png">');
                } else {
                    let teamId = teamObj.Team.replaceAll(/\&|\s|\'/g, '').toLowerCase();
                    let recruitImg = $(`<${isEndScreen ? 'div' : 'button'} class="roll-token ${isEndScreen ? '' : 'animate-token'} p-0 m-0"${isEndScreen ? '' : ` id="token-btn-${teamId}`}">`);

                    if (!isEndScreen) {
                        recruitImg.on('click', async function () {
                            let tokenResult = RollRecruitToken(teamObj.Recruit);

                            $(`#recruit-sprite-${teamId}`).attr('src', await GetDungeonIcon(tokenResult));

                            if (teamObj["Rewards"].length > 0) {
                                teamObj.Rewards += `, ${teamObj.Recruit} (rolled; can re-roll)`;
                            } else {
                                teamObj.Rewards = [`${teamObj.Recruit} (rolled; can re-roll)`];
                            }
                            teamObj.Recruit = tokenResult;

                            $(`#recruit-name-${teamId}`).html(tokenResult);
                            $(`#roll-token-${teamId}`).remove();
                            $(this).attr('disabled', '').removeClass('animate-token');
                        });
                    }
                    recruitImg.append(`<img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Original/dice.png" id="recruit-sprite-${teamId}">`);
                    recruitContainer.append(recruitImg);
                }
            } else if (/Potion|Juice/i.test(teamObj.Recruit)) {
                recruitContainer.append(`<img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/${teamObj["Recruit"].replace(' ', '-')}.png" width=120px>`);
            } else {
                recruitContainer.append(`<img src="${await GetDungeonIcon(teamObj.Recruit)}">`);
            }

            return recruitContainer;
        }

        async function CreateRecruitSelect(teamname) {
            let selectContainer = $(`.select-result[data-team="${teamname}"]`);
            await selectContainer.children().remove();

            let recruits = FullIslandsList[CurrentIsland].Dungeons[CurrentDungeon].Recruits;
            recruits.forEach(function (recruit) {
                return selectContainer.append(`<option value="${recruit}">${recruit}</option>`);
            });

            selectContainer.on("change", function () {
                UpdateRecruit($(this).attr('data-team'), $(this).val());
            });

            UpdateRecruit(teamname, recruits[0]);
        }


        /* -------------------------------------------------- */
        /* HTML SETTERS/UPDATERS ---------------------------- */
        /* -------------------------------------------------- */

        function UpdateBSTooltip(id, on, newTitle = "") {
            let tooltip = bootstrap.Tooltip.getInstance(id);
            if (on) tooltip.enable();
            else tooltip.disable();

            if (newTitle !== "") tooltip._config.title = newTitle;
            return tooltip.update();
        }

        function SetDisplayNone(arr) {
            if (!Array.isArray(arr)) {
                if (!$(arr).hasClass("d-none")) return $(arr).addClass("d-none")
            }

            arr.forEach(elem => {
                if (!$(elem).hasClass("d-none")) return $(elem).addClass("d-none");
            });
        }

        function ClearInfoFromBox(teamindex) {
            $(`#select-user-${teamindex}`).val('none');
            $(`#select-team-${teamindex}`).children().not(':first').remove();
            $(`#select-char-${teamindex}`).val('none').children().not(':first').remove();
            UpdateCharacterDisplay(teamindex);
        }

        function CopyFromPreviousTeam(teamindex) {
            let copy = teamindex - 1;
            if (copy < 1) return;
            let user = $(`#select-user-${copy}`).val();
            let team = $(`#select-team-${copy}`).val();
            if (user === 'none') return;

            $(`#select-user-${teamindex}`).val(user);
            if (team !== 'none')
                CreateTeamsForUser(user, teamindex, team);
        }

        function UpdateCharacterDisplay(teamindex,
            updateObj = {
                img: "https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Other/substitute.png",
                name: "--",
                level: "--"
            }) {

            $(`#party-img-${teamindex}`).attr('src', updateObj.img);
            $(`#party-view-img-${teamindex}`).attr('src', updateObj.img);

            $(`#party-name-${teamindex}`).html(updateObj.name);
            $(`#party-view-name-${teamindex}`).html(updateObj.name);
            
            $(`#party-level-${teamindex}`).html(updateObj.level === '--' ? '--' : `Lv. ${updateObj.level}`);
            $(`#party-view-level-${teamindex}`).html(updateObj.level === '--' ? '--' : `Lv. ${updateObj.level}`);
        }

        // set the current character in the specified box
        async function ApplyCharacterSprites(character, teamindex) {
            if (character === "none") return UpdateCharacterDisplay(teamindex);

            let currentUser = await $(`#select-user-${teamindex}`).val();
            let currentTeam = await $(`#select-team-${teamindex}`).val();
            let matchedCharacter =
                await TeamsByUser[currentUser][currentTeam].find(charInfo => charInfo.Name === character);
            let spriteUrl = await GetPartySprite(matchedCharacter.Species);

            UpdateCharacterDisplay(teamindex, {
                img: spriteUrl,
                name: matchedCharacter.Name,
                level: matchedCharacter.Level
            });

            $("#confirm-party-" + teamindex).removeClass("d-none");
        }

        async function SetIslandDetails(islandName) {
            ToggleIslandDetails(true);
            CurrentIsland = islandName;
            $("#map-zoomed-in").attr('data-island', islandName);
            $("#island-name-box").html(islandName);
            await $("#island-description-box").html(FullIslandsList[islandName]["Description"]);

            let textHeight = await $("#island-description-box").height();
            if (textHeight > 117 || FullIslandsList[islandName]["Description"].length > 400) {
                $('#island-description-btn').addClass('collapsed').removeClass('d-none').html('<i class="fa-solid fa-caret-down me-1 fa-lg"></i> Read More');
                $('#island-description-box').addClass('read-more').removeClass('show');
            } else {
                $('#island-description-btn').addClass('d-none').removeClass('collapsed').html('<i class="fa-solid fa-caret-up me-1 fa-lg"></i> See Less');
                $('#island-description-box').removeClass('read-more').addClass('show');
            }

            $("#dungeon-banner-btns").children().remove();

            let dungeons = Object.keys(FullIslandsList[islandName]["Dungeons"]);

            for (let i = 0; i < dungeons.length; i++) {
                CreateDungeonBanner(dungeons[i], FullIslandsList[islandName]["Dungeons"][dungeons[i]]);
            }
        }

        function UpdateItems(team, add, item) {
            let teamIndex = SubmissionInfo.indexOf(SubmissionInfo.filter((t) => t.Team === team)[0]);

            if (add) {
                if (!SubmissionInfo[teamIndex].Items) return SubmissionInfo[teamIndex].Items = [item];
                SubmissionInfo[teamIndex].Items.push(item);
            } else {
                let itemToRemove = $(`[data-team='${team}'][data-item="${item}"]`)
                itemToRemove.attr('data-used', false);
                itemToRemove.find('.used-item').remove();

                if (SubmissionInfo[teamIndex].Items.includes(item))
                    SubmissionInfo[teamIndex].Items = SubmissionInfo[teamIndex].Items.filter((i) => i !== item);
            }
        }

        function SetItemUsed(team, item) {
            let selectedItem = $(`[data-item="${item}"][data-team="${team}"]`);

            if (selectedItem.attr('data-used') === 'true') {
                UpdateItems(team, false, item);
            } else {
                selectedItem.attr('data-used', true);
                selectedItem.append('<div class="used-item"></div>')
                UpdateItems(team, true, item);

                if (item === 'Wonder Chest') {
                    UpdateItems(team, false, 'Tera Orb');
                } else if (item === 'Tera Orb') {
                    UpdateItems(team, false, 'Wonder Chest');
                }
            }
        }

        function CalculateTotalEarnings() {
            TotalPokeEarnings = 0;
            TotalCandyEarnings = 0;

            // checked means it is writing
            if ($("#medium-toggle").attr('data-medium') === 'writing') {
                let words = $("#word-count").val();
                let candyPer = Math.floor(words / 500);
                if ($(`[data-writing="solo"]`).prop('checked')) {
                    TotalPokeEarnings = words;
                    TotalCandyEarnings = 150 * candyPer;
                } else {
                    TotalPokeEarnings = Math.floor(words / 2);
                    TotalCandyEarnings = 75 * candyPer;
                }
            } else {
                if ($(`[data-background="simple"]`).prop('checked')) {
                    TotalPokeEarnings += 500;
                } else {
                    TotalPokeEarnings += 1000;
                    TotalCandyEarnings += 50;
                }

                let characters = $("#characters-count").val();
                TotalPokeEarnings += characters * 50;
                TotalCandyEarnings += characters * 50;
                if (TotalPokeEarnings > 1350) TotalPokeEarnings = 1350;
                if (TotalCandyEarnings > 400) TotalCandyEarnings = 400;
            }

            if (HOLIDAY_HILLS && Number(HolidayHillsInfo.Bonus) > 0) TotalCandyEarnings += Number(HolidayHillsInfo.Bonus);

            $("#calc-poke").html(TotalPokeEarnings);
            $("#calc-candy").html(TotalCandyEarnings);
        }

        async function UpdateRecruit(teamname, recruit) {
            $(`.results.recruit.icon[data-team="${teamname}"]`).html(`<img src="${await GetDungeonIcon(recruit)}" ${/Potion|Juice/gi.test(recruit) ? "width=120px" : ""}>`);
            return SubmissionInfo[GetTeamIndex(teamname)].Recruit = recruit;
        }


        /* -------------------------------------------------- */
        /* VALIDATE/TOGGLE VISIBILITY ----------------------- */
        /* -------------------------------------------------- */
        function ValidateFinalSubmit() {
            // if: the URL is not valid
            // OR the medium is writing and the word count is less than 1
            // OR the medium is artwork and the character count is less than 1
            // disable submitting; enable in any other case
            if (!IsValidMedium() || !IsValidUrl($(`#submission-link`).val())) {
                $("#go-to-results").attr('disabled', 'true');
            } else {
                $("#go-to-results").removeAttr('disabled');
            }
        }

        function ValidateExtensions() {
            let monthYear = CurrentDate().getMonth() - 1 < 0 ? "December " + (CurrentDate().getFullYear() - 1).toString() : month[CurrentDate().getMonth() - 1] + " " + CurrentDate().getFullYear();

            // should be <= 7
            if (CurrentDate().getDate() <= 7) {
                $("#extension-month").html(monthYear);
                $('#extensions-period').removeClass('d-none');
                return true;
            } else return false;
        }

        function ValidateMapButton() {
            let userArr = [];
            $('.select-user').each(function () {
                if ($(this).val() !== 'none') userArr.push($(this).val());
            });

            if (userArr.length < 1) {
                if (HOLIDAY_HILLS) return $("#enter-hh-btn").attr('disabled', 'true');
                return $("#go-to-map-btn").attr('disabled', 'true');
            } else {
                if (HOLIDAY_HILLS) return $("#enter-hh-btn").removeAttr('disabled');
                return $("#go-to-map-btn").removeAttr('disabled');
            }
        }

        function CheckDungeonDifficulty(difficulty) {
            let baseLevel = 0;
            if (difficulty.includes("Heroic")) {
                baseLevel = 80;
            } else if (difficulty.includes("Legendary")) {
                baseLevel = 90;
            }

            if (CharacterLevelsArr.filter(level => level < baseLevel).length > 0) {
                $("#enter-dungeon-btn").attr('disabled', '');

                UpdateBSTooltip('#enter-dungeon-tooltip', true);
            } else {
                $("#enter-dungeon-btn").removeAttr('disabled');
                UpdateBSTooltip('#enter-dungeon-tooltip', false);
            }
        }

        async function ToggleIslandDetails(open) {
            let infoBox = $("#map-overview-container");

            if (open) {
                $("#map-overview-container").addClass('fadeInAnim').removeClass('d-none');

                if (!$('.map-information').hasClass('fadeInAnim')) $('.map-information').addClass('fadeInAnim');
                if ($('.map-information').hasClass('fadeOutAnim')) $('.map-information').removeClass('fadeOutAnim');
            } else {
                $("#map-overview-container").addClass('fadeOutAnim').removeClass('fadeInAnim');

                if ($('.map-information').hasClass('fadeInAnim')) $('.map-information').removeClass('fadeInAnim');
                if (!$('.map-information').hasClass('fadeOutAnim')) $('.map-information').addClass('fadeOutAnim');

                await Wait(1100);
                $("#map-overview-container").addClass('d-none').removeClass('fadeOutAnim');
                ToggleDungeonDetails(false);
            }
        }

        function ToggleDungeonDetails(open) {
            if (open) {
                $("#island-overview").addClass('d-none');
                $("#dungeon-overview").addClass('fadeInAnim').removeClass('d-none');
            } else {
                $("#island-overview").removeClass('d-none');
                $("#dungeon-overview").addClass('d-none').removeClass('fadeInAnim');
            }
        }

        function ToggleUseableItems(items, canUse) {
            items.forEach((item) => {
                $(`[data-item="${item}"]`).each(function () {
                    canUse ? $(this).removeAttr('disabled') : $(this).attr('disabled', '');
                })
            })
        }

        function ToggleMissionDisplay(dungeonName) {
            if (Object.keys(MissionsByDungeon).includes(dungeonName)) {
                $("#mission-confirm").removeClass("d-none");
                //$("#mission-title").html(MissionsByDungeon[dungeonName].ID);

                $("#mission-select").children().remove();
                $("#mission-check-confirm").children().remove();

                let availableMissions = MissionsByDungeon[dungeonName];
                availableMissions.forEach(mission => {
                    $("#mission-select").append(`<option value="${mission.Name}"${availableMissions.indexOf(mission) === 0 ? " selected" : ""}>${mission.Label}</option>`);
                });

                let teams = GetTeamsArray();
                teams.forEach((team) => {
                    //CreateMissionConfirmation(MissionsByDungeon[dungeonName].NeedsKey, team);
                    CreateMissionConfirmation('FALSE', team);
                });

            } else {
                if (!$("#mission-confirm").hasClass("d-none"))
                    $("#mission-confirm").addClass("d-none");
            }
        }

        function ToggleMedium(checked) {
            let toggleLabels = $('.medium-label[data-medium="writing"]');
            TotalPokeEarnings = 0;
            TotalCandyEarnings = 0;
            $("#calc-poke").html(0);
            $("#calc-candy").html(0);

            if (checked) {
                $("#medium-toggle").attr('data-medium', 'writing');
                $('.medium-label[data-medium="writing"]').addClass("on");
                $('.medium-label[data-medium="art"]').removeClass("on");
                $("#artwork-settings").addClass("d-none");
                $("#writing-settings").removeClass("d-none");
            } else {
                $("#medium-toggle").attr('data-medium', 'art');
                $('.medium-label[data-medium="writing"]').removeClass("on");
                $('.medium-label[data-medium="art"]').addClass("on");
                $("#artwork-settings").removeClass("d-none");
                $("#writing-settings").addClass("d-none");
            }
        }

        /* -------------------------------------------------- */
        /* TRANSITIONS/ANIMATIONS --------------------------- */
        /* -------------------------------------------------- */

        async function AnimateToFlyingIslands(open) {
            IsFlyingIsland = open;
            AnimateCloudsToSky(open);
            if (open) {
                await Wait(1600);
                $("#flying-islands-map").addClass('fadeInAnim').removeClass('d-none');
            } else {
                await Wait(800);
                $("#flying-islands-map").addClass('d-none').removeClass('fadeInAnim');
            }
        }

        async function AnimateCloudsToSky(on) {
            let cloudsTransition = $("#clouds-transition");

            cloudsTransition.removeClass("d-none").addClass("to-sky");

            await Wait(900);
            $("#world-map").addClass("d-none");

            if (on) {
                $("html").css('background-image', 'url("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Friend%20Area%20Backgrounds/friend-area.png"), radial-gradient(circle, rgba(25,67,70,1) 0%, rgba(0,0,0,0) 88%)');
            } else {
                $("html").css('background-image', 'radial-gradient(circle, rgba(11,51,79,1) 2%, rgba(17,67,103,0) 8%, rgba(17,67,103,0) 92%, rgba(11,51,79,1) 98%), linear-gradient(0deg, rgba(11,51,79,1) 0%, rgba(17,67,103,1) 3%, rgba(17,67,103,1) 97%, rgba(11,51,79,1) 100%)');
                $("#world-map").removeClass("d-none").addClass("fadeIn");
            }

            await Wait(800);
            cloudsTransition.addClass("d-none").removeClass("to-sky");
        }

        async function TransitionWaterToMap() {
            let waterTransition = $("#water-transition");
            waterTransition.addClass('to-map');

            await Wait(1100);
            $("#main-container").addClass("d-none");
            $("#world-map").removeClass("d-none");
            $("#dungeon-select-container").removeClass("d-none");

            $("html").css('background-image', 'radial-gradient(circle, rgba(11,51,79,1) 2%, rgba(17,67,103,0) 8%, rgba(17,67,103,0) 92%, rgba(11,51,79,1) 98%), linear-gradient(0deg, rgba(11,51,79,1) 0%, rgba(17,67,103,1) 3%, rgba(17,67,103,1) 97%, rgba(11,51,79,1) 100%)');

            await Wait(250);
            waterTransition.removeClass("to-map").addClass("fade-out");
            await Wait(1100);
            waterTransition.removeClass("fade-out").addClass("d-none");
        }

        function CreateDungeonBanner(dungeonName, dungeonObj) {
            let plainDungeonName = dungeonName.replaceAll(`"`, ``);
            $("#dungeon-banner-btns").append(
                `<div class="dungeon-banner">
                    <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" data-dungeon="${plainDungeonName}">
                        <div class="dungeon-label-banner">${dungeonName.replaceAll(`""`, `"`)}</div>
                    </button>
                    <div class="dungeon-banner-tail-left"></div>
                    <div class="dungeon-banner-tail-right"></div>
                </div>`
            )

            let dungeonBtn = $(`.dungeon-select-banner[data-dungeon="${plainDungeonName}"]`)
            dungeonBtn.on("click", async function () {
                $('.map-information').addClass('fadeOutAnim');
                await Wait(500);
                ToggleDungeonDetails(true);
                CreateDungeonInfo(dungeonName);
            });

            if (dungeonObj["Difficulty"].includes("Heroic"))
                dungeonBtn.append('<div class="heroic"><i class="fa-solid fa-certificate"></i></div>');
            else if (dungeonObj["Difficulty"].includes("Legendary"))
                dungeonBtn.append('<div class="legendary"><i class="fa-solid fa-certificate"></i></div>');
        }

        async function CreateDungeonInfo(dungeonName) {
            if ($('.map-information').hasClass('fadeInAnim')) $('.map-information').removeClass('fadeInAnim');

            CurrentDungeon = dungeonName;

            ToggleMissionDisplay(dungeonName);

            $("#dungeon-name-box").html(dungeonName.replaceAll('""', '"'));
            $("#dungeon-name-box").attr('data-dungeon', dungeonName.replaceAll('""', '"'));
            await $("#dungeon-description-box").html(FullIslandsList[CurrentIsland]["Dungeons"][dungeonName]["Description"]);

            let textHeight = await $("#dungeon-description-box").height();
            if (textHeight > 117 || FullIslandsList[CurrentIsland]["Dungeons"][dungeonName]["Description"].length > 400) {
                $('#dungeon-description-btn').removeClass('d-none');
                $('#dungeon-description-btn').addClass('collapsed').html('<i class="fa-solid fa-caret-down me-1 fa-lg"></i> Read More');
                $('#dungeon-description-box').addClass('read-more').removeClass('show');
            } else {
                $('#dungeon-description-btn').addClass('d-none');
                $('#dungeon-description-btn').removeClass('collapsed').html('<i class="fa-solid fa-caret-up me-1 fa-lg"></i> See Less');
                $('#dungeon-description-box').removeClass('read-more').addClass('show');
            }

            let recruitsContainer = $("#recruit-container-box");
            recruitsContainer.empty();

            let recruits = FullIslandsList[CurrentIsland]["Dungeons"][dungeonName]["Recruits"];

            if (FullIslandsList[CurrentIsland]["Dungeons"][dungeonName]["Difficulty"].includes("Heroic")) {
                recruits = ["Random Recruit Token", "Random Gen. Recruit Token", "Random Type Recruit Token", "Category of Choice Recruit Token", "Pokémon of Choice Token"];
            }

            CheckDungeonDifficulty(FullIslandsList[CurrentIsland]["Dungeons"][dungeonName]["Difficulty"]);

            for (let i = 0; i < recruits.length; i++) {
                let newRecruitBox = await CreateRecruitDisplay(recruits[i]);
                recruitsContainer.append(newRecruitBox);
            }

            await Wait(100);
            $('.map-information').removeClass('fadeOutAnim').addClass('fadeInAnim');
        }

        async function CreateRecruitDisplay(species) {
            let recruitBox = $('<div>');
            recruitBox.attr({
                class: 'dungeon-recruit-container col-xl-2 col-sm-3 col-5',
                'data-recruit': species
            });

            let recruitImg = $('<img>');
            recruitImg.attr('src', await GetDungeonIcon(species));

            let recruitLabel = $('<div>');
            recruitLabel.addClass("recruit-label");
            recruitLabel.html(species);

            recruitBox.append(recruitImg, recruitLabel);
            return recruitBox;
        }

        async function SelectDungeonFromDropdown(dungeonValue) {
            CurrentDungeon = dungeonValue.includes("to see this") ? `"We didn't want you to see this!"` : dungeonValue;
            let regex = new RegExp(`.*${dungeonValue.replaceAll("'", ".")}.*`, 'i');
            CurrentIsland = await Object.keys(FullIslandsList).find((i) => Object.keys(FullIslandsList[i]['Dungeons']).some(d => regex.test(d)));
            let flyingIslands = ["Cloud Breach", "Behemoth Isles", "The Starry Cascada Islands", "The Glimmering Isle", "The Land of Mists", "The Lost Kingdom"];

            if (!IsFlyingIsland && flyingIslands.includes(CurrentIsland)) {
                AnimateToFlyingIslands(true);
                await Wait(900);
            }
            else if (IsFlyingIsland && !flyingIslands.includes(CurrentIsland)) {
                AnimateToFlyingIslands(false);
                await Wait(900);
            }

            SetIslandDetails(CurrentIsland);
            await CreateDungeonInfo(CurrentDungeon);
            ToggleIslandDetails(true);
            ToggleDungeonDetails(true);
        }

        // Sets the useability of items, resets missions, and sets the name and difficulty of the dungeon
        function EnterDungeon() {
            let difficulty = FullIslandsList[CurrentIsland]["Dungeons"][CurrentDungeon]["Difficulty"];
            if (difficulty.includes('Legendary')) {
                ToggleUseableItems(['Wishing Star'], true);
            } else if (difficulty.includes('Heroic')) {
                ToggleUseableItems(['Wishing Star', 'Golden Mask'], false);
            } else {
                ToggleUseableItems(['Wishing Star'], false);
                ToggleUseableItems(['Golden Mask'], true);
            }

            $("#mission-check").prop('checked', false);
            if (!$("#mission-check-text").hasClass("d-none"))
                $("#mission-check-text").addClass("d-none");
            if (!$("#mission-check-confirm").hasClass("d-none"))
                $("#mission-check-confirm").addClass("d-none");
            if (!$("#mission-select-container").hasClass("d-none"))
                $("#mission-select-container").addClass("d-none");

            $("#confirm-dungeon-name").html(CurrentDungeon);
            $("#confirm-dungeon-difficulty").html(difficulty);
        }

        // Fades in the results and sets all info for individual teams
        async function GoToResults() {
            if (HOLIDAY_HILLS) await GetBaseSubmitInfo();
            $("#results-container").removeClass("d-none").addClass("fadeInAnim");

            let levels = RandomNumber(5) + 1;
            SubmissionInfo.forEach((obj) => {
                let otherTeams = [];
                obj['Users'].forEach((u) => {
                    let teams = SubmissionInfo.filter((teamObj) => teamObj['Users'].includes(u) && teamObj.Team !== obj.Team);
                    if (teams.length < 1) return;
                    teams.forEach((t) => {
                        if (!otherTeams.includes(t)) otherTeams.push(t);
                    });
                });

                if (otherTeams.length > 0) {
                    let earningsAdded = false;
                    for (let i = 0; i < otherTeams.length; i++) {
                        if (otherTeams[i].Poke > 0) {
                            obj.Poke = obj.Items.includes('Lost Loot') ? 5000 : 0;
                            if (HOLIDAY_HILLS) obj.Candy = 0;
                            earningsAdded = true;
                            break;
                        }
                    }

                    if (!earningsAdded) {
                        obj.Poke = obj.Items.includes('Lost Loot') ? Number(TotalPokeEarnings) + 5000 : TotalPokeEarnings;
                        if (HOLIDAY_HILLS) obj.Candy = TotalCandyEarnings;
                    }
                } else {
                    obj.Poke = obj.Items.includes('Lost Loot') ? Number(TotalPokeEarnings) + 5000 : TotalPokeEarnings;
                    if (HOLIDAY_HILLS) obj.Candy = TotalCandyEarnings;
                }

                if (obj.Users.length > 1)
                    obj.Users = `${obj.Users[0]} & ${obj.Users[1]}`
                else obj.Users = obj.Users[0];

                if (HOLIDAY_HILLS) {
                    let recruits = HolidayHillsInfo.Recruits;
                    let recruit = recruits[RandomNumber(recruits.length)];
                    obj.Recruit = recruit;
                    return CreateResultsCard(obj);
                }

                let recruits = FullIslandsList[CurrentIsland].Dungeons[CurrentDungeon].Recruits;
                let recruit = recruits[RandomNumber(recruits.length)];
                obj.Recruit = recruit;
                obj.Levels = levels;

                if (obj.Items.includes('Wonder Chest'))
                    obj.Levels += 5;
                else if (obj.Items.includes('Tera Orb'))
                    obj.Levels += 10;

                if (FullIslandsList[CurrentIsland].Dungeons[CurrentDungeon].Difficulty.includes('Heroic'))
                    obj.Rewards = ['Treasure Box'];

                if (Object.keys(MissionsByDungeon).includes(CurrentDungeon) && $(`.mission-team[data-team="${obj.Team}"]`).attr('data-rewards') === 'true') {

                    let missionRewards = MissionsByDungeon[CurrentDungeon].filter((mission) => mission.Name === $(`#mission-select`).find(":selected").val());

                    if (missionRewards[0].Rewards) {
                        obj.Rewards = [];
                        obj.Rewards.push(missionRewards[0].Rewards);
                    }
                }

                CreateResultsCard(obj);
            });
        }

        async function StartCountdownForForms() {
            let countdownText = $("#time-left");
            countdownText.html(15);

            for (let i = 15; i > -1; i--) {
                await Wait(1000);
                countdownText.html(i);
            }

            ShowThanks();
        }

        function ShowThanks() {
            let endContainer = $("#completed-end-container");
            if (endContainer.hasClass('d-none')) {
                $("#wait-for-submission").addClass("d-none");
                endContainer.removeClass('d-none').addClass('fadeInAnim');
            } else {
                return;
            }
        }


        /* -------------------------------------------------- */
        /* FINALIZE SUBMISSION ------------------------------ */
        /* -------------------------------------------------- */
        function FormatDataForSubmit(teamObj) {
            let isMission = $('#mission-check').prop('checked');
            let title = $('#submission-title').val() === undefined ? '' : $('#submission-title').val();

            let data = {
                "entry.544999014": "Dungeon",
                "entry.1410153252": teamObj.Users,
                "entry.1587295254": teamObj.Team,
                "entry.970043100": $('#submission-title').val(),
                "entry.893134721": $('#submission-link').val(),
                "entry.1971784670": teamObj["Characters"].toString().replaceAll(',', ', '),
                "entry.1949725304": teamObj.Poke,
                "entry.644969293": teamObj["Recruit"],
                "entry.343180496": CurrentDungeon,
                "entry.1514092885": HOLIDAY_HILLS,
                "entry.1652677307": $('#extension-check').is(":checked")
            };

            let warnings = $('#warnings').val();
            if (warnings !== '') {
                if (DEBUGGING) data["entry.2078567326"] = warnings;
                else data["entry.1122302548"] = warnings;
            }

            if (HOLIDAY_HILLS) data["entry.1213243555"] = teamObj.Candy;
            else {
                data["entry.380451517"] = teamObj["Items"].length > 0 ? teamObj["Items"].toString().replaceAll(',', ', ') : '';
                data["entry.366705611"] = teamObj["Levels"];
                data["entry.1217004916"] = teamObj["Rewards"] ? teamObj["Rewards"].toString().replaceAll(',', ', ') : '';
                //if (Object.keys(MissionsByDungeon).includes(CurrentDungeon) && $('#mission-check').prop('checked'))
                //    data["entry.1844814292"] = MissionsByDungeon[CurrentDungeon].ID;

                if (isMission)
                    data["entry.1844814292"] = $(`#mission-select`).find(":selected").val();

            }
            if (DEBUGGING) console.log(data);

            return data;
        }

        async function ConfirmSubmissions() {
            SubmissionInfo.forEach((obj) => {
                CreateResultsCard(obj, true);
                SendForm(FormatDataForSubmit(obj));
            })

            $("#results-container").addClass('d-none');
            SetBackground("https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Screens/scene.png");
            $("#end-container").removeClass('d-none').addClass('fadeInAnim');
            StartCountdownForForms();
        }

        async function SendForm(submitObj) {
            let formLink = GraderSettings.FormUrl;

            await Wait(1000); // waits for 1 second before sending to avoid rate limits
            $.ajax({
                url: formLink,

                // REAL: https://docs.google.com/forms/u/0/d/e/1FAIpQLSdyQTfBPG9lG3VQv6YUpabVY5KF28mydGqgDJ7nWsjNxb1Vdw/formResponse
                // DEBUG: https://docs.google.com/forms/u/0/d/e/1FAIpQLSdWTLfAxzii-GIUAcb-JNo0nkmEO4UKsH9hd-XZYNIF4LsX3A/formResponse

                data: submitObj,
                type: "POST",
                dataType: "xml",
                success: function (d) {
                    console.log(`📤 Successfully submitted form for ${submitObj['entry.1587295254']} (${submitObj['entry.1410153252']})!`);
                },
                error: function (x, y, z) {
                    console.log(`⚠ Failed to submit form for ${submitObj['entry.1587295254']} (${submitObj['entry.1410153252']})!`);
                }
            });
            return false;
        }
    </script>

    <button class="credits-link" data-bs-toggle="modal" data-bs-target="#credits-modal">
        Credits <i class="fa-solid fa-pen fa-sm ms-1"></i>
    </button>

    <button class="help-link d-none" data-bs-toggle="modal" data-bs-target="#help-modal-map">
        Help <i class="fa-solid fa-info-circle fa-sm ms-1"></i>
    </button>

    <div class="water-transition" id="water-transition">
        <div class="waves"></div>
    </div>

    <div class="clouds-transition d-none" id="clouds-transition"></div>

    <div class="dungeon-select col-xl-4 col-md-5 col-sm-6 col-12 d-flex flex-wrap align-content-center d-none"
        id="dungeon-select-container">
        <select class="col-10 d-lg-block d-none" id="dungeon-select">
            <option value="none" data-dungeon="">Select a dungeon</option>
        </select>
        <button class="to-dungeon col-1 d-lg-block d-none" id="to-selected-dungeon-btn" disabled><i
                class="fa-solid fa-circle-arrow-right"></i></button>
    </div>

    <!--- Loading Screen container --->
    <div class="loading-screen container-fluid" id="loading-screen">
        <div class="overlay"></div>
        <div class="loading-container">
            <div class="loading access"></div>
            <div class="loading-text access" id="loading-text">Loading Settings . . .</div>
            <div class="tip-box fw-bold d-none" id="unavailable-text">Holiday Hills is not available at this time.</div>
        </div>
    </div>

    <!--- Main/Start Screen container --->
    <div class="main-container container-fluid d-none" id="main-container">
        <div class="" id="start-screen">
            <div class="start-screen section-header"><span style="font-size: 0.6em;">PMD Beyond the Sea:</span>
                <br><span id="grader-title">Dungeon Grader</span>
                <br><span style="font-size: 0.6em;" id="debug-header" class="d-none">(DEBUG VERSION)</span>
            </div>
            <div class="button-bar justify-content-center">
                <button class="big-button dungeon-link" id="go-to-map-btn" data-holidayhills=false disabled>Go to Map</button>
                <button class="big-button island-link d-none" disabled data-bs-toggle="modal" data-bs-target="#submit-modal" id="enter-hh-btn" data-holidayhills=true>Enter Dungeon</button>
                <!-- Button trigger modal -->
                <button class="big-button credits-link-big" data-bs-toggle="modal" data-bs-target="#credits-modal">
                    Credits
                </button>
                <a href="https://sites.google.com/view/pmd-beyond-the-sea/mystery-dungeons/guide-to-the-dungeon-grader"><button
                        class="big-button external-link" disabled data-bs-toggle="tooltip" data-bs-title="Currently being revamped!">View Guide</button></a>
            </div>

            <div class="start-screen-main row align-items-center justify-content-center d-flex flex-wrap px-4 my-3">

                <div class="container-fluid d-flex flex-wrap align-items-center justify-content-between">

                    <!--- Team Container 1 --->
                    <div
                        class="container-fluid d-flex flex-wrap justify-content-between team-box first col-xxl-3 col-lg-4 col-md-5 col-11 my-xxl-3 my-xl-5 my-md-4 team-container-1">
                        <div class="number first"><i class="fa-solid fa-1"></i></div>
                        <button class="copy-prev clear-box d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Clear team" id="clear-info-btn-1">
                            <i class="fa-solid fa-trash-can fa-lg"></i>
                        </button>

                        <div class="party-dropdown col-12" id="username-select-1">
                            <div class="dropdown-label">Username</div>
                            <select id="select-user-1" class="select-user">
                                <option value="none">(none)</option>
                            </select>
                        </div>
                        <div class="team-member d-flex flex-wrap col-12" id="user-info-1">
                            <div class="party-dropdown col-xxl-7 col-xl-12 col-md-6 col-sm-6 col-12" id="team-select-1">
                                <div class="dropdown-label">Team</div>
                                <select id="select-team-1" class="select-team">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                            <div class="party-dropdown col-xxl-4 col-xl-12 col-md-5 col-sm-5 col-12" id="char-select-1">
                                <div class="dropdown-label">Character</div>
                                <select id="select-char-1" class="select-char">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--- Party Member 1 --->
                    <div
                        class="party-display my-2 align-items-center justify-content-center d-flex flex-wrap col-xxl-3 col-lg-2 col-md-5 col-11 party-member-1">
                        <div class="col-xl-12 col-lg-6">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Icons/Other/substitute.png"
                                    id="party-img-1">
                                <div class="stage-spot"></div>
                            </div>
                            <div class="party-member-info">
                                <div id="party-name-1">--</div>
                                <div id="party-level-1">--</div>
                            </div>
                        </div>
                    </div>

                    <!--- Team Container 2 --->
                    <div
                        class="container-fluid d-flex flex-wrap justify-content-between team-box second col-xxl-3 col-lg-4 col-md-5 col-11 my-xxl-3 my-xl-5 my-md-4 team-container-2">
                        <div class="number second"><i class="fa-solid fa-2"></i></div>
                        <button class="copy-prev d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Copy from previous team" id="copy-info-btn-2">
                            <i class="fa-solid fa-clone fa-lg"></i>
                        </button>
                        <button class="copy-prev clear-box d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Clear team" id="clear-info-btn-2">
                            <i class="fa-solid fa-trash-can fa-lg"></i>
                        </button>

                        <div class="party-dropdown new-user col-12" id="username-select-2">
                            <div class="dropdown-label">Username</div>
                            <select id="select-user-2" class="select-user">
                                <option value="none">(none)</option>
                            </select>
                        </div>
                        <div class="team-member d-flex flex-wrap col-12" id="user-info-2">
                            <div class="party-dropdown col-xxl-7 col-xl-12 col-md-6 col-sm-6 col-12" id="team-select-2">
                                <div class="dropdown-label">Team</div>
                                <select id="select-team-2" class="select-team">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                            <div class="party-dropdown col-xxl-4 col-xl-12 col-md-5 col-sm-5 col-12" id="char-select-2">
                                <div class="dropdown-label">Character</div>
                                <select id="select-char-2" class="select-char">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--- Party Member 2 --->
                    <div
                        class="party-display my-2 align-items-center justify-content-center d-flex flex-wrap col-xxl-3 col-lg-2 col-md-5 col-11 party-member-2">
                        <div class="col-xl-12 col-lg-6">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Icons/Other/substitute.png"
                                    id="party-img-2">
                                <div class="stage-spot"></div>
                            </div>
                            <div class="party-member-info">
                                <div id="party-name-2">--</div>
                                <div id="party-level-2">--</div>
                            </div>
                        </div>
                    </div>

                    <!--- Team Container 3 --->
                    <div
                        class="container-fluid d-flex flex-wrap justify-content-between team-box third col-xxl-3 col-lg-4 col-md-5 col-11 my-xxl-3 my-xl-5 my-md-4 team-container-3">
                        <div class="number third"><i class="fa-solid fa-3"></i></div>
                        <button class="copy-prev d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Copy from previous team" id="copy-info-btn-3">
                            <i class="fa-solid fa-clone fa-lg"></i>
                        </button>
                        <button class="copy-prev clear-box d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Clear team" id="clear-info-btn-3">
                            <i class="fa-solid fa-trash-can fa-lg"></i>
                        </button>

                        <div class="party-dropdown col-12 new-user" id="username-select-3">
                            <div class="dropdown-label">Username</div>
                            <select id="select-user-3" class="select-user">
                                <option value="none">(none)</option>
                            </select>
                        </div>
                        <div class="team-member d-flex flex-wrap col-12" id="user-info-3">
                            <div class="party-dropdown col-xxl-7 col-xl-12 col-md-6 col-sm-6 col-12" id="team-select-3">
                                <div class="dropdown-label">Team</div>
                                <select id="select-team-3" class="select-team">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                            <div class="party-dropdown col-xxl-4 col-xl-12 col-md-5 col-sm-5 col-12" id="char-select-3">
                                <div class="dropdown-label">Character</div>
                                <select id="select-char-3" class="select-char">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--- Party Member 3 --->
                    <div
                        class="party-display my-2 align-items-center justify-content-center d-flex flex-wrap col-xxl-3 col-lg-2 col-md-5 col-11 party-member-3">
                        <div class="col-xl-12 col-lg-6">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Icons/Other/substitute.png"
                                    id="party-img-3">
                                <div class="stage-spot"></div>
                            </div>
                            <div class="party-member-info">
                                <div id="party-name-3">--</div>
                                <div id="party-level-3">--</div>
                            </div>
                        </div>
                    </div>

                    <!--- Team Container 4 --->
                    <div
                        class="container-fluid d-flex flex-wrap justify-content-between team-box fourth col-xxl-3 col-lg-4 col-md-5 col-11 my-xxl-3 my-xl-5 my-md-4 team-container-4">
                        <div class="number fourth"><i class="fa-solid fa-4"></i></div>
                        <button class="copy-prev d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Copy from previous team" id="copy-info-btn-4">
                            <i class="fa-solid fa-clone fa-lg"></i>
                        </button>
                        <button class="copy-prev clear-box d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Clear team" id="clear-info-btn-4">
                            <i class="fa-solid fa-trash-can fa-lg"></i>
                        </button>

                        <div class="party-dropdown new-user col-12" id="username-select-4">
                            <div class="dropdown-label">Username</div>
                            <select id="select-user-4" class="select-user">
                                <option value="none">(none)</option>
                            </select>
                        </div>
                        <div class="team-member d-flex flex-wrap col-12" id="user-info-4">
                            <div class="party-dropdown col-xxl-7 col-xl-12 col-md-6 col-sm-6 col-12" id="team-select-4">
                                <div class="dropdown-label">Team</div>
                                <select id="select-team-4" class="select-team">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                            <div class="party-dropdown col-xxl-4 col-xl-12 col-md-5 col-sm-5 col-12" id="char-select-4">
                                <div class="dropdown-label">Character</div>
                                <select id="select-char-4" class="select-char">
                                    <option value="none">(none)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!--- Party Member 4 --->
                    <div
                        class="party-display my-2 align-items-center justify-content-center d-flex flex-wrap col-xxl-3 col-lg-2 col-md-5 col-11 party-member-4">
                        <div class="col-xl-12 col-lg-6">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Icons/Other/substitute.png"
                                    id="party-img-4">
                                <div class="stage-spot"></div>
                            </div>
                            <div class="party-member-info">
                                <div id="party-name-4">--</div>
                                <div id="party-level-4">--</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="submission-info-container">
            </div>
        </div>
    </div>

    <!--- World Map container --->
    <div class="world-map container-fluid d-flex align-content-center d-none p-0 p-lg-5" id="world-map">
        <button class="to-flying-btn d-lg-block d-none" id="to-flying-btn">
            <div class="label">
                <div class="arrow"><i class="fa-solid fa-up-long"></i></div> To the Flying Islands
            </div>
        </button>

        <div class="world-map-small d-lg-none d-flex justify-content-center align-items-center" style="position:absolute; left:0; right:0; top:0; bottom:0; width:100%; height:100%; margin:auto">
            <div class="tip-box w-100">
                <p class="fw-bold" style="font-size:1.2em;">Select a dungeon from the dropdown below.</p>
                <div class="d-flex flex-wrap align-content-center">
                    <select class="col-10" id="dungeon-select-small" style="font-size:1.2em;">
                        <option value="none" data-dungeon="">Select a dungeon</option>
                    </select>
                    <button class="to-dungeon col-1" id="to-selected-dungeon-small-btn" disabled><i
                            class="fa-solid fa-circle-arrow-right"></i></button>
                </div>
            </div>
        </div>

        <div class="world-map-image d-lg-block d-none"><img
                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/World-Map-No-Text.png"
                class="img-fluid w-100">

            <div class="d-lg-block d-none">
                <button class="go-to-island" data-island="Kala Island">
                    <div class="island-button">Kala Island</div>
                </button>
                <button class="go-to-island" data-island="Pele Island">
                    <div class="island-button">Pele Island</div>
                </button>
                <button class="go-to-island" data-island="Kumu Island">
                    <div class="island-button">Kumu Island</div>
                </button>
                <button class="go-to-island" data-island="Slumbering Mountains">
                    <div class="island-button">Slumbering Mountains</div>
                </button>
                <button class="go-to-island" data-island="Ash Islands">
                    <div class="island-button">Ash Islands</div>
                </button>
                <button class="go-to-island" data-island="Fairy Ring Isle">
                    <div class="island-button">Fairy Ring Isle</div>
                </button>
                <button class="go-to-island" data-island="Isle of Steam">
                    <div class="island-button">Isle of Steam</div>
                </button>
                <button class="go-to-island" data-island="Draconian Peaks">
                    <div class="island-button">Draconian Peaks</div>
                </button>
                <button class="go-to-island" data-island="Serene Island">
                    <div class="island-button">Serene Island</div>
                </button>
                <button class="go-to-island" data-island="The Decayed Isles">
                    <div class="island-button">Decayed Isles</div>
                </button>
                <button class="go-to-island" data-island="Sea of Beginning">
                    <div class="island-button">Sea of Beginning</div>
                </button>
                <button class="go-to-island" data-island="Spiral Archipelago">
                    <div class="island-button">Spiral Archipelago</div>
                </button>
                <button class="go-to-island" data-island="Skull Island">
                    <div class="island-button">Skull Island</div>
                </button>
                <button class="go-to-island" data-island="Desert Region">
                    <div class="island-button">Desert Region</div>
                </button>
                <button class="go-to-island" data-island="Lanier Islands">
                    <div class="island-button">Lanier Islands</div>
                </button>
                <button class="go-to-island" data-island="Disadattato Island">
                    <div class="island-button">Disadattato Island</div>
                </button>
                <button class="go-to-island" data-island="Islands of the Colossus">
                    <div class="island-button">Islands of the Colossus</div>
                </button>
                <button class="go-to-island" data-island="Parella Island">
                    <div class="island-button">Parella Island</div>
                </button>
                <button class="go-to-island" data-island="The Hissing Isle">
                    <div class="island-button">Hissing Isle</div>
                </button>
                <button class="go-to-island" data-island="Autumnal Heights">
                    <div class="island-button">Autumnal Heights</div>
                </button>
                <button class="go-to-island" data-island="Frozen Isle">
                    <div class="island-button">Frozen Isle</div>
                </button>
                <button class="go-to-island" data-island="Snow Continent">
                    <div class="island-button">Snow Continent</div>
                </button>
                <button class="go-to-island" data-island="The Ancient Tundra">
                    <div class="island-button">Ancient Tundra</div>
                </button>
                <button class="go-to-island" data-island="Sweetful Isle">
                    <div class="island-button">Sweetful Isle</div>
                    <button class="go-to-island" data-island="Frozen Wasteland">
                        <div class="island-button">Frozen Wasteland</div>
                    </button>
                    <button class="go-to-island" data-island="Othrys">
                        <div class="island-button">Othrys</div>
                    </button>
                    <button class="go-to-island" data-island="Grass Continent">
                        <div class="island-button">Grass Continent</div>
                    </button>
                    <button class="go-to-island" data-island="Air Continent">
                        <div class="island-button">Air Continent</div>
                    </button>
                    <button class="go-to-island" data-island="Mist Continent">
                        <div class="island-button">Mist Continent</div>
                    </button>
                    <button class="go-to-island" data-island="Water Continent">
                        <div class="island-button">Water Continent</div>
                    </button>
                    <button class="go-to-island" data-island="Sand Continent">
                        <div class="island-button">Sand Continent</div>
                    </button>
                    <button class="go-to-island" data-island="Sea of Wonders">
                        <div class="island-button">Sea of Wonders</div>
                    </button>
            </div>
        </div>
    </div>

    <!--- Flying Islands container --->
    <div class="flying-islands-map row overflow-hidden justify-content-center align-content-center d-none"
        id="flying-islands-map">
        <div class="flying-islands-map-blur"></div>
        <button class="back-to-sea-btn d-lg-block d-none" id="back-to-sea-btn">
            <div class="label">
                <div class="arrow"><i class="fa-solid fa-up-long"></i></div> To the Great Ocean
            </div>
        </button>
        <div class="flying-islands-btns-container d-flex flex-wrap overflow-scroll col-11 p-4 m-auto"
            style="max-height: 90%;">
            <button class="flying-island-btn col-md-4 col-sm-6 col-9" data-island="Cloud Breach"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_01.png"
                    class="col-12">
                <div class="flying-island-label">Cloud Breach</div>
            </button>
            <button class="flying-island-btn col-md-4 col-sm-6 col-9" data-island="Behemoth Isles"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_02.png"
                    class="col-12">
                <div class="flying-island-label">Behemoth Isles</div>
            </button>
            <button class="flying-island-btn col-md-4 col-sm-8 col-11" data-island="The Glimmering Isle"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_03.png"
                    class="col-12">
                <div class="flying-island-label">Glimmering Isle</div>
            </button>
            <button class="flying-island-btn col-md-4 col-sm-8 col-11" data-island="The Starry Cascada Islands"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_04.png"
                    class="col-12">
                <div class="flying-island-label">Starry Cascada Islands</div>
            </button>
            <button class="flying-island-btn col-md-4 col-sm-8 col-11" data-island="The Land of Mists"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_05.png"
                    class="col-12">
                <div class="flying-island-label">Land of Mists</div>
            </button>
            <button class="flying-island-btn col-md-4 col-sm-8 col-11" data-island="The Lost Kingdom"><img
                    src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Backgrounds/Clouds/ev_cloud_07.png"
                    class="col-12">
                <div class="flying-island-label">Lost Kingdom</div>
            </button>

        </div>
    </div>

    <!--- Island information container --->
    <div class="map-overview-container container-fluid d-flex flex-wrap justify-content-center d-none"
        id="map-overview-container">
        <div class="map-info-blur"></div>
        <div class="row col-lg-4 col-sm-5 mx-5 mt-5 mb-2 justify-content-center align-content-center">
            <div class="map-zoomed-in mx-auto mb-2" id="map-zoomed-in" data-island="">
            </div>
            <button class="big-button map-link" id="back-to-map-btn">Back to Map</button>
        </div>
        <div class="map-information m-auto col-xl-7 col-lg-9 col-11 text-center">
            <div class="island-overview" id="island-overview">
                <div class="section-header mt-5 mb-2 fs-3" id="island-name-box">Island Name</div>
                <div class="p-4 text-pre collapse" id="island-description-box">
                    <p>Island description goes here.</p>
                </div>
                <a class="mt-3 mb-4 collapsed" id="island-description-btn" data-bs-toggle="collapse"
                    data-bs-target="#island-description-box">
                    <i class="fa-solid fa-caret-down me-1"></i> Read More
                </a>
            </div>

            <div class="dungeon-overview d-none" id="dungeon-overview">
                <div class="section-header mt-4 mb-2 fs-5" id="dungeon-name-box" data-dungeon="">Dungeon Name</div>
                <div class="text-pre collapse pt-md-3 pb-md-4 px-md-4 px-3 pb-3 pt-2" id="dungeon-description-box">
                    <p>Dungeon description goes here.</p>
                </div>
                <a class="mt-3 mb-4 collapsed" id="dungeon-description-btn" data-bs-toggle="collapse"
                    data-bs-target="#dungeon-description-box">
                    <i class="fa-solid fa-caret-down me-1"></i> Read More
                </a>

                <hr class="col-10 mx-auto">

                <div class="d-flex flex-wrap justify-content-center pb-3" id="recruit-container-box">

                    <div class="dungeon-recruit-container col-xl-2 col-sm-3 col-5 d-none">
                        <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/shiny/venusaur.png"
                            data-pokemon="Venusaur">
                        <div class="recruit-label">Venusaur</div>
                    </div>
                </div>
                <div id="enter-dungeon-tooltip" class="mx-auto p-0 text-center" data-bs-toggle="tooltip" data-bs-title="One or more characters do not meet the level requirement to enter this dungeon!">
                    <button class="big-button island-link mt-4" data-bs-toggle="modal" data-bs-target="#submit-modal"
                        id="enter-dungeon-btn">Enter Dungeon</button>
                </div>

            </div>

            <div class="row d-flex flex-wrap justify-content-center px-3" id="dungeon-banner-btns">
                <div class="dungeon-banner d-none">
                    <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center">
                        <div class="dungeon-label-banner">
                            Dungeon Name
                        </div>
                    </button>
                    <div class="dungeon-banner-tail-left"></div>
                    <div class="dungeon-banner-tail-right"></div>
                </div>
            </div>
        </div>
    </div>
    <!--- Island information container END --->


    <!-- Submit Modal -->
    <div class="modal fade text-light" id="submit-modal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content text-center">
                <div class="modal-inner-border"></div>
                <div class="modal-header text-center">
                    <p class="fw-bold">Be sure to check over <u>all</u> of your submission details before continuing!
                    </p>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h2 class="modal-title fs-5">Dungeon</h2>
                    <div class="fw-bold fs-5 text-center mt-3" style="font-family: 'DM Sans', sans-serif;"
                        id="confirm-dungeon-name">Dungeon Name</div>
                    <div class="fw-semibold text-center mt-1" style="font-family: 'DM Sans', sans-serif;"
                        id="confirm-dungeon-difficulty" data-holidayhills=false>Difficulty</div>

                    <hr class="border border-secondary border-2 opacity-50">

                    <h2 class="modal-title fs-5">Party</h2>
                    <div class="tip-box d-none">
                        <div class="example-header">IMPORTANT REMINDER <i
                                class="fa-solid fa-exclamation tip-icon exclaim"></i>
                        </div>
                        <p><b>Characters who do not have an approved application <u>cannot</u> be used in
                                dungeons!</b><br>If your submission is found to include a character without an
                            application, it will be removed from the logs and you will not receive the rewards for it!
                        </p>
                    </div>
                    <div class="row d-flex flex-wrap justify-content-center">
                        <div class="col-lg-3 col-6" id="confirm-party-1">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Other/substitute.png"
                                    id="party-view-img-1">
                            </div>
                            <div class="party-view-member-info">
                                <div id="party-view-name-1">--</div>
                                <div id="party-view-level-1">--</div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6 d-none" id="confirm-party-2">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Other/substitute.png"
                                    id="party-view-img-2">
                            </div>
                            <div class="party-view-member-info">
                                <div id="party-view-name-2">--</div>
                                <div id="party-view-level-2">--</div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6 d-none" id="confirm-party-3">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Other/substitute.png"
                                    id="party-view-img-3">
                            </div>
                            <div class="party-view-member-info">
                                <div id="party-view-name-3">--</div>
                                <div id="party-view-level-3">--</div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6 d-none" id="confirm-party-4">
                            <div class="party-member-image">
                                <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Icons/Other/substitute.png"
                                    id="party-view-img-4">
                            </div>
                            <div class="party-view-member-info">
                                <div id="party-view-name-4">--</div>
                                <div id="party-view-level-4">--</div>
                            </div>
                        </div>
                    </div>
                    <hr class="border border-secondary border-2 opacity-50" data-holidayhills=false>

                    <h2 class="modal-title fs-5 mb-4" data-holidayhills=false>Items</h2>
                    <div id="confirm-items-container" data-holidayhills=false></div>

                    <hr class="border border-secondary border-2 opacity-50">
                    <h2 class="modal-title fs-5">Submission Details</h2>

                    <!-- Invalid link alert container -->
                    <span id="invalid-file-alert"></span>

                    <div class="form-floating col-12 col-sm-10 mb-3 mt-3 mx-auto">
                        <input type="text" class="form-control submission-input" id="submission-title"
                            placeholder="Title">
                        <label for="submission-title" class="fw-semibold">Title of Submission (optional)</label>
                    </div>
                    <div class="form-floating col-12 col-sm-10 mb-3 mx-auto">
                        <input type="text" class="form-control submission-input" id="submission-link"
                            placeholder="Link">
                        <label for="submission-link" class="fw-semibold">Link to Submission (required)</label>
                    </div>

                    <hr class="opacity-50 col-10 mx-auto my-lg-5 my-md-4 my-3">

                    <p class="px-md-5 px-3 mt-3">If your piece requires any <b>content warnings</b>, list each one in the box below before submitting.</p>

                    <div class="form-floating col-sm-10 col-12 mb-3 mt-2 mx-auto">
                        <input type="text" class="form-control submission-input" id="warnings"
                            placeholder="Warnings">
                        <label for="warnings" class="fw-semibold">Content Warnings (optional)</label>
                    </div>

                    <hr class="opacity-50 col-10 mx-auto mt-lg-5 mt-md-4 mb-md-4 mt-3">
                </div>

                <div class="fw-bold fst-italic col-md-10 col-12 text-center mb-4 mx-auto">
                    <p>See <a href="https://sites.google.com/view/pmd-beyond-the-sea/earnings-inventories/earning-poke">Earning Poké</a> on the group's Google Site for examples of how to grade your backgrounds and to check requirements for character visibility in artwork.</p>
                </div>

                <div class="card-body d-flex no-wrap justify-content-between">
                    <div class="col-5 mx-auto text-center text-md-end medium-label on" data-medium="art">Artwork</div>
                    <div class="form-check form-switch col-1 mx-auto">
                        <input class="form-check-input" type="checkbox" role="switch" id="medium-toggle"
                            data-medium="art">
                    </div>
                    <div class="col-5 mx-auto text-center text-md-start medium-label" data-medium="writing">Writing</div>
                </div>

                <div class="card medium col-md-7 col-12 mx-auto mb-5">
                    <div class="d-flex justify-content-center align-items-center mx-auto col-8 mt-4">
                        <div class="poke-calculation col-sm-7 col-11" id="calc-poke">
                            500
                        </div>
                        <div class="poke-icon col-1">
                            <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Items/Official/poke.png">
                        </div>
                    </div>

                    <div class="d-flex d-none justify-content-center align-items-center mx-auto col-8 mt-1" data-holidayhills=true>
                        <div class="candy-calculation col-sm-7 col-11" id="calc-candy">
                            0
                        </div>
                        <div class="candy-icon col-1">
                            <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/refs/heads/main/Items/Official/candy.png">
                        </div>
                    </div>

                    <!--- Artwork Settings --->
                    <div class="card-body d-block justify-content-center mt-0" id="artwork-settings">
                        <div class="card bg-transparent border-0">
                            <div class="card-body d-flex no-wrap justify-content-center align-content-center">
                                <div class="form-check col-1 mx-2">
                                    <input class="form-check-input radio background-type" type="radio"
                                        data-background="simple" name="background-type" id="background-type-simple"
                                        checked>
                                </div>
                                <div class="col-md-8 col-10 text-start background-label on" data-background="simple">
                                    Simple background</div>
                            </div>
                        </div>

                        <div class="card bg-transparent border-0">
                            <div class="card-body d-flex no-wrap justify-content-center align-content-center">
                                <div class="form-check col-1 mx-2">
                                    <input class="form-check-input radio background-type" type="radio"
                                        data-background="complex" name="background-type" id="background-type-complex">
                                </div>
                                <div class="col-md-8 col-10 text-start background-label" data-background="complex">Complex
                                    background</div>
                            </div>
                        </div>

                        <p class="medium-title">Number of Characters</p>
                        <div class="card bg-transparent border-0 col-7 mx-auto mb-1">
                            <div class="input-group">
                                <input type="number" class="form-control" value=0 min=0 max=7 id="characters-count">
                            </div>
                        </div>
                    </div>

                    <!--- Writing Settings --->
                    <div class="card-body d-block justify-content-center mt-0 d-none" id="writing-settings">
                        <div class="card bg-transparent border-0">
                            <div class="card-body d-flex no-wrap justify-content-center align-content-center">
                                <div class="form-check col-1 mx-2">
                                    <input class="form-check-input radio writing-type" type="radio" data-writing="solo"
                                        name="writing-type" id="writing-type-solo" checked>
                                </div>
                                <div class="col-md-8 col-10 text-start writing-label on" data-writing="solo">Solo
                                    writing</div>
                            </div>
                        </div>

                        <div class="card bg-transparent border-0">
                            <div class="card-body d-flex no-wrap justify-content-center align-content-center">
                                <div class="form-check col-1 mx-2">
                                    <input class="form-check-input radio writing-type" type="radio"
                                        data-writing="collab" name="writing-type" id="writing-type-collab">
                                </div>
                                <div class="col-md-8 col-10 text-start writing-label" data-writing="collab">Collab
                                    writing or roleplay</div>
                            </div>
                        </div>

                        <p class="medium-title">Word Count</p>
                        <div class="card bg-transparent border-0 col-7 mx-auto mb-1">
                            <div class="input-group">
                                <input type="number" class="form-control" value=0 min=0 id="word-count">
                            </div>
                        </div>
                    </div>

                </div>

                <hr class="border border-secondary border-2 opacity-50">

                <div class="d-none" id="mission-confirm">
                    <h2 class="modal-title fs-5 mb-3">Mission</h2>
                    <div
                        class="card extension col-md-9 col-12 mx-auto mt-4 mb-5 justify-content-center align-items-center">
                        <p class="px-3 mt-3 mb-4"><b>This is the location of one or more available missions!</b><br>Check
                            the box below if this is a mission submission.</p>
                        <div class="form-check mb-3 mx-auto p-0 text-center justify-content-center">
                            <input class="form-check-input extension-check m-0" type="checkbox" value=""
                                id="mission-check">
                        </div>

                        <div class="d-none party-dropdown col-md-9 col-11 my-4" id="mission-select-container">

                            <hr class="col-12 mt-0 mb-4">

                            <div class="dropdown-label">Select a <b>mission</b>.</div>
                            <select class="select-user guide-select" id="mission-select"></select>

                            <hr class="col-12 my-4">
                        </div>
                        
                        <p class="d-none px-3" id="mission-check-text">Which teams <b>are able to claim rewards</b>?<span class="d-none" id="mission-key-text"><br>Select the <b>Key</b> next to the team that will be using one.</span></p>

                        <div class="w-75 p-0 mb-3 d-none" id="mission-check-confirm">
                        </div>

                    </div>
                    <hr class="border border-secondary border-2 opacity-50">
                </div>

                <div class="d-none" id="extensions-period">
                    <h2 class="modal-title fs-5 mb-3">Extension</h2>
                    <p>Extensions are only given to those who have asked for one ahead of the deadline! <b>Do not</b>
                        check the box below if you have not been confirmed for an extension!</p>
                    <div
                        class="card extension col-md-7 col-12 mx-auto mt-4 mb-5 justify-content-center align-items-center">
                        <p class="px-3 mt-3">Was an <b>extension</b> granted for this piece for the month of <b
                                id="extension-month">MONTH YEAR</b>?</p>
                        <div class="form-check mb-3 mx-auto p-0 text-center justify-content-center">
                            <input class="form-check-input extension-check m-0" type="checkbox" value=""
                                id="extension-check">
                        </div>
                    </div>

                    <div class="help-text d-none">
                        <div class="tip-box col-lg-10 col-md-11 col-12 pt-4">
                            <p>The option for an extension will only appear <b>between the 1st and 7th of the month</b>
                                (before midnight EST)!</p>
                        </div>
                    </div>
                    <hr class="border border-secondary border-2 opacity-50">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="go-to-results" data-bs-dismiss="modal" disabled>Confirm Information</button>
                </div>
            </div>
        </div>
    </div>


    <!--- Results container --->
    <div class="results-container text-center align-content-center justify-content-center d-none"
        id="results-container">

        <div class="tip-box">
            <div class="example-header">Press "Submit to Group" at the bottom of this page once you're ready <i
                    class="fa-solid fa-exclamation tip-icon exclaim"></i></div>
            <p>
                Be sure to <b>review your results</b>, especially if you've <b>used an item</b>!
                <br><b>To view or hide a team's results</b>, press the team's name at the top of their card!
            </p>
        </div>

        <div class="tip-box">
            <p style="color:#ff4e4e;" class="fw-bold mb-0">
                <i class="fa-solid fa-warning me-1" style="color:#ffcb48;"></i> If there are no recruits shown in the results below, <u><b><i>DO NOT</b></i></u> submit to the group! <i class="fa-solid fa-warning ms-1" style="color:#ffcb48;"></i>
                <br><b><i>Refresh the page and start again.</i></b> If the issue persists, notify a staff member.
            </p>
        </div>

        <div class="row d-flex flex-wrap justify-content-between col-lg-10 col-12 mx-auto" id="results-cards-container">
            <div class="results team-card justify-content-center align-items-center text-center my-3 mx-auto col-xl-5 col-10 collapse fade"
                id="results-tab-2">
                <div class="col-11 mx-auto">
                    <div class="section-header fs-5">Team 2</div>
                    <div>Username</div>
                    <hr>
                </div>
            </div>

            <div
                class="results team-card justify-content-center align-items-center text-center my-3 mx-auto col-xl-5 col-10 d-none">
                <div class="col-11 mx-auto">
                    <div class="section-header fs-5">Team Name</div>
                    <div>Username</div>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-star"></i></div>
                        <div><span class="results label item">CHARACTER</span>, <span
                                class="results label item">CHARACTER</span>,
                            and <span class="results label item">CHARACTER</span> have successfully explored <span
                                class="results label earned">DUNGEON</span>!</div>
                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/rank-normal.png"
                                width=30px></div>
                    </div>

                    <hr>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>Due to your <span class="results label item">Lost Loot</span>, your team gains an
                            additional <span class="results label earned">+5,000 Poké</span>!</div>
                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/lost-loot.png"
                                width=30px></div>
                    </div>

                    <hr>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>Due to your <span class="results label item">Wonder Chest</span>, your team gains an
                            additional <span class="results label earned">+5 levels</span>!</div>
                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/wonder-chest.png"
                                width=30px></div>
                    </div>
                    <hr>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>Due to your <span class="results label item">Tera Orb</span>, your team gains an additional
                            <span class="results label earned">+10 levels</span>!
                        </div>
                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/tera-orb.png"
                                width=30px></div>
                    </div>
                    <hr>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>Due to your <span class="results label item">Golden Mask</span>, during your adventure, it
                            seems a(n) <select class="results label earned select-result" data-team=""></select> has
                            developed a kinship with your team!</div>

                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/golden-mask.png"
                                width=30px></div>
                    </div>

                    <hr>

                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>During the adventure, it seems your team has discovered a <span
                                class="results label earned">RANDOM
                                TOKEN</span>!</div>

                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/Random.png"
                                width=30px></div>
                    </div>

                    <hr>
                    <div class="d-flex no-wrap align-content-center justify-content-between mx-auto my-3">
                        <div class="me-2"><i class="fa-solid fa-caret-right"></i></div>
                        <div>Due to your <span class="results label item">Wishing Star</span>, your team discovered a(n)
                            <span class="results label earned">POTION</span>!
                        </div>
                        <div class="ms-2"><img
                                src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/wishing-star.png"
                                width=30px></div>
                    </div>

                    <div class="results recruit icon">
                        <img
                            src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/shiny/venusaur.png">
                    </div>

                    <!--- <div class="results recruit icon">
              <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Potions%20%26%20Juices/Animal-Potion.png" width=120px>
            </div> --->
                    <hr>
                    <div class="row d-flex flex-wrap">
                        <div class="col-6">
                            <div class="results earnings">Poké Earned</div>
                            <div class="results earnings container">
                                <div class="d-flex no-wrap align-items-center justify-content-center mx-auto">
                                    <div class="fs-5">1234</div>

                                    <div class="ms-1"><img
                                            src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/poke.png"
                                            width=30px></div>
                                </div>

                            </div>
                        </div>

                        <div class="col-6">
                            <div class="results earnings">Levels Gained</div>
                            <div class="results earnings container">
                                <div class="d-flex no-wrap align-items-center justify-content-center mx-auto">
                                    <div class="fs-5">15</div>

                                    <div class="ms-1"><i class="fa-solid fa-caret-up" style="color:#5ac976;"></i></div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <button class="big-button submit-link mx-auto my-4" id="final-submit-btn">Submit to Group</button>
    </div>


    <!--- Thank you container --->
    <div class="end-container text-center d-flex align-items-center justify-content-center d-none" id="end-container">
        <div id="wait-for-submission" class="">
            <div class="loading" style="font-size: 0.75em;"></div>
            <div class="loading-text" style="font-size:1.75em;">Submitting results . . .</div>
            <div class="tip-box col-10">
                <p>Please wait at least <span class="fw-bold" style="color:#f4ba61;"><span id="time-left">15</span>
                        seconds</span> to confirm that your submission has been logged in the <b>#grading-logs</b>
                    channel!</p>
                <p>If your submission is logged before the countdown is over, click the <b>"Continue"</b> button or feel
                    free to close out of this page.</p>
                <button type="button" class="btn border-light border border-3 rounded-3 py-1 px-2 btn-info fw-bold"
                    style="color:#162c70;" id="see-end-btn">Continue</button>
            </div>
        </div>

        <div id="completed-end-container" class="my-auto pt-3 d-none">
            <img src="https://raw.githubusercontent.com/PMD-Beyond-the-Sea/PMD-BTS-Assets/main/Items/Official/save-complete.png"
                class="col-xl-3 col-lg-4 col-sm-5 col-8">
            <div class="section-header fs-1">Thank you!</div>

            <div class="results team-card col-lg-8 col-sm-10 col-11 mx-auto mt-4">
                <p class="mt-2">Be sure to check whether or not your submission was sent to the Discord's
                    <b>#grading-logs</b> channel!
                </p>
                <p>If there are any issues or concerns with your submission, let us know
                    in either the <b>➤ BUG REPORTS</b> thread in the same channel or privately via <b>#submit-a-ticket</b>.</p>
                <p>If something has gone wrong with your submission, please send a screenshot or a copy of the
                    information with your inquiry.
                    <br>To <b>start over</b>, refresh the page.
                </p>
                <hr class="opacity-75">
                <span class="fw-bold text-decoration-underline">Show Results</span>
                <div class="form-check form-switch col-1 mx-auto">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggle-results" data-bs-toggle="collapse" data-bs-target="#end-results-cards">
                </div>
            </div>

            <div class="col-lg-10 col-12 mx-auto collapse p-0" id="end-results-cards">
                <div class="row d-flex flex-wrap justify-content-between w-100 my-4" id="end-results-cards-container"></div>
            </div>
        </div>
    </div>


    <!-- Credits Modal -->
    <div class="modal modal-lg fade" id="credits-modal" tabindex="-1"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Credits</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Sprites</b> (start screen, submission screen)
                        sourced from
                        <a href="https://pokemondb.net/sprites">Pokémon Database</a>
                    </p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Official <i>Pokémon Mystery Dungeon: Rescue Team
                                DX</i> menu
                            icons, item images, & background illustrations</b> (start screen, submission screen) sourced
                        from <a
                            href="https://www.spriters-resource.com/nintendo_switch/pokemonmysterydungeonrescueteamdx/">The
                            Spriters
                            Resource</a></p>
                    <p>Additional <b>background illustration</b> (end screen) & <b>UI</b> (results screen) sourced from
                        <a href="https://mysterydungeon.pokemon.com/en-us/">official Pokémon Mystery Dungeon: Rescue
                            Team DX
                            website</a>
                    </p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Gen I-VIII Pokémon pixel sprites</b> (dungeons,
                        results
                        screen) sourced from <a href="https://github.com/msikma/pokesprite">msikma's PokéSprite
                            respository</a></p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Gen IX Pokémon pixel sprites</b> (dungeons,
                        results screen)
                        sourced from <a href="https://play.pokemonshowdown.com/sprites/">Pokémon Showdown</a> and the <a
                            href="https://www.pokecommunity.com/threads/generation-9-resource-pack-v21-1.527398/">Generation
                            9
                            Resource Pack on PokéCommunity</a></p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Ludo dices icons</b> (results screen) created by
                        <a href="https://www.flaticon.com/free-icons/ludo-dices">Vectorslab via Flaticon</a>
                    </p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Potions & Juices art</b> (dungeons, results
                        screen) created
                        by <a href="https://www.deviantart.com/scribble-nebula">Scribble-Nebula</a> <i
                            class="fa-brands fa-deviantart ms-1"></i></p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>World map illustration</b> created by <a
                            href="https://www.deviantart.com/minish-mae">Minish-Mae</a> <i
                            class="fa-brands fa-deviantart ms-1"></i>
                    </p>
                    <p><i class="fa-solid fa-caret-right me-3"></i><b>Dungeon Grader</b> coded by <a href="https://dragon-heist.carrd.co/">dragon-heist</a>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Help Modal (Start) -->
    <div class="modal modal-lg fade" id="help-modal-start" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="help-title">Guide: Users, Teams, & Characters</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="line-height:2em;">

                    <ul class="nav nav-underline flex-column" id="myTab" role="tablist">
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#start-page-1"><i class="fa-solid fa-caret-right me-2"></i> Filling User, Team, and Character Info</button>
                        </li>
                        <li class="nav-item col-10 col-md-8col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#start-page-2"><i class="fa-solid fa-caret-right me-2"></i> Copying Between Boxes <span class="rounded p-1" style="background:#23bc82; color:#084a3a"><i class="fa-solid fa-clone fa-lg"></i></span></button>
                        </li>
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#start-page-3"><i class="fa-solid fa-caret-right me-2"></i> Clearing Info <span class="rounded p-1" style="background:#dd4045; color:#720404"><i class="fa-solid fa-trash-can fa-lg"></i></span></button>
                        </li>
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#start-page-4"><i class="fa-solid fa-caret-right me-2"></i> Ready to Continue?</button>
                        </li>
                    </ul>

                    <hr class="my-4">

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="start-page-1">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Filling User, Team, and Character Info</h4>
                            <p class="mb-2">In each of the boxes, select...</p>
                            <ul class="ps-5">
                                <li>a <b>username</b> from the list (<i>only</i> include people who worked on the piece!)</li>
                                <li>a <b>team</b> belonging to the user</li>
                                <li>a <b>character</b> featured in the submission</li>
                            </ul>
                            <p>An example of the user box is below. (You can click on it!)</p>
    
                            <div class="container-fluid d-flex flex-wrap justify-content-center team-box first col-11 team-container-1 mt-1 mb-3" style="order:initial;">
                                <div class="number first"><i class="fa-solid fa-1"></i></div>
                                <button class="copy-prev clear-box d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Clear team">
                                    <i class="fa-solid fa-trash-can fa-lg"></i>
                                </button>
                                <button class="copy-prev d-flex justify-content-center align-items-center" data-bs-toggle="tooltip" data-bs-title="Copy from previous team">
                                    <i class="fa-solid fa-clone fa-lg"></i>
                                </button>
                        
                                <div class="party-dropdown col-12">
                                    <div class="dropdown-label">Username</div>
                                    <select class="select-user guide-select">
                                        <option value="none">(none)</option>
                                        <option>The-Sleeping-Wayfarer</option>
                                        <option>bountyhuntin.</option>
                                        <option>rescuerExtraordinaire</option>
                                    </select>
                                </div>
                                <div class="team-member d-flex flex-wrap col-12">
                                    <div class="party-dropdown col-xxl-7 col-xl-12 col-md-6 col-sm-6 col-12">
                                        <div class="dropdown-label">Team</div>
                                        <select class="select-team guide-select">
                                            <option value="none">(none)</option>
                                            <option>Wayfinder</option>
                                            <option>Ghost Maiden</option>
                                            <option>Aurora Borealis</option>
                                        </select>
                                    </div>
                                    <div class="party-dropdown col-xxl-4 col-xl-12 col-md-5 col-sm-5 col-12">
                                        <div class="dropdown-label">Character</div>
                                        <select class="select-char guide-select">
                                            <option value="none">(none)</option>
                                            <option>Wyndam</option>
                                            <option>Wynton</option>
                                            <option>Evil-Eye</option>
                                            <option>Stein</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
    
                            <p>Do this for each character featured in the submission! A <b>maximum of 4 characters</b> may be present in a party at once. <b>The order of the characters doesn't matter!</b></p>
    
                            <div class="tip-box mt-4">
                                <div class="example-header">REGARDING CAMEOS <i class="fa-solid fa-exclamation tip-icon exclaim"></i>
                                </div>
                                <p>
                                    Only select <b>users who worked on the submission</b>! Even if a person's character is present, if the owner of the character did not work on the piece, they <b>do not</b> receive any rewards.
                                </p>
                                <p>The <b>exception</b> to this is if you include characters from a <b>shared team</b> that you co-own with someone else. Including a character from a team you own, even if the character is not <i>technically</i> yours will allow that character to receive levels!</p>
                            </div>        
                        </div>

                        <div class="tab-pane fade" id="start-page-2">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Copying From the Last Box</h4>
                            <p>If it's a <b>solo submission</b> or a submission with <b>multiple characters from the same team</b>, you can use the <span class="rounded p-1" style="background:#23bc82; color:#084a3a"><i class="fa-solid fa-clone fa-lg"></i></span> button to <b>copy the information from the previous box</b>.</p>
                            <p>This is just a little time-saver!</p>
                        </div>

                        <div class="tab-pane fade" id="start-page-3">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Clearing the Box</h4>
                            <p>Using the <span class="rounded p-1" style="background:#dd4045; color:#720404"><i class="fa-solid fa-trash-can fa-lg"></i></span> button attached to a box will <b>clear the information for the current user</b>.</p>
                            <p>This will set the <b>username</b>, <b>team</b>, and <b>character</b> to <b>"none"</b>.</p>
                        </div>

                        <div class="tab-pane fade" id="start-page-4">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Ready to Continue?</h4>
                            ...
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal (Dungeon Details) -->
    <div class="modal modal-lg fade" id="help-modal-map" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="help-title">Guide: The World Map</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="line-height:1.7em;">

                    <ul class="nav nav-underline flex-column" id="myTab" role="tablist">
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#map-page-1"><i class="fa-solid fa-caret-right me-2"></i> Getting to a Dungeon</button>
                        </li>
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#map-page-2"><i class="fa-solid fa-caret-right me-2"></i> Level Restrictions</button>
                        </li>
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#map-page-3"><i class="fa-solid fa-caret-right me-2"></i> Filling in Submission Info</button>
                        </li>
                        <li class="nav-item col-10 col-md-8 col-lg-6" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#map-page-4"><i class="fa-solid fa-caret-right me-2"></i> Ready to Continue?</button>
                        </li>
                    </ul>

                    <hr class="my-4">

                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="map-page-1">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Getting to a Dungeon</h4>
                            <p class="mb-2">To navigate to a dungeon, you can...</p>
                            <ul class="ps-5">
                                <li><b>navigate an island</b> and select a dungeon from ones available on it</li>
                                <li><b>use the dropdown menu</b> to go directly to the dungeon</li>
                            </ul>

                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#map-page-navigation-1">From Island to Dungeon</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#map-page-navigation-2">From the Dropdown</button>
                                </li>
                            </ul>
    
                            <div class="tab-content card" style="border-top-left-radius: 0;">
                                <div class="tab-pane fade show active p-4" id="map-page-navigation-1">
                                    <p>While on the world map, click on any island to open up a screen that displays the <b>name of the island</b>, and a <b>description</b>.</p>
                                    <p>Below the description, there will be a set of <b>banners that can take you to a dungeon screen</b>!</p>

                                </div>

                                <div class="tab-pane fade p-4" id="map-page-navigation-2">
                                    <p>While on the world map, in the <b>top-right corner</b> of the page, you will see a dropdown menu. Every dungeon will be listed here in alphabetical order.</p>
                                    <p>Choose the dungeon you want to go to, and click the <i class="fa-solid fa-circle-arrow-right fa-lg mx-1" style="color:#23bc82"></i> arrow button to proceed.</p>
                                    <p><b>For mobile users,</b> the dropdown will be the only way to navigate to a dungeon.</p>
                                    <p>You can see what the dropdown menu looks like below!</p>

                                    <div class="col-12 d-flex flex-wrap justify-content-center align-items-center mt-4">
                                        <select class="guide-select col-9 me-2">
                                            <option>Select a dungeon</option>
                                            <option>"We didn't want you to see this!"</option>
                                            <option>Abandoned Ironworks</option>
                                            <option>Abyssal Badlands</option>
                                            <option>Air Fortress</option>
                                            <option>Ancestral Battlegrounds</option>
                                            <option>Ancient Barrow</option>
                                            <option>...</option>
                                        </select>
                                        <div class="to-dungeon col-1" style="cursor: pointer;"><i class="fa-solid fa-circle-arrow-right"></i></div>
                                    </div>
                                </div>
                            </div>
    
                            <hr class="my-4">
                            <p>A dungeon's info page consists of the <b>dungeon name</b>, a <b>description</b>, and a <b>list of possible recruits</b>. Once you've navigated to the dungeon that you want to enter, you click on the <b>Enter Dungeon</b> button at the bottom of the page.</p>
                            <p>It looks like this:</p>

                            <p class="text-center"><button class="big-button island-link my-3 mx-auto" style="cursor: not-allowed;">Enter Dungeon</button></p>

                            <hr class="my-4">
                            <div class="tip-box mt-4 collapse show active map-example" style="transition: none;">
                                <div class="example-header">Try it Out <i class="fa-solid fa-exclamation tip-icon exclaim"></i>
                                </div>
                                <p>Try clicking on the <b>Babbling Creek</b> banner to see the recruits page!<br><sub>(The other banners are disabled for the purposes of this demo.)</sub></p>
                            </div>
                            <div class="tip-box mt-4 collapse map-example" style="transition: none;">
                                <div class="example-header">Back to Island <i class="fa-solid fa-exclamation tip-icon exclaim"></i>
                                </div>
                                <p>Click on the <b>Babbling Creek</b> banner again to return to the island demo.</p>
                            </div>

                            <div class="map-information m-auto col-12 text-center mt-3" style="opacity:1; height:650px; overflow-y: auto; overflow-x: hidden;">

                                <div class="collapse show active island-overview map-example" style="transition: none;">
                                    <div class="section-header mt-5 mb-2 fs-3">Kala Island</div>
                                    <div class="p-4">
                                        <p>Nestled in the far Western Sea is a comfortable island known as Kala. Kala Island is the base of operations for the <b>Global Communication Setup Foundation</b>. This island is home to the port city of <b>Ethovalon</b>, a popular tourist destination for visitors and home to the guild itself. Beyond the cities and towns are lush, green fields full of flowers and streams cutting through the countryside. The island is typically warm year-round and many of the dungeons on the island are rather small, making it the perfect place for rookies and newcomers to start honing their craft as explorers and dungeon delvers!</p>
                                    </div>
                                </div>
                    
                                <div class="dungeon-overview collapse map-example"style="transition: none;">
                                    <div class="section-header mt-4 mb-2 fs-5">Babbling Creek</div>
                                    <div class="px-4">
                                        <p>Just outside of Ethovalon lays a dungeon so small, you’ll probably miss it. The creek is home to plenty of feral Pokemon that may become hostile if you enter their territory. The lush grass that borders the small stream is boggy, and the current of the water is as gentle as ever. However, there’s said to be a hidden hole towards the delta where the creek ends. Is there something hidden there?</p>
                                        <p>Only one way to find out!</p>
                                    </div>
                    
                                    <hr class="col-10 mx-auto">
                    
                                    <div class="d-flex flex-wrap justify-content-center pb-3">
                    
                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/poliwag.png">
                                            <div class="recruit-label">Poliwag</div>
                                        </div>

                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/goldeen.png">
                                            <div class="recruit-label">Goldeen</div>
                                        </div>

                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/azurill.png">
                                            <div class="recruit-label">Azurill</div>
                                        </div>

                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/surskit.png">
                                            <div class="recruit-label">Surskit</div>
                                        </div>

                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/wooper.png">
                                            <div class="recruit-label">Wooper (Johto)</div>
                                        </div>
                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/barboach.png">
                                            <div class="recruit-label">Barboach</div>
                                        </div>
                                        <div class="dungeon-recruit-container col-md-3 col-5">
                                            <img src="https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/tympole.png">
                                            <div class="recruit-label">Tympole</div>
                                        </div>
                                    </div>
                                    <button class="big-button island-link mt-4 mx-auto" style="cursor: not-allowed;">Enter Dungeon</button>
                                </div>
                    
                                <div class="row d-flex flex-wrap justify-content-center px-3 mb-4">
                                    <div class="dungeon-banner">
                                        <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" data-bs-toggle="collapse" data-bs-target=".map-example">
                                            <div class="dungeon-label-banner">
                                                Babbling Creek
                                            </div>
                                        </button>
                                        <div class="dungeon-banner-tail-left"></div>
                                        <div class="dungeon-banner-tail-right"></div>
                                    </div>

                                    <div class="dungeon-banner">
                                        <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" style="cursor: not-allowed;" disabled>
                                            <div class="dungeon-label-banner">
                                                Tiny Meadow
                                            </div>
                                        </button>
                                        <div class="dungeon-banner-tail-left"></div>
                                        <div class="dungeon-banner-tail-right"></div>
                                    </div>

                                    <div class="dungeon-banner">
                                        <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" style="cursor: not-allowed;" disabled>
                                            <div class="dungeon-label-banner">
                                                Buggy Woods
                                            </div>
                                        </button>
                                        <div class="dungeon-banner-tail-left"></div>
                                        <div class="dungeon-banner-tail-right"></div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="tab-pane fade" id="map-page-2">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Level Restrictions</h4>
                            <p>Some dungeons <b>may have level requirements</b>! Dungeons of <b>Heroic</b> or <b>Legendary</b> difficulty will require every party member to be level 80 or higher, and level 90 or higher respectively. Dungeons that have a level requirement will state so over top of their banner, like so:</p>

                            <div class="row d-flex flex-wrap justify-content-center p-3 my-5 map-information" style="opacity:1;">
                                <div class="dungeon-banner">
                                    <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" style="cursor: not-allowed;" disabled>
                                        <div class="dungeon-label-banner">
                                            Regular Dungeon
                                        </div>
                                    </button>
                                    <div class="dungeon-banner-tail-left"></div>
                                    <div class="dungeon-banner-tail-right"></div>
                                </div>

                                <div class="dungeon-banner">
                                    <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" style="cursor: not-allowed;" disabled>
                                        <div class="dungeon-label-banner">
                                            Heroic Dungeon
                                        </div>
                                        <div class="heroic"><i class="fa-solid fa-certificate"></i></div>
                                    </button>
                                    <div class="dungeon-banner-tail-left"></div>
                                    <div class="dungeon-banner-tail-right"></div>
                                </div>

                                <div class="dungeon-banner">
                                    <button class="dungeon-select-banner d-flex col-5 align-items-center justify-content-center" style="cursor: not-allowed;" disabled>
                                        <div class="dungeon-label-banner">
                                            Legendary Dungeon
                                        </div>
                                        <div class="legendary"><i class="fa-solid fa-certificate"></i></div>
                                    </button>
                                    <div class="dungeon-banner-tail-left"></div>
                                    <div class="dungeon-banner-tail-right"></div>
                                </div>
                            </div>

                            <p><b>If one or more party members are below the required level,</b> the <b>Enter Dungeon</b> button will be disabled and you will not be able to continue! If there was a mistake in selecting party members, you will have to refresh the page to start over!</p>
                            <p>The <b>Enter Dungeon</b> button will look slightly faded.</p>
                            <p class="text-center mt-2"><button class="big-button island-link my-3 mx-auto" style="cursor: not-allowed;" disabled>Enter Dungeon</button></p>
                        </div>

                        <div class="tab-pane fade" id="map-page-3">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Filling in Submission Info</h4>
                            <p class="mb-2">Once you've entered the dungeon, you will have the chance to...</p>
                            <ul class="ps-5">
                                <li><b>confirm the characters</b> in the submission</li>
                                <li><b>select Monthly Items for each team</b> (i.e. Golden Mask, Lost Loot, etc.)</li>
                                <li>add an <b>optional title</b> for your submission</li>
                                <li><b>provide a link</b> to where the submission has been uploaded</li>
                                <li><b>calculate your Poké</b></li>
                            </ul>
                            <p class="mb-2">During certain times of the year, you will also be able to...</p>
                            <ul class="ps-5">
                                <li>confirm that you received an <b>extension</b> for your submission</li>
                                <li><b>mark mission completion</b> (and potentially <b>key usage</b>) by teams on missions</li>
                            </ul>
                        </div>

                        <div class="tab-pane fade" id="map-page-4">
                            <h4 class="mb-4"><i class="fa-solid fa-star me-2"></i> Ready to Continue?</h4>
                            ...
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>